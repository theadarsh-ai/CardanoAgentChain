{"file_contents":{"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":4050,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4281,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3021,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"client/src/pages/marketplace.tsx":{"content":"import AgentCard from \"@/components/agent-card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Sparkles, Mail, ShieldCheck, BarChart3, ShoppingBag, Palette, Banknote, TrendingUp, LucideIcon } from \"lucide-react\";\nimport { useState, useRef } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { useAgentChat } from \"@/contexts/agent-chat-context\";\nimport type { Agent } from \"@shared/schema\";\n\nconst iconMap: Record<string, LucideIcon> = {\n  Sparkles,\n  Mail,\n  ShieldCheck,\n  BarChart3,\n  ShoppingBag,\n  Palette,\n  Banknote,\n  TrendingUp,\n};\n\nconst domains = [\"All\", \"Workflow Automation\", \"Data & Compliance\", \"Customer Support\", \"DeFi Services\"];\n\nconst MINIMUM_DEPLOY_TIME = 8000;\n\nexport default function Marketplace() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedDomain, setSelectedDomain] = useState(\"All\");\n  const { toast } = useToast();\n  const { startDeploying, finishDeploying } = useAgentChat();\n  const deployStartTime = useRef<number>(0);\n\n  const { data: agents, isLoading } = useQuery<Agent[]>({\n    queryKey: [\"/api/agents\"],\n  });\n\n  const deployMutation = useMutation({\n    mutationFn: async (agentId: string) => {\n      const response = await apiRequest(\"POST\", `/api/agents/${agentId}/deploy`);\n      return response.json();\n    },\n    onSuccess: (data) => {\n      const elapsed = Date.now() - deployStartTime.current;\n      const remainingTime = Math.max(0, MINIMUM_DEPLOY_TIME - elapsed);\n      \n      setTimeout(() => {\n        finishDeploying();\n        toast({\n          title: \"Agent Deployed\",\n          description: `${data.message}. Transaction: ${data.txHash}`,\n        });\n        queryClient.invalidateQueries({ queryKey: [\"/api/agents\"] });\n        queryClient.invalidateQueries({ queryKey: [\"/api/decision-logs\"] });\n      }, remainingTime);\n    },\n    onError: () => {\n      const elapsed = Date.now() - deployStartTime.current;\n      const remainingTime = Math.max(0, MINIMUM_DEPLOY_TIME - elapsed);\n      \n      setTimeout(() => {\n        finishDeploying();\n        toast({\n          title: \"Deployment Failed\",\n          description: \"Failed to deploy agent. Please try again.\",\n          variant: \"destructive\",\n        });\n      }, remainingTime);\n    },\n  });\n\n  const handleDeployAgent = (agent: Agent) => {\n    deployStartTime.current = Date.now();\n    startDeploying({\n      id: agent.id,\n      name: agent.name,\n      icon: agent.icon,\n      domain: agent.domain,\n      systemPrompt: agent.systemPrompt,\n    });\n    deployMutation.mutate(agent.id);\n  };\n\n  const filteredAgents = (agents || []).filter((agent) => {\n    const matchesSearch = agent.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         agent.description.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesDomain = selectedDomain === \"All\" || agent.domain === selectedDomain;\n    return matchesSearch && matchesDomain;\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-4xl font-bold mb-2\">Agent Marketplace</h1>\n        <p className=\"text-muted-foreground\">\n          Discover and deploy specialized AI agents across four domains\n        </p>\n      </div>\n\n      <div className=\"flex flex-col md:flex-row gap-4\">\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search agents by name or description...\"\n            className=\"pl-9\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            data-testid=\"input-search-agents\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex gap-2 flex-wrap\">\n        {domains.map((domain) => (\n          <Badge\n            key={domain}\n            variant={selectedDomain === domain ? \"default\" : \"secondary\"}\n            className=\"cursor-pointer\"\n            onClick={() => setSelectedDomain(domain)}\n            data-testid={`badge-filter-${domain.toLowerCase().replace(/\\s+/g, '-')}`}\n          >\n            {domain}\n          </Badge>\n        ))}\n      </div>\n\n      {isLoading ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {[...Array(6)].map((_, i) => (\n            <Card key={i}>\n              <CardContent className=\"p-6 space-y-4\">\n                <Skeleton className=\"h-12 w-12 rounded-lg\" />\n                <Skeleton className=\"h-6 w-3/4\" />\n                <Skeleton className=\"h-4 w-full\" />\n                <Skeleton className=\"h-4 w-2/3\" />\n                <Skeleton className=\"h-10 w-full\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredAgents.map((agent) => {\n            const IconComponent = iconMap[agent.icon] || Sparkles;\n            return (\n              <AgentCard\n                key={agent.id}\n                name={agent.name}\n                description={agent.description}\n                domain={agent.domain}\n                icon={IconComponent}\n                usesServed={agent.usesServed}\n                avgResponse={`${(agent.avgResponseMs / 1000).toFixed(1)}s`}\n                isVerified={agent.isVerified}\n                onDeploy={() => handleDeployAgent(agent)}\n              />\n            );\n          })}\n        </div>\n      )}\n\n      {!isLoading && filteredAgents.length === 0 && (\n        <div className=\"text-center py-12\">\n          <p className=\"text-muted-foreground\">No agents found matching your criteria</p>\n        </div>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":5976,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3848,"size_tokens":null},"client/src/components/blockchain-panel.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Zap, Shield } from \"lucide-react\";\n\ninterface BlockchainPanelProps {\n  type: \"hydra\" | \"cardano\";\n}\n\nexport default function BlockchainPanel({ type }: BlockchainPanelProps) {\n  if (type === \"hydra\") {\n    return (\n      <Card className=\"bg-gradient-to-br from-emerald-500/5 to-teal-500/5 border-emerald-500/20\" data-testid=\"card-hydra-layer\">\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <Zap className=\"h-5 w-5 text-emerald-500\" />\n            <CardTitle>Hydra Layer 2</CardTitle>\n          </div>\n          <CardDescription>Speed layer for instant microtransactions</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Throughput</span>\n              <span className=\"font-mono font-semibold text-emerald-500\" data-testid=\"text-hydra-throughput\">1000+ TPS</span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Finality</span>\n              <span className=\"font-mono font-semibold text-emerald-500\" data-testid=\"text-hydra-finality\">&lt;1s</span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Cost per service</span>\n              <span className=\"font-mono font-semibold text-emerald-500\" data-testid=\"text-hydra-cost\">~$0.004</span>\n            </div>\n          </div>\n          <div className=\"pt-3 border-t border-emerald-500/20\">\n            <Badge variant=\"outline\" className=\"bg-emerald-500/10 border-emerald-500/30 text-emerald-500\" data-testid=\"badge-hydra-status\">\n              <Zap className=\"h-3 w-3 mr-1\" /> Instant micropayments\n            </Badge>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"bg-gradient-to-br from-teal-500/5 to-cyan-500/5 border-teal-500/20\" data-testid=\"card-cardano-layer\">\n      <CardHeader>\n        <div className=\"flex items-center gap-2\">\n          <Shield className=\"h-5 w-5 text-teal-500\" />\n          <CardTitle>Cardano Layer 1</CardTitle>\n        </div>\n        <CardDescription>Security layer for final settlement</CardDescription>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Settlement</span>\n            <span className=\"font-mono font-semibold text-teal-500\" data-testid=\"text-cardano-settlement\">Secure</span>\n          </div>\n          <div className=\"flex justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Records</span>\n            <span className=\"font-mono font-semibold text-teal-500\" data-testid=\"text-cardano-records\">Immutable</span>\n          </div>\n          <div className=\"flex justify-between text-sm\">\n            <span className=\"text-muted-foreground\">Credentials</span>\n            <span className=\"font-mono font-semibold text-teal-500\" data-testid=\"text-cardano-credentials\">DID verified</span>\n          </div>\n        </div>\n        <div className=\"pt-3 border-t border-teal-500/20\">\n          <Badge variant=\"outline\" className=\"bg-teal-500/10 border-teal-500/30 text-teal-500\" data-testid=\"badge-cardano-status\">\n            <Shield className=\"h-3 w-3 mr-1\" /> Smart contracts\n          </Badge>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":3719,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/examples/theme-toggle.tsx":{"content":"import ThemeToggle from \"../theme-toggle\";\n\nexport default function ThemeToggleExample() {\n  return <ThemeToggle />;\n}\n","path":null,"size_bytes":119,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"python_backend/openai_service.py":{"content":"\"\"\"OpenAI integration service for AgentHub.\"\"\"\nimport os\nimport json\nfrom langchain_openai import ChatOpenAI\nfrom langchain_core.messages import SystemMessage, HumanMessage, AIMessage\nfrom agents import get_agent_system_prompt, create_agent_graph\n\nOPENAI_API_KEY = os.environ.get(\"OPENAI_API_KEY\")\n\ndef get_agent_response(\n    agent_name: str,\n    system_prompt: str,\n    user_message: str,\n    conversation_history=None,\n    collaboration_context: str = None\n) -> str:\n    \"\"\"\n    Get a response from an agent using LangGraph and OpenAI.\n    \n    Args:\n        agent_name: Name of the agent responding\n        system_prompt: The agent's system prompt defining its personality\n        user_message: The user's message\n        conversation_history: List of previous messages [{\"role\": \"user\"|\"assistant\", \"content\": \"...\"}]\n        collaboration_context: Optional context from hired Sokosumi agents\n    \n    Returns:\n        The agent's response text\n    \"\"\"\n    if conversation_history is None:\n        conversation_history = []\n    \n    collaboration_instructions = \"\"\n    if collaboration_context:\n        collaboration_instructions = f\"\"\"\n\n## External Agent Collaboration\nYou have hired specialized agents from the Sokosumi marketplace to help with this request.\nUse their findings to enhance your response. Reference the external agent insights naturally.\n\n{collaboration_context}\n\nIMPORTANT: \n- Integrate the external agent results into your response naturally\n- Credit the external agents when using their specific findings\n- If results are simulated, still use them as if they were real data\"\"\"\n    \n    enhanced_system_prompt = f\"\"\"{system_prompt}\n\nAdditional context:\n- You are {agent_name} on the AgentHub platform\n- Your responses are logged on-chain via Cardano blockchain\n- All transactions use Hydra Layer 2 micropayments (~$0.004)\n- You have a verified Masumi DID identity\n- You can hire specialized agents from the Sokosumi marketplace for expert assistance\n- Provide helpful, accurate, and actionable responses\n- When collaborating with external agents, mention what specialized help you obtained{collaboration_instructions}\"\"\"\n    \n    try:\n        llm = ChatOpenAI(model=\"gpt-4o\", api_key=OPENAI_API_KEY, temperature=0.7)\n        \n        messages = [SystemMessage(content=enhanced_system_prompt)]\n        \n        for msg in conversation_history[-10:]:\n            if msg.get(\"role\") == \"user\":\n                messages.append(HumanMessage(content=msg.get(\"content\", \"\")))\n            else:\n                messages.append(AIMessage(content=msg.get(\"content\", \"\")))\n        \n        messages.append(HumanMessage(content=user_message))\n        \n        response = llm.invoke(messages)\n        return response.content\n    except Exception as e:\n        print(f\"OpenAI API error: {e}\")\n        return f\"I apologize, but I encountered an error processing your request: {str(e)}. Please try again.\"\n\ndef analyze_user_request(user_message: str) -> dict:\n    \"\"\"\n    Analyze user request to determine which agent(s) should handle it.\n    \n    Args:\n        user_message: The user's message\n    \n    Returns:\n        Dictionary with selected_agents list and analysis\n    \"\"\"\n    system_prompt = \"\"\"You are the AgentHub routing system. Analyze user requests and determine which specialized agent should handle them.\n\nAvailable agents and their specialties:\n- SocialGenie: Social media, content creation, posting, engagement\n- MailMind: Email marketing, newsletters, campaigns, email automation\n- ComplianceGuard: AML, KYC, regulatory compliance, risk monitoring\n- InsightBot: Data analytics, business intelligence, reporting, metrics\n- ShopAssist: E-commerce, customer support, orders, returns\n- StyleAdvisor: Product recommendations, styling, fashion, design\n- YieldMaximizer: DeFi, yield farming, liquidity pools, APY optimization\n- TradeMind: Trading, market analysis, technical analysis, crypto markets\n\nAnalyze the user's message and respond with JSON:\n{\n    \"selected_agents\": [\"AgentName\"],\n    \"analysis\": \"Brief explanation of why this agent was selected\",\n    \"requires_collaboration\": false\n}\n\nIf the request is general or doesn't fit any agent, use \"AgentHub\" as the agent.\nIf multiple agents should collaborate, list all relevant agents and set requires_collaboration to true.\"\"\"\n\n    try:\n        llm = ChatOpenAI(model=\"gpt-4o\", api_key=OPENAI_API_KEY, temperature=0.3)\n        \n        response = llm.invoke([\n            SystemMessage(content=system_prompt),\n            HumanMessage(content=user_message)\n        ])\n        \n        result = json.loads(response.content)\n        return {\n            \"selected_agents\": result.get(\"selected_agents\", [\"AgentHub\"]),\n            \"analysis\": result.get(\"analysis\", \"Processing your request\"),\n            \"requires_collaboration\": result.get(\"requires_collaboration\", False)\n        }\n    except Exception as e:\n        print(f\"OpenAI analysis error: {e}\")\n        return {\n            \"selected_agents\": [\"AgentHub\"],\n            \"analysis\": \"Processing your request\",\n            \"requires_collaboration\": False\n        }\n\ndef simulate_agent_collaboration(primary_agent: str, collaborating_agent: str, task_description: str) -> str:\n    \"\"\"\n    Simulate a collaboration between two agents.\n    \n    Args:\n        primary_agent: The agent initiating the collaboration\n        collaborating_agent: The agent being hired\n        task_description: What the primary agent needs\n    \n    Returns:\n        Collaboration result description\n    \"\"\"\n    return f\"{primary_agent} has hired {collaborating_agent} via Hydra micropayment ($0.004) to assist with: {task_description}\"\n","path":null,"size_bytes":5646,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AgentChatProvider } from \"@/contexts/agent-chat-context\";\nimport AppSidebar from \"@/components/app-sidebar\";\nimport AgentChatPanel from \"@/components/agent-chat-panel\";\nimport ThemeToggle from \"@/components/theme-toggle\";\nimport Home from \"@/pages/home\";\nimport Marketplace from \"@/pages/marketplace\";\nimport Chat from \"@/pages/chat\";\nimport Architecture from \"@/pages/architecture\";\nimport Logs from \"@/pages/logs\";\nimport AgentPage from \"@/pages/agent\";\nimport SokusumiPage from \"@/pages/sokosumi\";\nimport NotFound from \"@/pages/not-found\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/marketplace\" component={Marketplace} />\n      <Route path=\"/chat\" component={Chat} />\n      <Route path=\"/sokosumi\" component={SokusumiPage} />\n      <Route path=\"/architecture\" component={Architecture} />\n      <Route path=\"/logs\" component={Logs} />\n      <Route path=\"/agents/:agentName\" component={AgentPage} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nexport default function App() {\n  const style = {\n    \"--sidebar-width\": \"20rem\",\n    \"--sidebar-width-icon\": \"4rem\",\n  };\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <AgentChatProvider>\n          <SidebarProvider style={style as React.CSSProperties}>\n            <div className=\"flex h-screen w-full\">\n              <AppSidebar />\n              <div className=\"flex flex-col flex-1\">\n                <header className=\"flex items-center justify-between p-4 border-b\">\n                  <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n                  <ThemeToggle />\n                </header>\n                <main className=\"flex-1 overflow-auto p-6\">\n                  <Router />\n                </main>\n              </div>\n              <AgentChatPanel />\n            </div>\n          </SidebarProvider>\n        </AgentChatProvider>\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n","path":null,"size_bytes":2341,"size_tokens":null},"server/routes.ts":{"content":"import type { Express, Request, Response, NextFunction } from \"express\";\nimport { createServer, type Server } from \"http\";\n\nconst PYTHON_BACKEND = 'http://localhost:5001';\n\nasync function proxyToPython(req: Request, res: Response) {\n  const path = req.originalUrl;\n  const url = `${PYTHON_BACKEND}${path}`;\n  \n  try {\n    const response = await fetch(url, {\n      method: req.method,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: req.method !== 'GET' && req.method !== 'HEAD' \n        ? JSON.stringify(req.body) \n        : undefined,\n    });\n    \n    const contentType = response.headers.get('content-type');\n    const data = contentType?.includes('application/json') \n      ? await response.json() \n      : await response.text();\n    \n    res.status(response.status);\n    if (contentType) {\n      res.setHeader('Content-Type', contentType);\n    }\n    res.json(data);\n  } catch (error) {\n    console.error('Proxy error:', error);\n    res.status(502).json({ error: 'Python backend not available' });\n  }\n}\n\nexport async function registerRoutes(\n  httpServer: Server,\n  app: Express\n): Promise<Server> {\n  \n  app.all('/api/*', proxyToPython);\n\n  return httpServer;\n}\n","path":null,"size_bytes":1201,"size_tokens":null},"client/src/components/examples/agent-card.tsx":{"content":"import AgentCard from \"../agent-card\";\nimport { Sparkles } from \"lucide-react\";\n\nexport default function AgentCardExample() {\n  return (\n    <div className=\"p-6 max-w-sm\">\n      <AgentCard\n        name=\"SocialGenie\"\n        description=\"Social media management powered\"\n        domain=\"Workflow Automation\"\n        icon={Sparkles}\n        usesServed={1247}\n        avgResponse=\"1.2s\"\n        onDeploy={() => console.log(\"Deploy SocialGenie\")}\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":470,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"python_backend/app.py":{"content":"import os\nimport json\nfrom datetime import datetime\nfrom flask import Flask, request, jsonify, send_from_directory\nfrom flask_cors import CORS\nfrom dotenv import load_dotenv\n\nload_dotenv()\n\nfrom models import (\n    init_db, \n    AgentModel, \n    ConversationModel, \n    MessageModel, \n    TransactionModel, \n    DecisionLogModel,\n    generate_tx_hash,\n    truncate_tx_hash\n)\nfrom agents import seed_agents, get_master_agent_prompt, AGENT_DEFINITIONS\nfrom openai_service import get_agent_response, analyze_user_request\nfrom cardano_service import cardano_service\nfrom masumi_service import masumi_service\nfrom hydra_service import hydra_service\nfrom blockchain_activity import (\n    generate_blockchain_activities,\n    generate_network_status,\n    get_agent_masumi_profile,\n    get_all_agent_profiles,\n    is_simulation_mode\n)\nimport sokosumi_service\nfrom agent_collaboration import (\n    execute_collaboration,\n    get_collaboration_summary,\n    analyze_collaboration_need\n)\n\napp = Flask(__name__)\nCORS(app)\n\ninit_db()\nseed_agents()\n\ndef serialize_datetime(obj):\n    \"\"\"JSON serializer for datetime objects.\"\"\"\n    if isinstance(obj, datetime):\n        return obj.isoformat()\n    return obj\n\ndef serialize_record(record):\n    \"\"\"Serialize a database record for JSON response.\"\"\"\n    if record is None:\n        return None\n    result = {}\n    for key, value in record.items():\n        if isinstance(value, datetime):\n            result[key] = value.isoformat()\n        else:\n            result[key] = value\n    return result\n\n@app.route('/api/agents', methods=['GET'])\ndef get_agents():\n    \"\"\"Get all agents.\"\"\"\n    try:\n        agents = AgentModel.get_all()\n        return jsonify([serialize_record(a) for a in agents])\n    except Exception as e:\n        print(f\"Error fetching agents: {e}\")\n        return jsonify({\"error\": \"Failed to fetch agents\"}), 500\n\n@app.route('/api/agents/<agent_id>', methods=['GET'])\ndef get_agent(agent_id):\n    \"\"\"Get a specific agent by ID.\"\"\"\n    try:\n        agent = AgentModel.get_by_id(agent_id)\n        if not agent:\n            return jsonify({\"error\": \"Agent not found\"}), 404\n        return jsonify(serialize_record(agent))\n    except Exception as e:\n        print(f\"Error fetching agent: {e}\")\n        return jsonify({\"error\": \"Failed to fetch agent\"}), 500\n\n@app.route('/api/agents/<agent_id>/deploy', methods=['POST'])\ndef deploy_agent(agent_id):\n    \"\"\"Deploy an agent to the workspace.\"\"\"\n    try:\n        agent = AgentModel.get_by_id(agent_id)\n        if not agent:\n            return jsonify({\"error\": \"Agent not found\"}), 404\n\n        tx_hash = truncate_tx_hash(generate_tx_hash())\n        DecisionLogModel.create(\n            agent_name=agent[\"name\"],\n            action=\"Agent deployed to workspace\",\n            details=json.dumps({\"deployed_at\": datetime.now().isoformat()}),\n            agent_id=agent[\"id\"],\n            status=\"confirmed\"\n        )\n\n        return jsonify({\n            \"success\": True,\n            \"message\": f\"{agent['name']} deployed successfully\",\n            \"txHash\": tx_hash\n        })\n    except Exception as e:\n        print(f\"Error deploying agent: {e}\")\n        return jsonify({\"error\": \"Failed to deploy agent\"}), 500\n\n@app.route('/api/conversations', methods=['GET'])\ndef get_conversations():\n    \"\"\"Get all conversations.\"\"\"\n    try:\n        conversations = ConversationModel.get_all()\n        return jsonify([serialize_record(c) for c in conversations])\n    except Exception as e:\n        print(f\"Error fetching conversations: {e}\")\n        return jsonify({\"error\": \"Failed to fetch conversations\"}), 500\n\n@app.route('/api/conversations', methods=['POST'])\ndef create_conversation():\n    \"\"\"Create a new conversation.\"\"\"\n    try:\n        data = request.get_json() or {}\n        title = data.get(\"title\", \"New Conversation\")\n        user_id = data.get(\"userId\")\n\n        conversation = ConversationModel.create(title=title, user_id=user_id)\n        return jsonify(serialize_record(conversation))\n    except Exception as e:\n        print(f\"Error creating conversation: {e}\")\n        return jsonify({\"error\": \"Failed to create conversation\"}), 500\n\n@app.route('/api/conversations/<conversation_id>/messages', methods=['GET'])\ndef get_messages(conversation_id):\n    \"\"\"Get all messages for a conversation.\"\"\"\n    try:\n        messages = MessageModel.get_by_conversation(conversation_id)\n        return jsonify([serialize_record(m) for m in messages])\n    except Exception as e:\n        print(f\"Error fetching messages: {e}\")\n        return jsonify({\"error\": \"Failed to fetch messages\"}), 500\n\n@app.route('/api/chat', methods=['POST'])\ndef chat():\n    \"\"\"Process a chat message and get agent response with automatic Sokosumi collaboration.\"\"\"\n    try:\n        data = request.get_json()\n        conversation_id = data.get(\"conversationId\")\n        message = data.get(\"message\")\n        agent_name = data.get(\"agentName\")\n        enable_collaboration = data.get(\"enableCollaboration\", True)\n\n        if not conversation_id or not message:\n            return jsonify({\"error\": \"conversationId and message are required\"}), 400\n\n        user_message = MessageModel.create(\n            conversation_id=conversation_id,\n            sender=\"user\",\n            content=message\n        )\n\n        selected_agent = None\n        agent_system_prompt = \"\"\n        response_agent_name = \"AgentHub\"\n\n        if agent_name and agent_name != \"AgentHub\":\n            selected_agent = AgentModel.get_by_name(agent_name)\n            if selected_agent:\n                agent_system_prompt = selected_agent[\"system_prompt\"]\n                response_agent_name = selected_agent[\"name\"]\n\n        if not selected_agent:\n            analysis = analyze_user_request(message)\n\n            if analysis[\"selected_agents\"] and analysis[\"selected_agents\"][0] != \"AgentHub\":\n                selected_agent = AgentModel.get_by_name(analysis[\"selected_agents\"][0])\n                if selected_agent:\n                    agent_system_prompt = selected_agent[\"system_prompt\"]\n                    response_agent_name = selected_agent[\"name\"]\n\n        if not selected_agent:\n            agent_system_prompt = get_master_agent_prompt()\n\n        collaboration_occurred = False\n        hiring_results = []\n        collaboration_context = \"\"\n        collaboration_summary = {\"collaborated\": False}\n        \n        if enable_collaboration and response_agent_name != \"AgentHub\":\n            try:\n                collaboration_occurred, hiring_results, collaboration_context = execute_collaboration(\n                    agent_name=response_agent_name,\n                    user_message=message,\n                    auto_hire=True\n                )\n                \n                if collaboration_occurred and hiring_results:\n                    collaboration_summary = get_collaboration_summary(hiring_results)\n                    \n                    for result in hiring_results:\n                        DecisionLogModel.create(\n                            agent_name=response_agent_name,\n                            action=f\"Hired Sokosumi agent: {result.get('agent_name')}\",\n                            details=json.dumps({\n                                \"hired_agent\": result.get(\"agent_name\"),\n                                \"task\": result.get(\"task_description\"),\n                                \"cost_usd\": result.get(\"cost\", 0),\n                                \"job_id\": result.get(\"job_id\"),\n                                \"is_simulated\": False\n                            }),\n                            agent_id=selected_agent[\"id\"] if selected_agent else None,\n                            conversation_id=conversation_id,\n                            status=\"confirmed\"\n                        )\n                        \n                        TransactionModel.create(\n                            from_agent_name=response_agent_name,\n                            to_agent_name=result.get(\"agent_name\"),\n                            from_agent_id=selected_agent[\"id\"] if selected_agent else None,\n                            to_agent_id=None,\n                            status=\"confirmed\"\n                        )\n            except Exception as collab_error:\n                print(f\"Collaboration error (non-fatal): {collab_error}\")\n                collaboration_context = \"\"\n\n        conversation_history = MessageModel.get_by_conversation(conversation_id)\n        formatted_history = [\n            {\"role\": m[\"sender\"] if m[\"sender\"] == \"user\" else \"assistant\", \"content\": m[\"content\"]}\n            for m in conversation_history[-10:]\n        ]\n\n        response_content = get_agent_response(\n            agent_name=response_agent_name,\n            system_prompt=agent_system_prompt,\n            user_message=message,\n            conversation_history=formatted_history,\n            collaboration_context=collaboration_context if collaboration_context else None\n        )\n\n        agent_message = MessageModel.create(\n            conversation_id=conversation_id,\n            sender=\"agent\",\n            content=response_content,\n            agent_id=selected_agent[\"id\"] if selected_agent else None,\n            agent_name=response_agent_name\n        )\n\n        if selected_agent:\n            AgentModel.increment_uses(selected_agent[\"id\"])\n\n        DecisionLogModel.create(\n            agent_name=response_agent_name,\n            action=f\"Processed user request via LangGraph agent\" + (\" with Sokosumi collaboration\" if collaboration_occurred else \"\"),\n            details=json.dumps({\n                \"user_message\": message[:100],\n                \"agent\": response_agent_name,\n                \"response_preview\": response_content[:200],\n                \"collaboration\": collaboration_summary if collaboration_occurred else None\n            }),\n            agent_id=selected_agent[\"id\"] if selected_agent else None,\n            conversation_id=conversation_id,\n            status=\"confirmed\"\n        )\n\n        TransactionModel.create(\n            from_agent_name=\"User\",\n            to_agent_name=response_agent_name,\n            from_agent_id=None,\n            to_agent_id=selected_agent[\"id\"] if selected_agent else None,\n            status=\"confirmed\"\n        )\n\n        blockchain_activities = generate_blockchain_activities(\n            agent_name=response_agent_name,\n            user_message=message,\n            include_collaboration=collaboration_occurred\n        )\n        \n        if collaboration_occurred and hiring_results:\n            for result in hiring_results:\n                blockchain_activities.append({\n                    \"type\": \"sokosumi_hire\",\n                    \"title\": f\"Hired {result.get('agent_name')}\",\n                    \"description\": f\"Task: {result.get('task_description', 'Specialized assistance')[:50]}...\",\n                    \"status\": \"confirmed\",\n                    \"timestamp\": datetime.now().isoformat(),\n                    \"details\": {\n                        \"agent_id\": result.get(\"agent_id\"),\n                        \"job_id\": result.get(\"job_id\"),\n                        \"cost_usd\": result.get(\"cost\", 0),\n                        \"payment_method\": \"Hydra L2\",\n                        \"is_simulated\": False\n                    }\n                })\n        \n        agent_masumi_profile = get_agent_masumi_profile(response_agent_name)\n\n        return jsonify({\n            \"userMessage\": serialize_record(user_message),\n            \"agentMessage\": serialize_record(agent_message),\n            \"selectedAgent\": response_agent_name,\n            \"blockchainActivities\": blockchain_activities,\n            \"agentProfile\": agent_masumi_profile,\n            \"isSimulationMode\": False,\n            \"collaboration\": collaboration_summary\n        })\n    except Exception as e:\n        print(f\"Error in chat: {e}\")\n        import traceback\n        traceback.print_exc()\n        return jsonify({\"error\": f\"Failed to process chat message: {str(e)}\"}), 500\n\n# Blockchain Integration Endpoints\n\n@app.route('/api/blockchain/status', methods=['GET'])\ndef get_blockchain_status():\n    \"\"\"Get status of all blockchain integrations\"\"\"\n    try:\n        return jsonify({\n            \"cardano\": {\n                \"is_live\": cardano_service.is_live(),\n                \"network\": cardano_service.network,\n                \"requires\": \"BLOCKFROST_API_KEY\"\n            },\n            \"masumi\": {\n                \"is_live\": masumi_service.is_live(),\n                \"network_url\": masumi_service.network_url,\n                \"requires\": \"MASUMI_API_KEY\"\n            },\n            \"hydra\": {\n                \"is_live\": hydra_service.is_live(),\n                \"node_url\": hydra_service.hydra_node_url,\n                \"requires\": \"HYDRA_NODE_URL or HYDRA_API_KEY\"\n            }\n        })\n    except Exception as e:\n        print(f\"Error getting blockchain status: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/cardano/status', methods=['GET'])\ndef get_cardano_status():\n    \"\"\"Get Cardano network status\"\"\"\n    try:\n        network_info = cardano_service.get_network_info()\n        latest_block = cardano_service.get_latest_block()\n        return jsonify({\n            \"network\": network_info,\n            \"latest_block\": latest_block\n        })\n    except Exception as e:\n        print(f\"Error getting Cardano status: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/cardano/register-agent', methods=['POST'])\ndef register_agent_on_cardano():\n    \"\"\"Register an agent on Cardano blockchain with DID\"\"\"\n    try:\n        data = request.get_json()\n        agent_id = data.get(\"agentId\")\n        agent_name = data.get(\"agentName\")\n        metadata = data.get(\"metadata\", {})\n\n        result = cardano_service.register_agent_did(agent_id, agent_name, metadata)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error registering agent: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/cardano/verify', methods=['POST'])\ndef verify_agent_on_cardano():\n    \"\"\"Verify an agent's credentials on Cardano\"\"\"\n    try:\n        data = request.get_json()\n        did = data.get(\"did\")\n        \n        result = cardano_service.verify_agent_credentials(did)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error verifying agent: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/cardano/log-decision', methods=['POST'])\ndef log_decision_on_cardano():\n    \"\"\"Log a decision on Cardano blockchain\"\"\"\n    try:\n        data = request.get_json()\n        agent_id = data.get(\"agentId\")\n        decision = data.get(\"decision\")\n        details = data.get(\"details\", {})\n        \n        result = cardano_service.log_decision_on_chain(agent_id, decision, details)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error logging decision: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/cardano/settle-payment', methods=['POST'])\ndef settle_payment_on_cardano():\n    \"\"\"Settle a payment on Cardano L1\"\"\"\n    try:\n        data = request.get_json()\n        from_agent = data.get(\"fromAgent\")\n        to_agent = data.get(\"toAgent\")\n        amount = float(data.get(\"amount\", 0))\n        \n        result = cardano_service.settle_payment(from_agent, to_agent, amount)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error settling payment: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/cardano/wallet/<address>', methods=['GET'])\ndef get_cardano_wallet(address):\n    \"\"\"Get wallet balance on Cardano\"\"\"\n    try:\n        result = cardano_service.get_wallet_balance(address)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error getting wallet: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/cardano/transaction/<tx_hash>', methods=['GET'])\ndef get_cardano_transaction(tx_hash):\n    \"\"\"Get transaction details from Cardano\"\"\"\n    try:\n        result = cardano_service.get_transaction(tx_hash)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error getting transaction: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/masumi/status', methods=['GET'])\ndef get_masumi_status():\n    \"\"\"Get Masumi Network status\"\"\"\n    try:\n        result = masumi_service.get_network_status()\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error getting Masumi status: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/masumi/register', methods=['POST'])\ndef register_agent_on_masumi():\n    \"\"\"Register an agent on Masumi Network\"\"\"\n    try:\n        data = request.get_json()\n        agent_id = data.get(\"agentId\")\n        name = data.get(\"name\")\n        domain = data.get(\"domain\")\n        services = data.get(\"services\", [])\n        metadata = data.get(\"metadata\", {})\n        \n        result = masumi_service.register_agent(agent_id, name, domain, services, metadata)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error registering on Masumi: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/masumi/discover', methods=['GET'])\ndef discover_agents_masumi():\n    \"\"\"Discover agents on Masumi Network\"\"\"\n    try:\n        domain = request.args.get(\"domain\")\n        service = request.args.get(\"service\")\n        min_reputation = float(request.args.get(\"minReputation\", 0.0))\n\n        result = masumi_service.discover_agents(domain, service, min_reputation)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error discovering agents: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/masumi/agent/<did>', methods=['GET'])\ndef get_masumi_agent(did):\n    \"\"\"Get agent profile from Masumi Network\"\"\"\n    try:\n        result = masumi_service.get_agent_profile(did)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error getting agent: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/masumi/reputation', methods=['POST'])\ndef update_masumi_reputation():\n    \"\"\"Update agent reputation on Masumi\"\"\"\n    try:\n        data = request.get_json()\n        agent_did = data.get(\"agentDid\")\n        transaction_success = data.get(\"transactionSuccess\", True)\n        response_time = int(data.get(\"responseTime\", 1000))\n        \n        result = masumi_service.update_reputation(agent_did, transaction_success, response_time)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error updating reputation: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/masumi/agreement', methods=['POST'])\ndef create_masumi_agreement():\n    \"\"\"Create service agreement on Masumi\"\"\"\n    try:\n        data = request.get_json()\n        provider_did = data.get(\"providerDid\")\n        consumer_did = data.get(\"consumerDid\")\n        service_type = data.get(\"serviceType\")\n        terms = data.get(\"terms\", {})\n        \n        result = masumi_service.create_service_agreement(provider_did, consumer_did, service_type, terms)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error creating agreement: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/hydra/status', methods=['GET'])\ndef get_hydra_status():\n    \"\"\"Get Hydra node status\"\"\"\n    try:\n        result = hydra_service.get_node_status()\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error getting Hydra status: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/hydra/open-channel', methods=['POST'])\ndef open_hydra_channel():\n    \"\"\"Open a Hydra payment channel between agents\"\"\"\n    try:\n        data = request.get_json()\n        result = hydra_service.open_channel(\n            participant_a=data.get(\"participantA\"),\n            participant_b=data.get(\"participantB\"),\n            initial_balance_a=float(data.get(\"balanceA\", 100.0)),\n            initial_balance_b=float(data.get(\"balanceB\", 100.0))\n        )\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error opening channel: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/hydra/payment', methods=['POST'])\ndef send_hydra_payment():\n    \"\"\"Send instant micropayment through Hydra\"\"\"\n    try:\n        data = request.get_json()\n        result = hydra_service.send_payment(\n            channel_id=data.get(\"channelId\"),\n            from_agent=data.get(\"from\"),\n            to_agent=data.get(\"to\"),\n            amount=float(data.get(\"amount\", 0.004))\n        )\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error sending payment: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/hydra/close-channel', methods=['POST'])\ndef close_hydra_channel():\n    \"\"\"Close a Hydra channel and settle on L1\"\"\"\n    try:\n        data = request.get_json()\n        channel_id = data.get(\"channelId\")\n        \n        result = hydra_service.close_channel(channel_id)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error closing channel: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/hydra/channel/<channel_id>', methods=['GET'])\ndef get_hydra_channel(channel_id):\n    \"\"\"Get Hydra channel status\"\"\"\n    try:\n        result = hydra_service.get_channel_status(channel_id)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error getting channel: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/hydra/transactions', methods=['GET'])\ndef get_hydra_transactions():\n    \"\"\"Get Hydra transaction history\"\"\"\n    try:\n        channel_id = request.args.get(\"channelId\")\n        limit = int(request.args.get(\"limit\", 20))\n        \n        result = hydra_service.get_transaction_history(channel_id, limit)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error getting transactions: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/hydra/estimate-fees', methods=['GET'])\ndef estimate_hydra_fees():\n    \"\"\"Estimate Hydra transaction fees\"\"\"\n    try:\n        num_transactions = int(request.args.get(\"numTransactions\", 100))\n        \n        result = hydra_service.estimate_fees(num_transactions)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error estimating fees: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/transactions', methods=['GET'])\ndef get_transactions():\n    \"\"\"Get recent transactions.\"\"\"\n    try:\n        limit = request.args.get(\"limit\", 20, type=int)\n        transactions = TransactionModel.get_all(limit=limit)\n        return jsonify([serialize_record(t) for t in transactions])\n    except Exception as e:\n        print(f\"Error fetching transactions: {e}\")\n        return jsonify({\"error\": \"Failed to fetch transactions\"}), 500\n\n@app.route('/api/decision-logs', methods=['GET'])\ndef get_decision_logs():\n    \"\"\"Get recent decision logs.\"\"\"\n    try:\n        limit = request.args.get(\"limit\", 20, type=int)\n        logs = DecisionLogModel.get_all(limit=limit)\n        return jsonify([serialize_record(l) for l in logs])\n    except Exception as e:\n        print(f\"Error fetching decision logs: {e}\")\n        return jsonify({\"error\": \"Failed to fetch decision logs\"}), 500\n\n@app.route('/api/metrics', methods=['GET'])\ndef get_metrics():\n    \"\"\"Get platform metrics.\"\"\"\n    try:\n        agents = AgentModel.get_all()\n        transactions = TransactionModel.get_all(limit=1000)\n\n        total_uses_served = sum(a[\"uses_served\"] for a in agents)\n        total_transactions = len(transactions)\n        total_cost = total_transactions * 0.004\n\n        return jsonify({\n            \"systemLayers\": 7,\n            \"specializedAgents\": len(agents),\n            \"agentDomains\": 4,\n            \"throughput\": \"1000+ TPS\",\n            \"costPerService\": \"~$0.004\",\n            \"platformFee\": \"10%\",\n            \"onChain\": \"100%\",\n            \"totalUsesServed\": total_uses_served,\n            \"totalTransactions\": total_transactions,\n            \"totalCost\": f\"${total_cost:.3f}\"\n        })\n    except Exception as e:\n        print(f\"Error fetching metrics: {e}\")\n        return jsonify({\"error\": \"Failed to fetch metrics\"}), 500\n\n@app.route('/api/blockchain/network-status', methods=['GET'])\ndef get_full_network_status():\n    \"\"\"Get comprehensive status of all blockchain networks\"\"\"\n    try:\n        return jsonify(generate_network_status())\n    except Exception as e:\n        print(f\"Error getting network status: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/agent-profiles', methods=['GET'])\ndef get_agent_blockchain_profiles():\n    \"\"\"Get Masumi Network profiles for all agents\"\"\"\n    try:\n        profiles = get_all_agent_profiles()\n        return jsonify({\n            \"agents\": profiles,\n            \"total\": len(profiles),\n            \"is_simulation_mode\": is_simulation_mode()\n        })\n    except Exception as e:\n        print(f\"Error getting agent profiles: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/blockchain/agent-profiles/<agent_name>', methods=['GET'])\ndef get_single_agent_profile(agent_name):\n    \"\"\"Get Masumi Network profile for a specific agent\"\"\"\n    try:\n        profile = get_agent_masumi_profile(agent_name)\n        return jsonify(profile)\n    except Exception as e:\n        print(f\"Error getting agent profile: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/sokosumi/agents', methods=['GET'])\ndef get_sokosumi_agents():\n    \"\"\"Get available agents from Sokosumi marketplace\"\"\"\n    try:\n        category = request.args.get(\"category\")\n        limit = int(request.args.get(\"limit\", 10))\n        result = sokosumi_service.list_agents(category=category, limit=limit)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error fetching Sokosumi agents: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/sokosumi/agents/<agent_id>', methods=['GET'])\ndef get_sokosumi_agent(agent_id):\n    \"\"\"Get details of a specific Sokosumi agent\"\"\"\n    try:\n        result = sokosumi_service.get_agent(agent_id)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error fetching Sokosumi agent: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/sokosumi/hire', methods=['POST'])\ndef hire_sokosumi_agent():\n    \"\"\"Hire a Sokosumi agent for a task\"\"\"\n    try:\n        data = request.get_json()\n        agent_id = data.get(\"agentId\")\n        task = data.get(\"task\")\n        requester = data.get(\"requesterAgent\")\n        \n        if not agent_id or not task:\n            return jsonify({\"error\": \"agentId and task are required\"}), 400\n        \n        result = sokosumi_service.hire_agent(agent_id, task, requester)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error hiring Sokosumi agent: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/sokosumi/jobs', methods=['GET'])\ndef get_sokosumi_jobs():\n    \"\"\"Get all active Sokosumi jobs\"\"\"\n    try:\n        result = sokosumi_service.list_active_jobs()\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error fetching Sokosumi jobs: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/sokosumi/jobs/<job_id>', methods=['GET'])\ndef get_sokosumi_job(job_id):\n    \"\"\"Get status of a specific Sokosumi job\"\"\"\n    try:\n        result = sokosumi_service.get_job_status(job_id)\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error fetching Sokosumi job: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/sokosumi/account', methods=['GET'])\ndef get_sokosumi_account():\n    \"\"\"Get Sokosumi account information\"\"\"\n    try:\n        result = sokosumi_service.get_account_info()\n        return jsonify(result)\n    except Exception as e:\n        print(f\"Error fetching Sokosumi account: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\n@app.route('/api/sokosumi/status', methods=['GET'])\ndef get_sokosumi_status():\n    \"\"\"Get Sokosumi service status\"\"\"\n    try:\n        return jsonify({\n            \"is_live\": sokosumi_service.is_live(),\n            \"api_url\": sokosumi_service.SOKOSUMI_API_URL,\n            \"has_api_key\": bool(sokosumi_service.SOKOSUMI_API_KEY)\n        })\n    except Exception as e:\n        print(f\"Error getting Sokosumi status: {e}\")\n        return jsonify({\"error\": str(e)}), 500\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=5001, debug=False)","path":null,"size_bytes":28792,"size_tokens":null},"client/src/pages/logs.tsx":{"content":"import DecisionLog from \"@/components/decision-log\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Zap, ArrowRight, CheckCircle2 } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport type { Transaction } from \"@shared/schema\";\n\nexport default function Logs() {\n  const { data: transactions, isLoading } = useQuery<Transaction[]>({\n    queryKey: [\"/api/transactions\"],\n    refetchInterval: 5000,\n  });\n\n  const formatTimestamp = (date: Date | string) => {\n    const d = new Date(date);\n    return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-4xl font-bold mb-2\">Audit Trail</h1>\n        <p className=\"text-muted-foreground\">\n          Complete on-chain logging of all agent decisions and micropayments\n        </p>\n      </div>\n\n      <div className=\"grid lg:grid-cols-2 gap-8\">\n        <DecisionLog />\n\n        <Card data-testid=\"card-transaction-history\">\n          <CardHeader>\n            <CardTitle>Transaction History</CardTitle>\n            <CardDescription>\n              Hydra Layer 2 micropayments between agents\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"space-y-3\">\n                {[...Array(4)].map((_, i) => (\n                  <Skeleton key={i} className=\"h-20 w-full\" />\n                ))}\n              </div>\n            ) : transactions && transactions.length > 0 ? (\n              <div className=\"space-y-3\">\n                {transactions.map((tx) => (\n                  <Card key={tx.id} className=\"p-4\" data-testid={`transaction-${tx.id}`}>\n                    <div className=\"flex items-center justify-between gap-4\">\n                      <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                        <div className=\"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 shadow-md shrink-0\">\n                          <Zap className=\"h-5 w-5 text-white\" />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <span className=\"font-medium truncate\">{tx.fromAgentName}</span>\n                            <ArrowRight className=\"h-3 w-3 shrink-0 text-muted-foreground\" />\n                            <span className=\"font-medium truncate\">{tx.toAgentName}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2 text-xs text-muted-foreground mt-1\">\n                            <span className=\"font-mono\">{formatTimestamp(tx.createdAt)}</span>\n                            <span>|</span>\n                            <span className=\"font-mono truncate\">{tx.txHash}</span>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-3 shrink-0\">\n                        <div className=\"text-right\">\n                          <p className=\"font-mono font-semibold\">${tx.amount}</p>\n                          <p className=\"text-xs text-muted-foreground\">Hydra L2</p>\n                        </div>\n                        <Badge variant={tx.status === \"confirmed\" ? \"default\" : \"secondary\"}>\n                          {tx.status === \"confirmed\" && <CheckCircle2 className=\"h-3 w-3 mr-1\" />}\n                          {tx.status}\n                        </Badge>\n                      </div>\n                    </div>\n                  </Card>\n                ))}\n              </div>\n            ) : (\n              <p className=\"text-muted-foreground text-center py-8\">\n                No transactions yet. Start chatting with agents to generate transactions.\n              </p>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card data-testid=\"card-transparency-features\">\n        <CardHeader>\n          <CardTitle>Transparency Features</CardTitle>\n          <CardDescription>How AgentHub ensures complete visibility</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid md:grid-cols-3 gap-6\">\n            <div>\n              <h3 className=\"font-semibold mb-2\">Verified DIDs</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Masumi DIDs ensure trusted agent identities with cryptographic verification\n              </p>\n            </div>\n            <div>\n              <h3 className=\"font-semibold mb-2\">Micropayments</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Hydra enables ~$0.004 per transaction with instant settlement\n              </p>\n            </div>\n            <div>\n              <h3 className=\"font-semibold mb-2\">Audit Trails</h3>\n              <p className=\"text-sm text-muted-foreground\">\n                Every decision recorded on Cardano for complete transparency\n              </p>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":5312,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":21846,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 0 0% 9%;\n  --border: 0 0% 91%;\n  --card: 0 0% 98%;\n  --card-foreground: 0 0% 9%;\n  --card-border: 0 0% 94%;\n  --sidebar: 0 0% 96%;\n  --sidebar-foreground: 0 0% 9%;\n  --sidebar-border: 0 0% 92%;\n  --sidebar-primary: 158 64% 38%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 158 20% 92%;\n  --sidebar-accent-foreground: 158 40% 20%;\n  --sidebar-ring: 158 64% 38%;\n  --popover: 0 0% 95%;\n  --popover-foreground: 0 0% 9%;\n  --popover-border: 0 0% 90%;\n  --primary: 158 64% 38%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 158 15% 92%;\n  --secondary-foreground: 158 30% 20%;\n  --muted: 210 10% 93%;\n  --muted-foreground: 210 10% 40%;\n  --accent: 158 30% 90%;\n  --accent-foreground: 158 50% 22%;\n  --destructive: 0 72% 51%;\n  --destructive-foreground: 0 72% 98%;\n  --input: 0 0% 75%;\n  --ring: 158 64% 38%;\n  --chart-1: 158 60% 40%;\n  --chart-2: 165 55% 42%;\n  --chart-3: 150 50% 38%;\n  --chart-4: 170 45% 40%;\n  --chart-5: 155 55% 36%;\n  --font-sans: Inter, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: JetBrains Mono, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.05);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.08);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.10);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.12);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.15);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 220 15% 6%;\n  --foreground: 0 0% 95%;\n  --border: 220 10% 18%;\n  --card: 220 15% 9%;\n  --card-foreground: 0 0% 95%;\n  --card-border: 220 10% 15%;\n  --sidebar: 220 15% 8%;\n  --sidebar-foreground: 0 0% 95%;\n  --sidebar-border: 220 10% 15%;\n  --sidebar-primary: 158 60% 40%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 220 15% 16%;\n  --sidebar-accent-foreground: 0 0% 90%;\n  --sidebar-ring: 158 60% 40%;\n  --popover: 220 15% 10%;\n  --popover-foreground: 0 0% 95%;\n  --popover-border: 220 10% 18%;\n  --primary: 158 60% 40%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 220 15% 18%;\n  --secondary-foreground: 0 0% 90%;\n  --muted: 220 15% 15%;\n  --muted-foreground: 220 10% 60%;\n  --accent: 158 50% 35%;\n  --accent-foreground: 0 0% 100%;\n  --destructive: 0 72% 48%;\n  --destructive-foreground: 0 72% 98%;\n  --input: 220 15% 20%;\n  --ring: 158 60% 40%;\n  --chart-1: 158 55% 42%;\n  --chart-2: 165 50% 45%;\n  --chart-3: 150 45% 40%;\n  --chart-4: 170 40% 42%;\n  --chart-5: 155 50% 38%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.05);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.08);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.10);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.12);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.15);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n\n}\n","path":null,"size_bytes":10608,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"client/src/components/agent-card.tsx":{"content":"import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { CheckCircle2, LucideIcon } from \"lucide-react\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\n\ninterface AgentCardProps {\n  name: string;\n  description: string;\n  domain: string;\n  icon: LucideIcon;\n  usesServed: number;\n  avgResponse: string;\n  isVerified?: boolean;\n  onDeploy?: () => void;\n}\n\nexport default function AgentCard({\n  name,\n  description,\n  domain,\n  icon: Icon,\n  usesServed,\n  avgResponse,\n  isVerified = true,\n  onDeploy,\n}: AgentCardProps) {\n  return (\n    <Card className=\"hover-elevate\" data-testid={`card-agent-${name.toLowerCase().replace(/\\s+/g, '-')}`}>\n      <CardHeader className=\"gap-1\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <Avatar className=\"h-12 w-12 rounded-lg shadow-md\">\n            <AvatarFallback className=\"rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600\">\n              <Icon className=\"h-6 w-6 text-white\" />\n            </AvatarFallback>\n          </Avatar>\n          <Badge variant=\"secondary\" className=\"text-xs\" data-testid={`badge-domain-${domain.toLowerCase().replace(/\\s+/g, '-')}`}>\n            {domain}\n          </Badge>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <CardTitle className=\"text-xl\">{name}</CardTitle>\n          {isVerified && (\n            <CheckCircle2 className=\"h-5 w-5 text-primary\" data-testid=\"icon-verified\" />\n          )}\n        </div>\n        <CardDescription>{description}</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n          <div>\n            <p className=\"text-muted-foreground\">Uses Served</p>\n            <p className=\"font-mono font-semibold\" data-testid=\"text-uses-served\">{usesServed.toLocaleString()}</p>\n          </div>\n          <div>\n            <p className=\"text-muted-foreground\">Avg Response</p>\n            <p className=\"font-mono font-semibold\" data-testid=\"text-avg-response\">{avgResponse}</p>\n          </div>\n        </div>\n      </CardContent>\n      <CardFooter>\n        <Button \n          className=\"w-full\" \n          onClick={onDeploy}\n          data-testid={`button-deploy-${name.toLowerCase().replace(/\\s+/g, '-')}`}\n        >\n          Deploy Agent\n        </Button>\n      </CardFooter>\n    </Card>\n  );\n}\n","path":null,"size_bytes":2495,"size_tokens":null},"client/src/components/examples/metrics-grid.tsx":{"content":"import MetricsGrid from \"../metrics-grid\";\n\nexport default function MetricsGridExample() {\n  return (\n    <div className=\"p-6\">\n      <MetricsGrid />\n    </div>\n  );\n}\n","path":null,"size_bytes":168,"size_tokens":null},"python_backend/models.py":{"content":"import os\nimport psycopg2\nfrom psycopg2.extras import RealDictCursor\nfrom datetime import datetime\nimport uuid\n\nDATABASE_URL = os.environ.get(\"DATABASE_URL\")\n\ndef get_db_connection():\n    return psycopg2.connect(DATABASE_URL, cursor_factory=RealDictCursor)\n\ndef init_db():\n    conn = get_db_connection()\n    cur = conn.cursor()\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS agents (\n            id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,\n            name TEXT NOT NULL UNIQUE,\n            description TEXT NOT NULL,\n            domain TEXT NOT NULL,\n            icon TEXT NOT NULL,\n            system_prompt TEXT NOT NULL,\n            uses_served INTEGER NOT NULL DEFAULT 0,\n            avg_response_ms INTEGER NOT NULL DEFAULT 1000,\n            is_verified BOOLEAN NOT NULL DEFAULT true,\n            status TEXT NOT NULL DEFAULT 'online',\n            created_at TIMESTAMP NOT NULL DEFAULT NOW()\n        )\n    \"\"\")\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS conversations (\n            id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,\n            user_id VARCHAR,\n            title TEXT NOT NULL DEFAULT 'New Conversation',\n            created_at TIMESTAMP NOT NULL DEFAULT NOW(),\n            updated_at TIMESTAMP NOT NULL DEFAULT NOW()\n        )\n    \"\"\")\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS messages (\n            id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,\n            conversation_id VARCHAR NOT NULL REFERENCES conversations(id),\n            sender TEXT NOT NULL,\n            agent_id VARCHAR REFERENCES agents(id),\n            agent_name TEXT,\n            content TEXT NOT NULL,\n            created_at TIMESTAMP NOT NULL DEFAULT NOW()\n        )\n    \"\"\")\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS transactions (\n            id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,\n            from_agent_id VARCHAR REFERENCES agents(id),\n            to_agent_id VARCHAR REFERENCES agents(id),\n            from_agent_name TEXT NOT NULL,\n            to_agent_name TEXT NOT NULL,\n            amount DECIMAL(10, 6) NOT NULL DEFAULT 0.004,\n            tx_hash TEXT NOT NULL,\n            status TEXT NOT NULL DEFAULT 'pending',\n            layer TEXT NOT NULL DEFAULT 'hydra',\n            created_at TIMESTAMP NOT NULL DEFAULT NOW()\n        )\n    \"\"\")\n    \n    cur.execute(\"\"\"\n        CREATE TABLE IF NOT EXISTS decision_logs (\n            id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,\n            agent_id VARCHAR REFERENCES agents(id),\n            agent_name TEXT NOT NULL,\n            action TEXT NOT NULL,\n            details TEXT,\n            tx_hash TEXT NOT NULL,\n            status TEXT NOT NULL DEFAULT 'pending',\n            conversation_id VARCHAR REFERENCES conversations(id),\n            created_at TIMESTAMP NOT NULL DEFAULT NOW()\n        )\n    \"\"\")\n    \n    conn.commit()\n    cur.close()\n    conn.close()\n\ndef generate_tx_hash():\n    chars = \"0123456789abcdef\"\n    hash_val = \"0x\"\n    for _ in range(64):\n        hash_val += chars[int(uuid.uuid4().hex[0], 16) % 16]\n    return hash_val\n\ndef truncate_tx_hash(hash_val):\n    return f\"{hash_val[:10]}...{hash_val[-6:]}\"\n\n\nclass AgentModel:\n    @staticmethod\n    def get_all():\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM agents ORDER BY name\")\n        agents = cur.fetchall()\n        cur.close()\n        conn.close()\n        return [dict(a) for a in agents]\n    \n    @staticmethod\n    def get_by_id(agent_id):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM agents WHERE id = %s\", (agent_id,))\n        agent = cur.fetchone()\n        cur.close()\n        conn.close()\n        return dict(agent) if agent else None\n    \n    @staticmethod\n    def get_by_name(name):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM agents WHERE name = %s\", (name,))\n        agent = cur.fetchone()\n        cur.close()\n        conn.close()\n        return dict(agent) if agent else None\n    \n    @staticmethod\n    def create(agent_data):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        agent_id = str(uuid.uuid4())\n        cur.execute(\"\"\"\n            INSERT INTO agents (id, name, description, domain, icon, system_prompt, uses_served, avg_response_ms, is_verified, status)\n            VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s)\n            RETURNING *\n        \"\"\", (\n            agent_id,\n            agent_data['name'],\n            agent_data['description'],\n            agent_data['domain'],\n            agent_data['icon'],\n            agent_data['system_prompt'],\n            agent_data.get('uses_served', 0),\n            agent_data.get('avg_response_ms', 1000),\n            agent_data.get('is_verified', True),\n            agent_data.get('status', 'online')\n        ))\n        agent = cur.fetchone()\n        conn.commit()\n        cur.close()\n        conn.close()\n        return dict(agent)\n    \n    @staticmethod\n    def increment_uses(agent_id):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"UPDATE agents SET uses_served = uses_served + 1 WHERE id = %s\", (agent_id,))\n        conn.commit()\n        cur.close()\n        conn.close()\n    \n    @staticmethod\n    def count():\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT COUNT(*) as count FROM agents\")\n        result = cur.fetchone()\n        cur.close()\n        conn.close()\n        return result['count']\n\n\nclass ConversationModel:\n    @staticmethod\n    def get_all():\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM conversations ORDER BY updated_at DESC\")\n        conversations = cur.fetchall()\n        cur.close()\n        conn.close()\n        return [dict(c) for c in conversations]\n    \n    @staticmethod\n    def get_by_id(conversation_id):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"SELECT * FROM conversations WHERE id = %s\", (conversation_id,))\n        conversation = cur.fetchone()\n        cur.close()\n        conn.close()\n        return dict(conversation) if conversation else None\n    \n    @staticmethod\n    def create(title=\"New Conversation\", user_id=None):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        conversation_id = str(uuid.uuid4())\n        cur.execute(\"\"\"\n            INSERT INTO conversations (id, title, user_id)\n            VALUES (%s, %s, %s)\n            RETURNING *\n        \"\"\", (conversation_id, title, user_id))\n        conversation = cur.fetchone()\n        conn.commit()\n        cur.close()\n        conn.close()\n        return dict(conversation)\n\n\nclass MessageModel:\n    @staticmethod\n    def get_by_conversation(conversation_id):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"\"\"\n            SELECT * FROM messages \n            WHERE conversation_id = %s \n            ORDER BY created_at ASC\n        \"\"\", (conversation_id,))\n        messages = cur.fetchall()\n        cur.close()\n        conn.close()\n        return [dict(m) for m in messages]\n    \n    @staticmethod\n    def create(conversation_id, sender, content, agent_id=None, agent_name=None):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        message_id = str(uuid.uuid4())\n        cur.execute(\"\"\"\n            INSERT INTO messages (id, conversation_id, sender, content, agent_id, agent_name)\n            VALUES (%s, %s, %s, %s, %s, %s)\n            RETURNING *\n        \"\"\", (message_id, conversation_id, sender, content, agent_id, agent_name))\n        message = cur.fetchone()\n        conn.commit()\n        cur.close()\n        conn.close()\n        return dict(message)\n\n\nclass TransactionModel:\n    @staticmethod\n    def get_all(limit=20):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"\"\"\n            SELECT * FROM transactions \n            ORDER BY created_at DESC \n            LIMIT %s\n        \"\"\", (limit,))\n        transactions = cur.fetchall()\n        cur.close()\n        conn.close()\n        return [dict(t) for t in transactions]\n    \n    @staticmethod\n    def create(from_agent_name, to_agent_name, amount=\"0.004\", from_agent_id=None, to_agent_id=None, status=\"pending\"):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        tx_id = str(uuid.uuid4())\n        tx_hash = truncate_tx_hash(generate_tx_hash())\n        cur.execute(\"\"\"\n            INSERT INTO transactions (id, from_agent_id, to_agent_id, from_agent_name, to_agent_name, amount, tx_hash, status)\n            VALUES (%s, %s, %s, %s, %s, %s, %s, %s)\n            RETURNING *\n        \"\"\", (tx_id, from_agent_id, to_agent_id, from_agent_name, to_agent_name, amount, tx_hash, status))\n        transaction = cur.fetchone()\n        conn.commit()\n        cur.close()\n        conn.close()\n        return dict(transaction)\n    \n    @staticmethod\n    def update_status(tx_id, status):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"UPDATE transactions SET status = %s WHERE id = %s\", (status, tx_id))\n        conn.commit()\n        cur.close()\n        conn.close()\n\n\nclass DecisionLogModel:\n    @staticmethod\n    def get_all(limit=20):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"\"\"\n            SELECT * FROM decision_logs \n            ORDER BY created_at DESC \n            LIMIT %s\n        \"\"\", (limit,))\n        logs = cur.fetchall()\n        cur.close()\n        conn.close()\n        return [dict(l) for l in logs]\n    \n    @staticmethod\n    def create(agent_name, action, details=None, agent_id=None, conversation_id=None, status=\"pending\"):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        log_id = str(uuid.uuid4())\n        tx_hash = truncate_tx_hash(generate_tx_hash())\n        cur.execute(\"\"\"\n            INSERT INTO decision_logs (id, agent_id, agent_name, action, details, tx_hash, status, conversation_id)\n            VALUES (%s, %s, %s, %s, %s, %s, %s, %s)\n            RETURNING *\n        \"\"\", (log_id, agent_id, agent_name, action, details, tx_hash, status, conversation_id))\n        log = cur.fetchone()\n        conn.commit()\n        cur.close()\n        conn.close()\n        return dict(log)\n    \n    @staticmethod\n    def update_status(log_id, status):\n        conn = get_db_connection()\n        cur = conn.cursor()\n        cur.execute(\"UPDATE decision_logs SET status = %s WHERE id = %s\", (status, log_id))\n        conn.commit()\n        cur.close()\n        conn.close()\n","path":null,"size_bytes":10622,"size_tokens":null},"server/db.ts":{"content":"import { drizzle } from \"drizzle-orm/neon-serverless\";\nimport { Pool, neonConfig } from \"@neondatabase/serverless\";\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL must be set. Did you forget to provision a database?\");\n}\n\nconst pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":459,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"server/openai.ts":{"content":"import OpenAI from \"openai\";\n\nconst openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\n\ninterface AgentChatParams {\n  agentName: string;\n  agentSystemPrompt: string;\n  userMessage: string;\n  conversationHistory?: { role: \"user\" | \"assistant\"; content: string }[];\n}\n\nexport async function getAgentResponse(params: AgentChatParams): Promise<string> {\n  const { agentName, agentSystemPrompt, userMessage, conversationHistory = [] } = params;\n\n  const systemMessage = `${agentSystemPrompt}\n\nYou are part of the AgentHub ecosystem on Cardano blockchain. Your responses are logged on-chain for transparency.\n- When you need to collaborate with another agent, mention it in your response\n- All your actions cost approximately $0.004 via Hydra Layer 2 micropayments\n- You have a verified Masumi DID identity\n- Provide helpful, accurate, and actionable responses`;\n\n  const messages: OpenAI.ChatCompletionMessageParam[] = [\n    { role: \"system\", content: systemMessage },\n    ...conversationHistory.map(msg => ({\n      role: msg.role as \"user\" | \"assistant\",\n      content: msg.content,\n    })),\n    { role: \"user\", content: userMessage },\n  ];\n\n  const response = await openai.chat.completions.create({\n    model: \"gpt-4o\",\n    messages,\n    max_tokens: 1024,\n    temperature: 0.7,\n  });\n\n  return response.choices[0]?.message?.content || \"I apologize, but I was unable to generate a response.\";\n}\n\nexport async function getMasterAgentAnalysis(userMessage: string): Promise<{\n  selectedAgents: string[];\n  analysis: string;\n}> {\n  const systemPrompt = `You are the AgentHub Master Agent, responsible for analyzing user requests and determining which specialized agents should handle them.\n\nAvailable agents:\n- SocialGenie: Social media management, content creation\n- MailMind: Email marketing automation\n- ComplianceGuard: AML/KYC monitoring, regulatory compliance\n- InsightBot: Business intelligence, data analytics\n- ShopAssist: E-commerce customer support\n- StyleAdvisor: Product recommendations, styling\n- YieldMaximizer: DeFi yield optimization\n- TradeMind: Autonomous trading, market analysis\n\nAnalyze the user's request and respond with JSON:\n{\n  \"selectedAgents\": [\"agent1\", \"agent2\"],\n  \"analysis\": \"Brief explanation of why these agents were selected\"\n}\n\nIf no specific agent is needed, select \"AgentHub\" as the general assistant.`;\n\n  const response = await openai.chat.completions.create({\n    model: \"gpt-4o\",\n    messages: [\n      { role: \"system\", content: systemPrompt },\n      { role: \"user\", content: userMessage },\n    ],\n    max_tokens: 256,\n    temperature: 0.3,\n    response_format: { type: \"json_object\" },\n  });\n\n  try {\n    const result = JSON.parse(response.choices[0]?.message?.content || \"{}\");\n    return {\n      selectedAgents: result.selectedAgents || [\"AgentHub\"],\n      analysis: result.analysis || \"Processing your request\",\n    };\n  } catch {\n    return {\n      selectedAgents: [\"AgentHub\"],\n      analysis: \"Processing your request\",\n    };\n  }\n}\n","path":null,"size_bytes":2986,"size_tokens":null},"script/build.ts":{"content":"import { build as esbuild } from \"esbuild\";\nimport { build as viteBuild } from \"vite\";\nimport { rm, readFile } from \"fs/promises\";\n\n// server deps to bundle to reduce openat(2) syscalls\n// which helps cold start times\nconst allowlist = [\n  \"@google/generative-ai\",\n  \"@neondatabase/serverless\",\n  \"axios\",\n  \"connect-pg-simple\",\n  \"cors\",\n  \"date-fns\",\n  \"drizzle-orm\",\n  \"drizzle-zod\",\n  \"express\",\n  \"express-rate-limit\",\n  \"express-session\",\n  \"jsonwebtoken\",\n  \"memorystore\",\n  \"multer\",\n  \"nanoid\",\n  \"nodemailer\",\n  \"openai\",\n  \"passport\",\n  \"passport-local\",\n  \"stripe\",\n  \"uuid\",\n  \"ws\",\n  \"xlsx\",\n  \"zod\",\n  \"zod-validation-error\",\n];\n\nasync function buildAll() {\n  await rm(\"dist\", { recursive: true, force: true });\n\n  console.log(\"building client...\");\n  await viteBuild();\n\n  console.log(\"building server...\");\n  const pkg = JSON.parse(await readFile(\"package.json\", \"utf-8\"));\n  const allDeps = [\n    ...Object.keys(pkg.dependencies || {}),\n    ...Object.keys(pkg.devDependencies || {}),\n  ];\n  const externals = allDeps.filter((dep) => !allowlist.includes(dep));\n\n  await esbuild({\n    entryPoints: [\"server/index.ts\"],\n    platform: \"node\",\n    bundle: true,\n    format: \"cjs\",\n    outfile: \"dist/index.cjs\",\n    define: {\n      \"process.env.NODE_ENV\": '\"production\"',\n    },\n    minify: true,\n    external: externals,\n    logLevel: \"info\",\n  });\n}\n\nbuildAll().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n","path":null,"size_bytes":1439,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/components/hero-section.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Sparkles, ArrowRight, Cpu, Zap } from \"lucide-react\";\nimport heroImage from \"@assets/generated_images/emerald_blockchain_network_hero.png\";\n\nexport default function HeroSection() {\n  return (\n    <div className=\"relative h-96 rounded-xl overflow-hidden\" data-testid=\"section-hero\">\n      <div \n        className=\"absolute inset-0 bg-cover bg-center\"\n        style={{ backgroundImage: `url(${heroImage})` }}\n      />\n      <div className=\"absolute inset-0 bg-gradient-to-r from-black/80 via-black/60 to-black/40\" />\n      <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent\" />\n      \n      <div className=\"relative h-full flex flex-col justify-center px-12 text-white z-10\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-lg\">\n            <Sparkles className=\"h-7 w-7 text-white\" />\n          </div>\n          <h1 className=\"text-4xl md:text-5xl font-bold tracking-tight\">AgentHub</h1>\n        </div>\n        <p className=\"text-xl md:text-2xl mb-2 max-w-2xl text-white/90 font-medium\">\n          AI Agent Marketplace on <span className=\"text-emerald-400\">Cardano</span>\n        </p>\n        <p className=\"text-base mb-8 max-w-xl text-white/70\">\n          Eight specialized AI agents with Masumi DIDs, Hydra micropayments, and on-chain decision logging for transparent collaboration.\n        </p>\n        <div className=\"flex gap-4 flex-wrap\">\n          <Button \n            size=\"lg\" \n            className=\"bg-emerald-500 hover:bg-emerald-600 text-white font-semibold shadow-lg border-0\"\n            data-testid=\"button-deploy-first-agent\"\n          >\n            <Cpu className=\"mr-2 h-5 w-5\" />\n            Deploy Your First Agent\n            <ArrowRight className=\"ml-2 h-5 w-5\" />\n          </Button>\n          <Button \n            size=\"lg\" \n            variant=\"outline\"\n            className=\"bg-white/10 backdrop-blur-md border-white/20 text-white hover:bg-white/20\"\n            data-testid=\"button-explore-marketplace\"\n          >\n            <Zap className=\"mr-2 h-5 w-5\" />\n            Explore Marketplace\n          </Button>\n        </div>\n      </div>\n      \n      <div className=\"absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-emerald-500/30 to-transparent\" />\n    </div>\n  );\n}\n","path":null,"size_bytes":2450,"size_tokens":null},"client/src/pages/architecture.tsx":{"content":"import SystemFlow from \"@/components/system-flow\";\nimport BlockchainPanel from \"@/components/blockchain-panel\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\n\nconst techStack = [\n  { layer: \"L1: Security\", tech: \"Cardano (Plutus/Aiken)\", purpose: \"Final settlement, reputation, compliance records\" },\n  { layer: \"L2: Speed\", tech: \"Hydra State Channels\", purpose: \"Off-chain micro-transactions (1000+ TPS, <1s finality)\" },\n  { layer: \"Discovery\", tech: \"Masumi Network\", purpose: \"Agent marketplace, service discovery, reputation system\" },\n  { layer: \"Frontend/Backend\", tech: \"Node.js/Python + GraphQL\", purpose: \"Agent runtime, APIs, data management\" },\n  { layer: \"AI/ML\", tech: \"LangGraph, LangChain\", purpose: \"Intelligence layer for all agent services\" },\n];\n\nexport default function Architecture() {\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-4xl font-bold mb-2\">System Architecture</h1>\n        <p className=\"text-muted-foreground\">\n          Multi-layer architecture powering the AgentHub ecosystem\n        </p>\n      </div>\n\n      <SystemFlow />\n\n      <div>\n        <h2 className=\"text-2xl font-semibold mb-4\">Blockchain Infrastructure</h2>\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          <BlockchainPanel type=\"hydra\" />\n          <BlockchainPanel type=\"cardano\" />\n        </div>\n      </div>\n\n      <div>\n        <h2 className=\"text-2xl font-semibold mb-4\">Technology Stack</h2>\n        <Card data-testid=\"card-tech-stack\">\n          <CardHeader>\n            <CardTitle>Seven-Layer Architecture</CardTitle>\n            <CardDescription>From user interface to blockchain settlement</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {techStack.map((item, index) => (\n                <div\n                  key={item.layer}\n                  className=\"flex gap-4 pb-4 border-b last:border-b-0\"\n                  data-testid={`tech-layer-${index + 1}`}\n                >\n                  <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 text-white text-sm font-bold shadow-md shrink-0\">\n                    {index + 1}\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-semibold text-sm\">{item.layer}</h3>\n                    <p className=\"text-sm text-muted-foreground mt-1\">\n                      <span className=\"font-mono text-xs\">{item.tech}</span>  {item.purpose}\n                    </p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":2770,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"python_backend/masumi_service.py":{"content":"\"\"\"\nMasumi Network Service\nHandles agent discovery, service registry, and reputation management\n\"\"\"\nimport os\nimport json\nimport requests\nfrom datetime import datetime\nfrom typing import Optional, Dict, Any, List\nfrom dataclasses import dataclass, asdict\n\n\n@dataclass\nclass MasumiAgent:\n    \"\"\"Represents an agent registered on Masumi Network\"\"\"\n    did: str\n    name: str\n    domain: str\n    services: List[str]\n    reputation_score: float\n    total_transactions: int\n    average_response_time: int\n    registered_at: str\n    is_verified: bool\n\n\nclass MasumiService:\n    \"\"\"Service for interacting with Masumi Network\"\"\"\n\n    def __init__(self):\n        self.network_url = os.environ.get(\"MASUMI_NETWORK_URL\", \"https://api.masumi.network\")\n        self.api_key = os.environ.get(\"MASUMI_API_KEY\", \"\")\n        self._is_live = bool(self.api_key)\n        self._agent_registry: Dict[str, MasumiAgent] = {}\n\n    def _get_headers(self) -> Dict[str, str]:\n        \"\"\"Get API headers with authentication\"\"\"\n        return {\n            \"Authorization\": f\"Bearer {self.api_key}\",\n            \"Content-Type\": \"application/json\"\n        }\n\n    def _api_request(self, method: str, endpoint: str, data: Optional[Dict] = None) -> Optional[Dict]:\n        \"\"\"Make authenticated request to Masumi API\"\"\"\n        if not self._is_live:\n            return None\n        \n        url = f\"{self.network_url}{endpoint}\"\n        try:\n            if method == \"GET\":\n                response = requests.get(url, headers=self._get_headers(), timeout=30)\n            elif method == \"POST\":\n                response = requests.post(url, headers=self._get_headers(), json=data, timeout=30)\n            elif method == \"PUT\":\n                response = requests.put(url, headers=self._get_headers(), json=data, timeout=30)\n            else:\n                return None\n            \n            if response.status_code in [200, 201]:\n                return response.json()\n            else:\n                print(f\"Masumi API error: {response.status_code} - {response.text}\")\n                return None\n        except Exception as e:\n            print(f\"Masumi API request failed: {e}\")\n            return None\n\n    def is_live(self) -> bool:\n        \"\"\"Check if service is connected to real Masumi Network\"\"\"\n        return self._is_live\n\n    def register_agent(self, agent_id: str, name: str, domain: str,\n                       services: List[str], metadata: Dict[str, Any]) -> Dict[str, Any]:\n        \"\"\"\n        Register an agent on Masumi Network for discoverability\n        \"\"\"\n        did = f\"did:masumi:{agent_id}\"\n        \n        agent = MasumiAgent(\n            did=did,\n            name=name,\n            domain=domain,\n            services=services,\n            reputation_score=100.0,\n            total_transactions=0,\n            average_response_time=1000,\n            registered_at=datetime.now().isoformat(),\n            is_verified=True\n        )\n\n        result = {\n            \"did\": did,\n            \"name\": name,\n            \"domain\": domain,\n            \"services\": services,\n            \"registered_at\": agent.registered_at,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"POST\", \"/agents/register\", {\n                \"agent_id\": agent_id,\n                \"name\": name,\n                \"domain\": domain,\n                \"services\": services,\n                \"metadata\": metadata\n            })\n            if api_result:\n                result[\"registry_url\"] = api_result.get(\"registry_url\", f\"{self.network_url}/agents/{agent_id}\")\n                result[\"status\"] = \"registered\"\n                result[\"message\"] = \"Agent registered on Masumi Network\"\n            else:\n                self._agent_registry[agent_id] = agent\n                result[\"status\"] = \"pending\"\n                result[\"message\"] = \"Registration submitted, awaiting confirmation\"\n        else:\n            self._agent_registry[agent_id] = agent\n            result[\"registry_url\"] = f\"{self.network_url}/agents/{agent_id}\"\n            result[\"status\"] = \"simulated\"\n            result[\"message\"] = \"Simulated - provide MASUMI_API_KEY for live network\"\n\n        return result\n\n    def discover_agents(self, domain: Optional[str] = None,\n                        service: Optional[str] = None,\n                        min_reputation: float = 0.0) -> Dict[str, Any]:\n        \"\"\"\n        Discover available agents on Masumi Network\n        \"\"\"\n        result = {\n            \"query\": {\n                \"domain\": domain,\n                \"service\": service,\n                \"min_reputation\": min_reputation\n            },\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            params = {}\n            if domain:\n                params[\"domain\"] = domain\n            if service:\n                params[\"service\"] = service\n            if min_reputation > 0:\n                params[\"min_reputation\"] = min_reputation\n            \n            api_result = self._api_request(\"GET\", f\"/agents/discover?{'&'.join(f'{k}={v}' for k, v in params.items())}\")\n            if api_result:\n                result[\"agents\"] = api_result.get(\"agents\", [])\n                result[\"total\"] = api_result.get(\"total\", 0)\n                result[\"status\"] = \"success\"\n            else:\n                result[\"agents\"] = []\n                result[\"total\"] = 0\n                result[\"status\"] = \"error\"\n        else:\n            agents = []\n            for agent in self._agent_registry.values():\n                if domain and agent.domain != domain:\n                    continue\n                if service and service not in agent.services:\n                    continue\n                if agent.reputation_score < min_reputation:\n                    continue\n\n                agents.append({\n                    \"did\": agent.did,\n                    \"name\": agent.name,\n                    \"domain\": agent.domain,\n                    \"services\": agent.services,\n                    \"reputation_score\": agent.reputation_score,\n                    \"total_transactions\": agent.total_transactions,\n                    \"average_response_time\": agent.average_response_time,\n                    \"is_verified\": agent.is_verified\n                })\n\n            result[\"agents\"] = agents\n            result[\"total\"] = len(agents)\n            result[\"status\"] = \"simulated\"\n\n        return result\n\n    def get_agent_profile(self, did: str) -> Dict[str, Any]:\n        \"\"\"\n        Get detailed profile for a specific agent\n        \"\"\"\n        result = {\n            \"did\": did,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            agent_id = did.split(\":\")[-1]\n            api_result = self._api_request(\"GET\", f\"/agents/{agent_id}\")\n            if api_result:\n                result.update(api_result)\n                result[\"status\"] = \"success\"\n            else:\n                result[\"status\"] = \"not_found\"\n        else:\n            agent_id = did.split(\":\")[-1]\n            agent = self._agent_registry.get(agent_id)\n\n            if agent:\n                result[\"name\"] = agent.name\n                result[\"domain\"] = agent.domain\n                result[\"services\"] = agent.services\n                result[\"reputation_score\"] = agent.reputation_score\n                result[\"total_transactions\"] = agent.total_transactions\n                result[\"average_response_time\"] = agent.average_response_time\n                result[\"registered_at\"] = agent.registered_at\n                result[\"is_verified\"] = agent.is_verified\n                result[\"status\"] = \"simulated\"\n            else:\n                result[\"status\"] = \"not_found\"\n\n        return result\n\n    def update_reputation(self, agent_did: str, transaction_success: bool,\n                          response_time: int) -> Dict[str, Any]:\n        \"\"\"\n        Update agent reputation based on transaction outcome\n        \"\"\"\n        result = {\n            \"did\": agent_did,\n            \"updated_at\": datetime.now().isoformat(),\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"PUT\", f\"/agents/{agent_did.split(':')[-1]}/reputation\", {\n                \"transaction_success\": transaction_success,\n                \"response_time\": response_time\n            })\n            if api_result:\n                result[\"reputation_score\"] = api_result.get(\"reputation_score\", 0)\n                result[\"total_transactions\"] = api_result.get(\"total_transactions\", 0)\n                result[\"status\"] = \"updated\"\n            else:\n                result[\"status\"] = \"error\"\n        else:\n            agent_id = agent_did.split(\":\")[-1]\n            agent = self._agent_registry.get(agent_id)\n\n            if agent:\n                if transaction_success:\n                    agent.reputation_score = min(100.0, agent.reputation_score + 0.1)\n                else:\n                    agent.reputation_score = max(0.0, agent.reputation_score - 1.0)\n\n                alpha = 0.1\n                agent.average_response_time = int(alpha * response_time + (1 - alpha) * agent.average_response_time)\n                agent.total_transactions += 1\n\n                result[\"reputation_score\"] = agent.reputation_score\n                result[\"total_transactions\"] = agent.total_transactions\n                result[\"average_response_time\"] = agent.average_response_time\n                result[\"status\"] = \"simulated\"\n            else:\n                result[\"status\"] = \"not_found\"\n\n        return result\n\n    def create_service_agreement(self, provider_did: str, consumer_did: str,\n                                 service_type: str, terms: Dict[str, Any]) -> Dict[str, Any]:\n        \"\"\"\n        Create a verifiable service agreement between agents\n        \"\"\"\n        agreement_id = f\"agreement_{datetime.now().timestamp()}\"\n\n        result = {\n            \"agreement_id\": agreement_id,\n            \"provider_did\": provider_did,\n            \"consumer_did\": consumer_did,\n            \"service_type\": service_type,\n            \"terms\": terms,\n            \"created_at\": datetime.now().isoformat(),\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"POST\", \"/agreements\", {\n                \"provider_did\": provider_did,\n                \"consumer_did\": consumer_did,\n                \"service_type\": service_type,\n                \"terms\": terms\n            })\n            if api_result:\n                result[\"agreement_id\"] = api_result.get(\"agreement_id\", agreement_id)\n                result[\"masumi_url\"] = api_result.get(\"url\", f\"{self.network_url}/agreements/{agreement_id}\")\n                result[\"status\"] = \"active\"\n            else:\n                result[\"status\"] = \"error\"\n        else:\n            result[\"masumi_url\"] = f\"{self.network_url}/agreements/{agreement_id}\"\n            result[\"status\"] = \"simulated\"\n\n        return result\n\n    def resolve_did(self, did: str) -> Dict[str, Any]:\n        \"\"\"\n        Resolve a DID to its DID Document\n        \"\"\"\n        result = {\n            \"did\": did,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"GET\", f\"/did/{did}\")\n            if api_result:\n                result.update(api_result)\n                result[\"status\"] = \"resolved\"\n            else:\n                result[\"status\"] = \"not_found\"\n        else:\n            result[\"@context\"] = \"https://www.w3.org/ns/did/v1\"\n            result[\"verificationMethod\"] = [{\n                \"id\": f\"{did}#key-1\",\n                \"type\": \"Ed25519VerificationKey2020\",\n                \"controller\": did,\n                \"publicKeyMultibase\": \"z6Mk...\"\n            }]\n            result[\"service\"] = [{\n                \"id\": f\"{did}#agent-service\",\n                \"type\": \"AgentService\",\n                \"serviceEndpoint\": f\"{self.network_url}/agents/{did.split(':')[-1]}\"\n            }]\n            result[\"status\"] = \"simulated\"\n\n        return result\n\n    def get_network_status(self) -> Dict[str, Any]:\n        \"\"\"\n        Get Masumi Network status\n        \"\"\"\n        result = {\n            \"network_url\": self.network_url,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"GET\", \"/status\")\n            if api_result:\n                result[\"version\"] = api_result.get(\"version\", \"\")\n                result[\"total_agents\"] = api_result.get(\"total_agents\", 0)\n                result[\"total_transactions\"] = api_result.get(\"total_transactions\", 0)\n                result[\"status\"] = \"connected\"\n            else:\n                result[\"status\"] = \"connection_error\"\n        else:\n            result[\"version\"] = \"1.0.0-simulated\"\n            result[\"total_agents\"] = len(self._agent_registry)\n            result[\"total_transactions\"] = sum(a.total_transactions for a in self._agent_registry.values())\n            result[\"status\"] = \"simulated\"\n            result[\"message\"] = \"Provide MASUMI_API_KEY to connect to live network\"\n\n        return result\n\n\nmasumi_service = MasumiService()\n","path":null,"size_bytes":13237,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nfunction toCamelCase(str: string): string {\n  return str.replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n\nfunction transformKeys(obj: any): any {\n  if (Array.isArray(obj)) {\n    return obj.map(transformKeys);\n  }\n  if (obj !== null && typeof obj === \"object\") {\n    const result: any = {};\n    for (const key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        const camelKey = toCamelCase(key);\n        result[camelKey] = transformKeys(obj[key]);\n      }\n    }\n    return result;\n  }\n  return obj;\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    const data = await res.json();\n    return transformKeys(data);\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1962,"size_tokens":null},"client/src/components/chat-interface.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Send, Sparkles, Loader2 } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport type { Message, Conversation } from \"@shared/schema\";\nimport { BlockchainActivityDisplay } from \"@/components/blockchain-activity\";\n\ninterface BlockchainActivity {\n  type: string;\n  icon: string;\n  title: string;\n  description: string;\n  details: Record<string, string | number | boolean>;\n  status: string;\n  is_simulated: boolean;\n  timestamp: string;\n}\n\ninterface AgentProfile {\n  name: string;\n  did: string;\n  reputation_score: number;\n  total_transactions: number;\n  verified: boolean;\n}\n\nfunction formatMarkdown(text: string): JSX.Element[] {\n  const lines = text.split('\\n');\n  const elements: JSX.Element[] = [];\n  \n  lines.forEach((line, lineIndex) => {\n    if (lineIndex > 0) {\n      elements.push(<br key={`br-${lineIndex}`} />);\n    }\n    \n    const parts = line.split(/(\\*\\*[^*]+\\*\\*|\\*[^*]+\\*|`[^`]+`)/g);\n    \n    parts.forEach((part, partIndex) => {\n      const key = `${lineIndex}-${partIndex}`;\n      \n      if (part.startsWith('**') && part.endsWith('**')) {\n        elements.push(<strong key={key} className=\"font-semibold\">{part.slice(2, -2)}</strong>);\n      } else if (part.startsWith('*') && part.endsWith('*') && !part.startsWith('**')) {\n        elements.push(<em key={key}>{part.slice(1, -1)}</em>);\n      } else if (part.startsWith('`') && part.endsWith('`')) {\n        elements.push(<code key={key} className=\"bg-black/10 dark:bg-white/10 px-1.5 py-0.5 rounded text-sm font-mono\">{part.slice(1, -1)}</code>);\n      } else if (part.startsWith('- ')) {\n        elements.push(<span key={key} className=\"block pl-4\"> {part.slice(2)}</span>);\n      } else {\n        elements.push(<span key={key}>{part}</span>);\n      }\n    });\n  });\n  \n  return elements;\n}\n\ninterface ChatMessage {\n  id: string;\n  sender: \"user\" | \"agent\";\n  agentName?: string | null;\n  content: string;\n  timestamp: string;\n  blockchainActivities?: BlockchainActivity[];\n  agentProfile?: AgentProfile;\n  isSimulationMode?: boolean;\n}\n\nexport default function ChatInterface() {\n  const [messages, setMessages] = useState<ChatMessage[]>([\n    {\n      id: \"welcome\",\n      sender: \"agent\",\n      agentName: \"AgentHub\",\n      content: \"Welcome to AgentHub! Ask me anything or use @ to mention specific agents. I'll route your request to the right specialized AI agent. Try asking about automating social media, analyzing compliance data, or optimizing DeFi yields.\",\n      timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\n    },\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [conversationId, setConversationId] = useState<string | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const createConversationMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", \"/api/conversations\", {\n        title: \"New Chat\",\n      });\n      return response.json() as Promise<Conversation>;\n    },\n    onSuccess: (data) => {\n      setConversationId(data.id);\n    },\n  });\n\n  const chatMutation = useMutation({\n    mutationFn: async ({ conversationId, message }: { conversationId: string; message: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/chat\", {\n        conversationId,\n        message,\n      });\n      return response.json();\n    },\n    onSuccess: (data) => {\n      const agentMessage: ChatMessage = {\n        id: data.agentMessage.id,\n        sender: \"agent\",\n        agentName: data.selectedAgent,\n        content: data.agentMessage.content,\n        timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\n        blockchainActivities: data.blockchainActivities || [],\n        agentProfile: data.agentProfile || null,\n        isSimulationMode: false,\n      };\n      setMessages((prev) => [...prev, agentMessage]);\n      queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/decision-logs\"] });\n    },\n    onError: () => {\n      const errorMessage: ChatMessage = {\n        id: Date.now().toString(),\n        sender: \"agent\",\n        agentName: \"AgentHub\",\n        content: \"I apologize, but I encountered an error processing your request. Please try again.\",\n        timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\n      };\n      setMessages((prev) => [...prev, errorMessage]);\n    },\n  });\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  const sendMessage = async () => {\n    if (!input.trim() || chatMutation.isPending) return;\n\n    const userMessage: ChatMessage = {\n      id: Date.now().toString(),\n      sender: \"user\",\n      content: input,\n      timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\n    };\n    setMessages((prev) => [...prev, userMessage]);\n    const messageContent = input;\n    setInput(\"\");\n\n    let convId = conversationId;\n    if (!convId) {\n      const conversation = await createConversationMutation.mutateAsync();\n      convId = conversation.id;\n    }\n\n    chatMutation.mutate({ conversationId: convId, message: messageContent });\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    setInput(suggestion);\n  };\n\n  return (\n    <Card className=\"flex flex-col h-[600px]\" data-testid=\"card-chat-interface\">\n      <div className=\"p-4 border-b flex items-center gap-3\">\n        <Avatar className=\"h-10 w-10 rounded-lg shadow-md\">\n          <AvatarFallback className=\"rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600\">\n            <Sparkles className=\"h-5 w-5 text-white\" />\n          </AvatarFallback>\n        </Avatar>\n        <div>\n          <h3 className=\"font-semibold\">AgentHub Assistant</h3>\n          <p className=\"text-sm text-muted-foreground\">Powered by Cardano & Hydra Layer 2</p>\n        </div>\n        <Badge className=\"ml-auto\" variant=\"outline\" data-testid=\"badge-chat-status\">\n          <span className=\"mr-2 h-2 w-2 inline-block bg-green-500 rounded-full\"></span>\n          Online\n        </Badge>\n      </div>\n\n      <ScrollArea className=\"flex-1 p-4\">\n        <div className=\"space-y-4\">\n          {messages.map((message) => (\n            <div\n              key={message.id}\n              className={`flex gap-3 ${message.sender === \"user\" ? \"flex-row-reverse\" : \"\"}`}\n              data-testid={`message-${message.id}`}\n            >\n              {message.sender === \"agent\" && (\n                <Avatar className=\"h-8 w-8 rounded-lg shrink-0 shadow-sm\">\n                  <AvatarFallback className=\"rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 text-xs\">\n                    <Sparkles className=\"h-4 w-4 text-white\" />\n                  </AvatarFallback>\n                </Avatar>\n              )}\n              <div className={`flex flex-col ${message.sender === \"user\" ? \"items-end\" : \"\"} ${message.sender === \"agent\" ? \"max-w-[80%]\" : \"max-w-[70%]\"}`}>\n                {message.sender === \"agent\" && message.agentName && (\n                  <span className=\"text-xs text-muted-foreground mb-1\">{message.agentName}</span>\n                )}\n                <div\n                  className={`rounded-lg px-4 py-2 ${\n                    message.sender === \"user\"\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"bg-muted\"\n                  }`}\n                >\n                  <div className=\"text-sm break-words\">\n                    {message.sender === \"agent\" ? formatMarkdown(message.content) : message.content}\n                  </div>\n                </div>\n                {message.sender === \"agent\" && message.blockchainActivities && message.blockchainActivities.length > 0 && (\n                  <div className=\"w-full mt-2\">\n                    <BlockchainActivityDisplay\n                      activities={message.blockchainActivities}\n                      isSimulationMode={message.isSimulationMode ?? true}\n                      agentProfile={message.agentProfile}\n                    />\n                  </div>\n                )}\n                <span className=\"text-xs text-muted-foreground mt-1\">{message.timestamp}</span>\n              </div>\n            </div>\n          ))}\n          {chatMutation.isPending && (\n            <div className=\"flex gap-3\">\n              <Avatar className=\"h-8 w-8 rounded-lg shrink-0 shadow-sm\">\n                <AvatarFallback className=\"rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 text-xs\">\n                  <Sparkles className=\"h-4 w-4 text-white\" />\n                </AvatarFallback>\n              </Avatar>\n              <div className=\"flex items-center gap-2 bg-muted rounded-lg px-4 py-2\">\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n                <span className=\"text-sm text-muted-foreground\">Processing...</span>\n              </div>\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n      </ScrollArea>\n\n      <div className=\"p-4 border-t\">\n        <div className=\"flex gap-2\">\n          <Input\n            placeholder=\"Ask anything, type @ for mentions and / for shortcuts...\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={(e) => e.key === \"Enter\" && !e.shiftKey && sendMessage()}\n            disabled={chatMutation.isPending}\n            data-testid=\"input-chat-message\"\n          />\n          <Button \n            onClick={sendMessage} \n            size=\"icon\" \n            disabled={chatMutation.isPending || !input.trim()}\n            data-testid=\"button-send-message\"\n          >\n            {chatMutation.isPending ? (\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n            ) : (\n              <Send className=\"h-4 w-4\" />\n            )}\n          </Button>\n        </div>\n        <div className=\"flex gap-2 mt-3 flex-wrap\">\n          <Badge \n            variant=\"secondary\" \n            className=\"cursor-pointer hover-elevate\" \n            onClick={() => handleSuggestionClick(\"Help me automate my social media posts for better engagement\")}\n            data-testid=\"badge-suggestion-social\"\n          >\n            Automate social media\n          </Badge>\n          <Badge \n            variant=\"secondary\" \n            className=\"cursor-pointer hover-elevate\" \n            onClick={() => handleSuggestionClick(\"Check my transactions for AML/KYC compliance\")}\n            data-testid=\"badge-suggestion-compliance\"\n          >\n            Compliance monitoring\n          </Badge>\n          <Badge \n            variant=\"secondary\" \n            className=\"cursor-pointer hover-elevate\" \n            onClick={() => handleSuggestionClick(\"Optimize my DeFi yield across protocols\")}\n            data-testid=\"badge-suggestion-defi\"\n          >\n            DeFi optimization\n          </Badge>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","path":null,"size_bytes":11385,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/app-sidebar.tsx":{"content":"import {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport { Sparkles, Home, Store, MessageCircle, Network, FileText, Bot, ExternalLink } from \"lucide-react\";\nimport { Link, useLocation } from \"wouter\";\n\nconst mainNavItems = [\n  { title: \"Home\", icon: Home, url: \"/\" },\n  { title: \"Marketplace\", icon: Store, url: \"/marketplace\" },\n  { title: \"Sokosumi\", icon: ExternalLink, url: \"/sokosumi\" },\n  { title: \"AgentHub Assistant\", icon: Bot, url: \"/chat\" },\n];\n\nconst systemNavItems = [\n  { title: \"Architecture\", icon: Network, url: \"/architecture\" },\n  { title: \"Decision Logs\", icon: FileText, url: \"/logs\" },\n];\n\nexport default function AppSidebar() {\n  const [location] = useLocation();\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-6\">\n        <Link href=\"/\">\n          <div className=\"flex items-center gap-2 cursor-pointer\" data-testid=\"link-home\">\n            <div className=\"w-8 h-8 rounded-md bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center shadow-md\">\n              <Sparkles className=\"h-5 w-5 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl font-bold\">AgentHub</h1>\n              <p className=\"text-xs text-emerald-500\">Powered by Cardano</p>\n            </div>\n          </div>\n        </Link>\n      </SidebarHeader>\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Navigation</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {mainNavItems.map((item) => {\n                const isActive = location === item.url;\n                return (\n                  <SidebarMenuItem key={item.title}>\n                    <SidebarMenuButton asChild isActive={isActive}>\n                      <Link href={item.url} data-testid={`link-nav-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                        <item.icon className=\"h-4 w-4\" />\n                        <span>{item.title}</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                );\n              })}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupLabel>System</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {systemNavItems.map((item) => {\n                const isActive = location === item.url;\n                return (\n                  <SidebarMenuItem key={item.title}>\n                    <SidebarMenuButton asChild isActive={isActive}>\n                      <Link href={item.url} data-testid={`link-nav-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                        <item.icon className=\"h-4 w-4\" />\n                        <span>{item.title}</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                );\n              })}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n      <SidebarFooter className=\"p-4\">\n        <div className=\"text-xs text-muted-foreground text-center\">\n          <p>Deploy agents from the Marketplace</p>\n          <p className=\"mt-1\">Chat opens on deployment</p>\n        </div>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","path":null,"size_bytes":3494,"size_tokens":null},"server/storage.ts":{"content":"import { \n  type User, type InsertUser,\n  type Agent, type InsertAgent,\n  type Conversation, type InsertConversation,\n  type Message, type InsertMessage,\n  type Transaction, type InsertTransaction,\n  type DecisionLog, type InsertDecisionLog,\n  users, agents, conversations, messages, transactions, decisionLogs\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc } from \"drizzle-orm\";\nimport { randomUUID } from \"crypto\";\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n\n  getAgents(): Promise<Agent[]>;\n  getAgent(id: string): Promise<Agent | undefined>;\n  getAgentByName(name: string): Promise<Agent | undefined>;\n  createAgent(agent: InsertAgent): Promise<Agent>;\n  updateAgentUsesServed(id: string): Promise<void>;\n  seedAgents(): Promise<void>;\n\n  getConversations(): Promise<Conversation[]>;\n  getConversation(id: string): Promise<Conversation | undefined>;\n  createConversation(conversation: InsertConversation): Promise<Conversation>;\n\n  getMessagesByConversation(conversationId: string): Promise<Message[]>;\n  createMessage(message: InsertMessage): Promise<Message>;\n\n  getTransactions(limit?: number): Promise<Transaction[]>;\n  createTransaction(transaction: InsertTransaction): Promise<Transaction>;\n  updateTransactionStatus(id: string, status: string): Promise<void>;\n\n  getDecisionLogs(limit?: number): Promise<DecisionLog[]>;\n  createDecisionLog(log: InsertDecisionLog): Promise<DecisionLog>;\n  updateDecisionLogStatus(id: string, status: string): Promise<void>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db.insert(users).values(insertUser).returning();\n    return user;\n  }\n\n  async getAgents(): Promise<Agent[]> {\n    return db.select().from(agents);\n  }\n\n  async getAgent(id: string): Promise<Agent | undefined> {\n    const [agent] = await db.select().from(agents).where(eq(agents.id, id));\n    return agent;\n  }\n\n  async getAgentByName(name: string): Promise<Agent | undefined> {\n    const [agent] = await db.select().from(agents).where(eq(agents.name, name));\n    return agent;\n  }\n\n  async createAgent(insertAgent: InsertAgent): Promise<Agent> {\n    const [agent] = await db.insert(agents).values(insertAgent).returning();\n    return agent;\n  }\n\n  async updateAgentUsesServed(id: string): Promise<void> {\n    const agent = await this.getAgent(id);\n    if (agent) {\n      await db.update(agents)\n        .set({ usesServed: agent.usesServed + 1 })\n        .where(eq(agents.id, id));\n    }\n  }\n\n  async seedAgents(): Promise<void> {\n    const existingAgents = await this.getAgents();\n    if (existingAgents.length > 0) return;\n\n    const agentData: InsertAgent[] = [\n      {\n        name: \"SocialGenie\",\n        description: \"Automate social media content creation and scheduling with AI-powered insights\",\n        domain: \"Workflow Automation\",\n        icon: \"Sparkles\",\n        systemPrompt: \"You are SocialGenie, an expert AI agent specialized in social media management. You help users create engaging content, schedule posts, analyze engagement metrics, and optimize their social media presence. You have deep knowledge of platforms like Twitter, Instagram, LinkedIn, and TikTok. When collaborating with other agents, you can hire StyleAdvisor for product content and visual recommendations.\",\n        usesServed: 1247,\n        avgResponseMs: 1200,\n        isVerified: true,\n        status: \"online\",\n      },\n      {\n        name: \"MailMind\",\n        description: \"Intelligent email marketing automation with personalization at scale\",\n        domain: \"Workflow Automation\",\n        icon: \"Mail\",\n        systemPrompt: \"You are MailMind, an expert AI agent specialized in email marketing automation. You craft compelling email campaigns, segment audiences, optimize subject lines, and analyze email performance metrics. You help users build effective email funnels and improve deliverability rates.\",\n        usesServed: 892,\n        avgResponseMs: 800,\n        isVerified: true,\n        status: \"online\",\n      },\n      {\n        name: \"ComplianceGuard\",\n        description: \"Real-time AML/KYC monitoring with regulatory compliance automation\",\n        domain: \"Data & Compliance\",\n        icon: \"ShieldCheck\",\n        systemPrompt: \"You are ComplianceGuard, an expert AI agent specialized in regulatory compliance and risk monitoring. You perform AML (Anti-Money Laundering) checks, KYC (Know Your Customer) verification, and ensure transactions comply with financial regulations. You can collaborate with InsightBot for detailed analytics on compliance trends.\",\n        usesServed: 2103,\n        avgResponseMs: 2100,\n        isVerified: true,\n        status: \"online\",\n      },\n      {\n        name: \"InsightBot\",\n        description: \"Advanced business intelligence with predictive analytics and reporting\",\n        domain: \"Data & Compliance\",\n        icon: \"BarChart3\",\n        systemPrompt: \"You are InsightBot, an expert AI agent specialized in business intelligence and data analytics. You analyze complex datasets, generate actionable insights, create visualizations, and provide predictive analytics. You help businesses make data-driven decisions.\",\n        usesServed: 1567,\n        avgResponseMs: 1500,\n        isVerified: true,\n        status: \"online\",\n      },\n      {\n        name: \"ShopAssist\",\n        description: \"24/7 e-commerce customer support with intelligent product recommendations\",\n        domain: \"Customer Support\",\n        icon: \"ShoppingBag\",\n        systemPrompt: \"You are ShopAssist, an expert AI agent specialized in e-commerce customer support. You handle order inquiries, process returns, provide product recommendations, and resolve customer issues. You can collaborate with StyleAdvisor for personalized product styling suggestions.\",\n        usesServed: 3421,\n        avgResponseMs: 600,\n        isVerified: true,\n        status: \"online\",\n      },\n      {\n        name: \"StyleAdvisor\",\n        description: \"Personalized product styling and recommendation engine\",\n        domain: \"Customer Support\",\n        icon: \"Palette\",\n        systemPrompt: \"You are StyleAdvisor, an expert AI agent specialized in product recommendations and personal styling. You analyze user preferences, suggest products that match their style, and provide fashion and design advice. Other agents often hire you for product content creation.\",\n        usesServed: 987,\n        avgResponseMs: 1000,\n        isVerified: true,\n        status: \"online\",\n      },\n      {\n        name: \"YieldMaximizer\",\n        description: \"Automated DeFi yield optimization across multiple protocols\",\n        domain: \"DeFi Services\",\n        icon: \"Banknote\",\n        systemPrompt: \"You are YieldMaximizer, an expert AI agent specialized in DeFi yield optimization. You analyze liquidity pools, compare APY rates across protocols, optimize portfolio allocation, and help users maximize their DeFi returns while managing risk. You work with TradeMind for market analysis.\",\n        usesServed: 1834,\n        avgResponseMs: 1800,\n        isVerified: true,\n        status: \"online\",\n      },\n      {\n        name: \"TradeMind\",\n        description: \"Autonomous trading strategies with risk management\",\n        domain: \"DeFi Services\",\n        icon: \"TrendingUp\",\n        systemPrompt: \"You are TradeMind, an expert AI agent specialized in autonomous trading and market analysis. You analyze market trends, execute trading strategies, manage risk, and provide real-time market insights. You collaborate with YieldMaximizer for comprehensive DeFi portfolio management.\",\n        usesServed: 1256,\n        avgResponseMs: 2300,\n        isVerified: true,\n        status: \"online\",\n      },\n    ];\n\n    for (const agent of agentData) {\n      await this.createAgent(agent);\n    }\n  }\n\n  async getConversations(): Promise<Conversation[]> {\n    return db.select().from(conversations).orderBy(desc(conversations.updatedAt));\n  }\n\n  async getConversation(id: string): Promise<Conversation | undefined> {\n    const [conversation] = await db.select().from(conversations).where(eq(conversations.id, id));\n    return conversation;\n  }\n\n  async createConversation(insertConversation: InsertConversation): Promise<Conversation> {\n    const [conversation] = await db.insert(conversations).values(insertConversation).returning();\n    return conversation;\n  }\n\n  async getMessagesByConversation(conversationId: string): Promise<Message[]> {\n    return db.select().from(messages)\n      .where(eq(messages.conversationId, conversationId))\n      .orderBy(messages.createdAt);\n  }\n\n  async createMessage(insertMessage: InsertMessage): Promise<Message> {\n    const [message] = await db.insert(messages).values(insertMessage).returning();\n    return message;\n  }\n\n  async getTransactions(limit: number = 20): Promise<Transaction[]> {\n    return db.select().from(transactions)\n      .orderBy(desc(transactions.createdAt))\n      .limit(limit);\n  }\n\n  async createTransaction(insertTransaction: InsertTransaction): Promise<Transaction> {\n    const [transaction] = await db.insert(transactions).values(insertTransaction).returning();\n    return transaction;\n  }\n\n  async updateTransactionStatus(id: string, status: string): Promise<void> {\n    await db.update(transactions).set({ status }).where(eq(transactions.id, id));\n  }\n\n  async getDecisionLogs(limit: number = 20): Promise<DecisionLog[]> {\n    return db.select().from(decisionLogs)\n      .orderBy(desc(decisionLogs.createdAt))\n      .limit(limit);\n  }\n\n  async createDecisionLog(insertLog: InsertDecisionLog): Promise<DecisionLog> {\n    const [log] = await db.insert(decisionLogs).values(insertLog).returning();\n    return log;\n  }\n\n  async updateDecisionLogStatus(id: string, status: string): Promise<void> {\n    await db.update(decisionLogs).set({ status }).where(eq(decisionLogs.id, id));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","path":null,"size_bytes":10390,"size_tokens":null},"client/src/components/examples/decision-log.tsx":{"content":"import DecisionLog from \"../decision-log\";\n\nexport default function DecisionLogExample() {\n  return (\n    <div className=\"p-6 max-w-2xl\">\n      <DecisionLog />\n    </div>\n  );\n}\n","path":null,"size_bytes":178,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"client/src/components/examples/chat-interface.tsx":{"content":"import ChatInterface from \"../chat-interface\";\n\nexport default function ChatInterfaceExample() {\n  return (\n    <div className=\"p-6 max-w-4xl\">\n      <ChatInterface />\n    </div>\n  );\n}\n","path":null,"size_bytes":186,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4420,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":844,"size_tokens":null},"server/static.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(__dirname, \"public\");\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":547,"size_tokens":null},"client/src/components/transaction-item.tsx":{"content":"import { Card } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ArrowRight, Zap } from \"lucide-react\";\n\ninterface TransactionItemProps {\n  from: string;\n  to: string;\n  amount: string;\n  timestamp: string;\n  status: \"confirmed\" | \"pending\";\n  txId: string;\n}\n\nexport default function TransactionItem({\n  from,\n  to,\n  amount,\n  timestamp,\n  status,\n  txId,\n}: TransactionItemProps) {\n  return (\n    <Card className=\"p-4\" data-testid={`transaction-${txId}`}>\n      <div className=\"flex items-center justify-between gap-4\">\n        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n          <div className=\"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 shadow-md shrink-0\">\n            <Zap className=\"h-5 w-5 text-white\" />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 text-sm\">\n              <span className=\"font-medium truncate\">{from}</span>\n              <ArrowRight className=\"h-3 w-3 shrink-0 text-muted-foreground\" />\n              <span className=\"font-medium truncate\">{to}</span>\n            </div>\n            <div className=\"flex items-center gap-2 text-xs text-muted-foreground mt-1\">\n              <span className=\"font-mono\">{timestamp}</span>\n              <span></span>\n              <span className=\"font-mono truncate\">{txId}</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-3 shrink-0\">\n          <div className=\"text-right\">\n            <p className=\"font-mono font-semibold\" data-testid={`amount-${txId}`}>{amount}</p>\n            <p className=\"text-xs text-muted-foreground\">Hydra L2</p>\n          </div>\n          <Badge\n            variant={status === \"confirmed\" ? \"default\" : \"secondary\"}\n            data-testid={`status-${txId}`}\n          >\n            {status}\n          </Badge>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","path":null,"size_bytes":1985,"size_tokens":null},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"flask>=3.1.2\",\n    \"flask-cors>=6.0.1\",\n    \"gunicorn>=23.0.0\",\n    \"langchain>=1.1.0\",\n    \"langchain-openai>=1.1.0\",\n    \"langgraph>=1.0.4\",\n    \"openai>=2.8.1\",\n    \"psycopg2-binary>=2.9.11\",\n    \"python-dotenv>=1.2.1\",\n]\n","path":null,"size_bytes":372,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","path":null,"size_bytes":1904,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"client/src/pages/agent.tsx":{"content":"import { useRoute, Link } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Sparkles, Mail, ShieldCheck, BarChart3, ShoppingBag, Palette, Banknote, TrendingUp, MessageSquare, ArrowLeft, CheckCircle, Clock, Users, type LucideIcon } from \"lucide-react\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport type { Agent } from \"@shared/schema\";\n\nconst iconMap: Record<string, LucideIcon> = {\n  Sparkles,\n  Mail,\n  ShieldCheck,\n  BarChart3,\n  ShoppingBag,\n  Palette,\n  Banknote,\n  TrendingUp,\n};\n\nexport default function AgentPage() {\n  const [, params] = useRoute(\"/agents/:agentName\");\n  const agentName = params?.agentName || \"\";\n\n  const { data: agents, isLoading } = useQuery<Agent[]>({\n    queryKey: [\"/api/agents\"],\n  });\n\n  const agent = agents?.find(\n    (a) => a.name.toLowerCase() === agentName.toLowerCase()\n  );\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <Skeleton className=\"h-8 w-48\" />\n        <Card>\n          <CardContent className=\"p-6 space-y-4\">\n            <Skeleton className=\"h-16 w-16 rounded-lg\" />\n            <Skeleton className=\"h-8 w-1/2\" />\n            <Skeleton className=\"h-4 w-full\" />\n            <Skeleton className=\"h-4 w-3/4\" />\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!agent) {\n    return (\n      <div className=\"space-y-6\">\n        <Link href=\"/\">\n          <Button variant=\"ghost\" className=\"gap-2\" data-testid=\"button-back-home\">\n            <ArrowLeft className=\"h-4 w-4\" />\n            Back to Home\n          </Button>\n        </Link>\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-muted-foreground\">Agent not found</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const IconComponent = iconMap[agent.icon] || Sparkles;\n\n  return (\n    <div className=\"space-y-6\">\n      <Link href=\"/marketplace\">\n        <Button variant=\"ghost\" className=\"gap-2\" data-testid=\"button-back-marketplace\">\n          <ArrowLeft className=\"h-4 w-4\" />\n          Back to Marketplace\n        </Button>\n      </Link>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-start gap-4\">\n            <div className=\"p-4 rounded-lg bg-gradient-to-br from-emerald-500/20 to-teal-500/20 shadow-md\">\n              <IconComponent className=\"h-8 w-8 text-emerald-500\" />\n            </div>\n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <CardTitle className=\"text-2xl\">{agent.name}</CardTitle>\n                {agent.isVerified && (\n                  <Badge variant=\"secondary\" className=\"gap-1\">\n                    <CheckCircle className=\"h-3 w-3\" />\n                    Verified\n                  </Badge>\n                )}\n              </div>\n              <CardDescription className=\"text-base\">{agent.description}</CardDescription>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"flex flex-wrap gap-2\">\n            <Badge variant=\"outline\">{agent.domain}</Badge>\n            <Badge variant=\"outline\" className=\"gap-1\">\n              <Users className=\"h-3 w-3\" />\n              {agent.usesServed.toLocaleString()} uses\n            </Badge>\n            <Badge variant=\"outline\" className=\"gap-1\">\n              <Clock className=\"h-3 w-3\" />\n              ~{(agent.avgResponseMs / 1000).toFixed(1)}s response\n            </Badge>\n          </div>\n\n          <div>\n            <h3 className=\"font-semibold mb-2\">Capabilities</h3>\n            <p className=\"text-muted-foreground text-sm\">\n              {agent.systemPrompt.split('. ').slice(1, 4).join('. ')}.\n            </p>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <Link href={`/chat?agent=${agent.name}`}>\n              <Button className=\"gap-2\" data-testid={`button-chat-${agent.name.toLowerCase()}`}>\n                <MessageSquare className=\"h-4 w-4\" />\n                Start Chat with {agent.name}\n              </Button>\n            </Link>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":4338,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1592,"size_tokens":null},"client/src/components/decision-log.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ExternalLink, CheckCircle2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport type { DecisionLog as DecisionLogType } from \"@shared/schema\";\n\nexport default function DecisionLog() {\n  const { data: logs, isLoading } = useQuery<DecisionLogType[]>({\n    queryKey: [\"/api/decision-logs\"],\n    refetchInterval: 5000,\n  });\n\n  const formatTimestamp = (date: Date | string) => {\n    const d = new Date(date);\n    return d.toLocaleString(\"en-US\", {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n      hour12: false,\n    }).replace(\",\", \"\");\n  };\n\n  return (\n    <Card data-testid=\"card-decision-log\">\n      <CardHeader>\n        <CardTitle>Decision Logging</CardTitle>\n        <CardDescription>On-chain audit trail of all agent decisions and collaborations</CardDescription>\n      </CardHeader>\n      <CardContent>\n        {isLoading ? (\n          <div className=\"space-y-4\">\n            {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"flex gap-4 pb-4 border-b\">\n                <Skeleton className=\"w-3 h-3 rounded-full\" />\n                <div className=\"flex-1 space-y-2\">\n                  <Skeleton className=\"h-4 w-1/4\" />\n                  <Skeleton className=\"h-4 w-3/4\" />\n                  <Skeleton className=\"h-3 w-1/2\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : logs && logs.length > 0 ? (\n          <div className=\"space-y-4\">\n            {logs.map((log, index) => (\n              <div\n                key={log.id}\n                className=\"flex gap-4 pb-4 border-b last:border-b-0\"\n                data-testid={`log-entry-${log.id}`}\n              >\n                <div className=\"relative\">\n                  <div className={`w-3 h-3 rounded-full ${log.status === \"confirmed\" ? \"bg-green-500\" : \"bg-blue-500\"} mt-1`} />\n                  {index < logs.length - 1 && (\n                    <div className=\"absolute top-3 left-1/2 -translate-x-1/2 w-px h-full bg-border\" />\n                  )}\n                </div>\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <div>\n                      <p className=\"font-semibold text-sm\">{log.agentName}</p>\n                      <p className=\"text-sm text-muted-foreground\">{log.action}</p>\n                    </div>\n                    <Badge\n                      variant={log.status === \"confirmed\" ? \"default\" : \"secondary\"}\n                      className=\"shrink-0\"\n                      data-testid={`badge-status-${log.id}`}\n                    >\n                      {log.status === \"confirmed\" && <CheckCircle2 className=\"h-3 w-3 mr-1\" />}\n                      {log.status}\n                    </Badge>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                    <span className=\"font-mono\">{formatTimestamp(log.createdAt)}</span>\n                    <span>|</span>\n                    <span className=\"font-mono\">{log.txHash}</span>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"h-auto p-0 text-primary\"\n                      data-testid={`button-view-tx-${log.id}`}\n                    >\n                      <ExternalLink className=\"h-3 w-3\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <p className=\"text-muted-foreground text-center py-8\">\n            No decision logs yet. Start chatting with agents to generate logs.\n          </p>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":4078,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/components/examples/app-sidebar.tsx":{"content":"import AppSidebar from \"../app-sidebar\";\nimport { SidebarProvider } from \"@/components/ui/sidebar\";\n\nexport default function AppSidebarExample() {\n  const style = {\n    \"--sidebar-width\": \"20rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AppSidebar />\n      </div>\n    </SidebarProvider>\n  );\n}\n","path":null,"size_bytes":384,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"design_guidelines.md":{"content":"# AgentHub Design Guidelines\n\n## Design Approach\n**Hybrid System**: Drawing from Linear's precision + Stripe's data clarity + modern crypto platforms (Coinbase, Phantom) for blockchain credibility. This utility-focused marketplace demands clarity over decoration.\n\n## Typography\n**Font Stack**:\n- Primary: Inter (headers, UI elements) - weights 400, 500, 600, 700\n- Monospace: JetBrains Mono (blockchain addresses, transaction IDs, metrics)\n\n**Hierarchy**:\n- Page titles: text-4xl/5xl font-bold\n- Section headers: text-2xl/3xl font-semibold\n- Agent names: text-xl font-semibold\n- Body text: text-base font-normal\n- Captions/metrics: text-sm font-medium\n- Micro text (addresses): text-xs font-mono\n\n## Layout System\n**Spacing Primitives**: Use Tailwind units 2, 4, 6, 8, 12, 16, 20\n- Component padding: p-6, p-8\n- Section spacing: space-y-8, space-y-12\n- Grid gaps: gap-6, gap-8\n- Container max-width: max-w-7xl\n\n**Grid Patterns**:\n- Agent cards: 3-column desktop (grid-cols-1 md:grid-cols-2 lg:grid-cols-3)\n- Metrics dashboard: 4-column (grid-cols-2 lg:grid-cols-4)\n- System architecture: 2-column split (Hydra L2 | Cardano L1)\n\n## Core Components\n\n**Agent Cards**:\n- Rounded borders (rounded-xl)\n- Subtle shadow (shadow-sm hover:shadow-md)\n- Badge/pill for domain category (top-right)\n- Icon (64x64) + Name + Description + Stats row (uses served, avg response)\n- \"Deploy Agent\" CTA button (full-width at bottom)\n\n**Blockchain Panels**:\n- Distinct visual treatment for Hydra vs Cardano sections\n- Live metrics (TPS, cost, transaction count) in monospace\n- Visual indicators for transaction status (pending/confirmed)\n- Transaction history table with truncated addresses\n\n**Master Chat Interface**:\n- Fixed bottom input bar with @ mention autocomplete\n- Message bubbles: user (right-aligned) vs agent responses (left-aligned)\n- Agent avatar + name tag on responses\n- Inline transaction confirmations when agents collaborate\n\n**Decision Log**:\n- Timeline visualization (vertical line with nodes)\n- Each entry: timestamp + agent + action + blockchain transaction link\n- Expandable details showing full JSON/payload\n\n**Navigation**:\n- Left sidebar (fixed, 240px width)\n- Category sections: Workflow Automation, Data & Compliance, Customer Support, DeFi Services\n- Active state: subtle background highlight + border accent\n\n## Visual Elements\n\n**Blockchain Credibility**:\n- Gradient accents (purple-to-pink) for blockchain-specific features\n- Masumi DID verified badges (checkmark icon in circle)\n- Hydra lightning icon for L2 transactions\n- Cardano logo/branding in footer\n\n**Status Indicators**:\n- Agent availability: green dot (online), yellow (busy), gray (offline)\n- Transaction status: blue (pending), green (confirmed), red (failed)\n- DID verification: verified checkmark badge\n\n**Data Visualization**:\n- Horizontal bar graphs for agent utilization\n- Sparkline charts for transaction volume trends\n- Pie chart for platform fee breakdown\n- Network topology diagram for agent collaboration (nodes + edges)\n\n## Images\n\n**Hero Section**: \nLarge hero image (h-96) showing abstract AI/blockchain visualization - geometric networks, glowing nodes, digital pathways. Overlay with blurred-background buttons for \"Deploy Your First Agent\" and \"Explore Marketplace\".\n\n**Agent Icons**:\nUse Heroicons library via CDN for agent category icons:\n- Workflow: SparklesIcon, EnvelopeIcon\n- Data: ShieldCheckIcon, ChartBarIcon  \n- Customer: ShoppingBagIcon, SwatchIcon\n- DeFi: BanknotesIcon, ArrowTrendingUpIcon\n\n**System Diagrams**:\nCustom SVG illustrations for 7-layer architecture showing data flow from User  Master Agent  Registry  Specialists  Hydra  Cardano\n\n## Interaction Patterns\n\n**Agent Discovery**:\n- Search bar with instant filtering\n- Category filter chips (all active by default)\n- Sort options: popularity, cost, response time\n\n**Agent Collaboration Flow**:\n- Visual pipeline showing: Request  Analysis  Agent Selection  Execution  Payment  Confirmation\n- Animated progress indicators during multi-agent workflows\n\n**Micropayment Feedback**:\n- Toast notifications for completed transactions\n- Running cost counter in bottom-right during active sessions\n- Transaction receipt modal with blockchain explorer link\n\n## Accessibility\n- Semantic HTML structure\n- ARIA labels for all interactive blockchain elements\n- Keyboard navigation for agent selection and deployment\n- High contrast for transaction status indicators\n- Screen reader announcements for transaction confirmations\n\n## Key Pages Structure\n\n1. **Dashboard/Home**: Hero + Key metrics grid + Featured agents + Recent activity feed\n2. **Agent Marketplace**: Category sidebar + Agent cards grid + Filters\n3. **Chat Interface**: Full-height chat + Agent context panel\n4. **Decision Log**: Timeline view + Transaction details + Blockchain links\n5. **System Architecture**: Interactive diagram + Layer descriptions + Tech stack cards","path":null,"size_bytes":4915,"size_tokens":null},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","path":null,"size_bytes":96,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"client/src/components/examples/transaction-item.tsx":{"content":"import TransactionItem from \"../transaction-item\";\n\nexport default function TransactionItemExample() {\n  return (\n    <div className=\"p-6 space-y-3 max-w-2xl\">\n      <TransactionItem\n        from=\"SocialGenie\"\n        to=\"StyleAdvisor\"\n        amount=\"$0.004\"\n        timestamp=\"10:45:32\"\n        status=\"confirmed\"\n        txId=\"0xa1b2c3...d4e5f6\"\n      />\n      <TransactionItem\n        from=\"ComplianceGuard\"\n        to=\"InsightBot\"\n        amount=\"$0.004\"\n        timestamp=\"10:44:18\"\n        status=\"pending\"\n        txId=\"0xf6e5d4...c3b2a1\"\n      />\n    </div>\n  );\n}\n","path":null,"size_bytes":574,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1202,"size_tokens":null},"client/src/components/examples/system-flow.tsx":{"content":"import SystemFlow from \"../system-flow\";\n\nexport default function SystemFlowExample() {\n  return (\n    <div className=\"p-6\">\n      <SystemFlow />\n    </div>\n  );\n}\n","path":null,"size_bytes":164,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"client/src/components/system-flow.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ArrowRight } from \"lucide-react\";\n\nconst flowSteps = [\n  { id: 1, label: \"User spawns goal\", color: \"from-emerald-500 to-emerald-600\" },\n  { id: 2, label: \"Master agent analyzes\", color: \"from-emerald-600 to-teal-500\" },\n  { id: 3, label: \"Searches registry\", color: \"from-teal-500 to-teal-600\" },\n  { id: 4, label: \"Agents collaborate\", color: \"from-teal-600 to-emerald-500\" },\n  { id: 5, label: \"Hydra processes\", color: \"from-emerald-500 to-cyan-500\" },\n  { id: 6, label: \"Cardano settles\", color: \"from-cyan-500 to-cyan-600\" },\n  { id: 7, label: \"User receives result\", color: \"from-cyan-600 to-emerald-500\" },\n];\n\nexport default function SystemFlow() {\n  return (\n    <Card data-testid=\"card-system-flow\">\n      <CardHeader>\n        <CardTitle>System Flow</CardTitle>\n        <CardDescription>\n          End-to-end workflow from user request to blockchain settlement\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex items-center gap-2 overflow-x-auto pb-2\">\n          {flowSteps.map((step, index) => (\n            <div key={step.id} className=\"flex items-center gap-2 shrink-0\">\n              <div\n                className={`px-4 py-3 rounded-lg bg-gradient-to-r ${step.color} text-white text-sm font-medium text-center min-w-[140px] shadow-md`}\n                data-testid={`flow-step-${step.id}`}\n              >\n                <div className=\"text-xs opacity-80 mb-1\">{step.id}</div>\n                {step.label}\n              </div>\n              {index < flowSteps.length - 1 && (\n                <ArrowRight className=\"h-5 w-5 text-emerald-500 shrink-0\" />\n              )}\n            </div>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":1829,"size_tokens":null},"client/src/components/examples/blockchain-panel.tsx":{"content":"import BlockchainPanel from \"../blockchain-panel\";\n\nexport default function BlockchainPanelExample() {\n  return (\n    <div className=\"p-6 grid md:grid-cols-2 gap-6 max-w-4xl\">\n      <BlockchainPanel type=\"hydra\" />\n      <BlockchainPanel type=\"cardano\" />\n    </div>\n  );\n}\n","path":null,"size_bytes":274,"size_tokens":null},"client/src/components/metrics-grid.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Layers, Bot, FolderKanban, Zap, DollarSign, BarChart3, CheckCircle } from \"lucide-react\";\n\nconst metrics = [\n  { label: \"System Layers\", value: \"7\", icon: Layers, testId: \"metric-system-layers\" },\n  { label: \"Specialized Agents\", value: \"8\", icon: Bot, testId: \"metric-specialized-agents\" },\n  { label: \"Agent Domains\", value: \"4\", icon: FolderKanban, testId: \"metric-agent-domains\" },\n  { label: \"Throughput\", value: \"1000+ TPS\", icon: Zap, testId: \"metric-throughput\" },\n  { label: \"Cost/Service\", value: \"~$0.004\", icon: DollarSign, testId: \"metric-cost-service\" },\n  { label: \"Platform Fee\", value: \"10%\", icon: BarChart3, testId: \"metric-platform-fee\" },\n  { label: \"On-Chain\", value: \"100%\", icon: CheckCircle, testId: \"metric-on-chain\" },\n];\n\nexport default function MetricsGrid() {\n  return (\n    <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n      {metrics.map((metric) => (\n        <Card key={metric.label} className=\"hover:border-emerald-500/30 transition-colors\" data-testid={metric.testId}>\n          <CardHeader className=\"flex flex-row items-center justify-between gap-1 space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\n              {metric.label}\n            </CardTitle>\n            <metric.icon className=\"h-4 w-4 text-emerald-500\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold font-mono text-emerald-500\" data-testid={`value-${metric.testId}`}>\n              {metric.value}\n            </div>\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  );\n}\n","path":null,"size_bytes":1680,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { serveStatic } from \"./static\";\nimport { createServer } from \"http\";\nimport { spawn } from \"child_process\";\nimport path from \"path\";\n\nfunction startPythonBackend() {\n  const pythonProcess = spawn('python', ['app.py'], {\n    cwd: path.join(process.cwd(), 'python_backend'),\n    stdio: ['ignore', 'pipe', 'pipe'],\n    env: { ...process.env }\n  });\n\n  pythonProcess.stdout.on('data', (data) => {\n    console.log(`[python] ${data.toString().trim()}`);\n  });\n\n  pythonProcess.stderr.on('data', (data) => {\n    console.log(`[python] ${data.toString().trim()}`);\n  });\n\n  pythonProcess.on('error', (error) => {\n    console.error('[python] Failed to start:', error);\n  });\n\n  pythonProcess.on('close', (code) => {\n    console.log(`[python] Process exited with code ${code}`);\n    if (code !== 0) {\n      console.log('[python] Restarting in 3 seconds...');\n      setTimeout(startPythonBackend, 3000);\n    }\n  });\n\n  return pythonProcess;\n}\n\nstartPythonBackend();\n\nconst app = express();\nconst httpServer = createServer(app);\n\ndeclare module \"http\" {\n  interface IncomingMessage {\n    rawBody: unknown;\n  }\n}\n\napp.use(\n  express.json({\n    verify: (req, _res, buf) => {\n      req.rawBody = buf;\n    },\n  }),\n);\n\napp.use(express.urlencoded({ extended: false }));\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  await registerRoutes(httpServer, app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (process.env.NODE_ENV === \"production\") {\n    serveStatic(app);\n  } else {\n    const { setupVite } = await import(\"./vite\");\n    await setupVite(httpServer, app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  httpServer.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n      reusePort: true,\n    },\n    () => {\n      log(`serving on port ${port}`);\n    },\n  );\n})();\n","path":null,"size_bytes":3445,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"client/src/components/theme-toggle.tsx":{"content":"import { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useEffect, useState } from \"react\";\n\nexport default function ThemeToggle() {\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"dark\");\n\n  useEffect(() => {\n    const stored = localStorage.getItem(\"theme\") as \"light\" | \"dark\" | null;\n    const initial = stored || \"dark\";\n    setTheme(initial);\n    document.documentElement.classList.toggle(\"dark\", initial === \"dark\");\n  }, []);\n\n  const toggleTheme = () => {\n    const newTheme = theme === \"light\" ? \"dark\" : \"light\";\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\");\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      data-testid=\"button-theme-toggle\"\n      aria-label=\"Toggle theme\"\n    >\n      {theme === \"light\" ? (\n        <Moon className=\"h-5 w-5\" />\n      ) : (\n        <Sun className=\"h-5 w-5\" />\n      )}\n    </Button>\n  );\n}\n","path":null,"size_bytes":1039,"size_tokens":null},"replit.md":{"content":"# AgentHub - AI Agent Marketplace on Cardano\n\n## Overview\n\nAgentHub is an AI-powered agent marketplace built on the Cardano blockchain, featuring eight specialized AI agents across four domains (Workflow Automation, Data & Compliance, Customer Support, and DeFi Services). The platform provides a master chat interface where users can interact with multiple AI agents simultaneously.\n\n## System Architecture\n\n### Hybrid Frontend/Backend Architecture\n\n- **Frontend**: React + TypeScript with Vite, using Wouter for client-side routing. UI built with Radix UI primitives and styled using Tailwind CSS with shadcn/ui components.\n\n- **Backend**: Dual-stack approach:\n  - Node.js/Express (TypeScript) handles API routing, static file serving, and acts as reverse proxy\n  - Python Flask backend manages AI agent logic, database operations, and OpenAI integrations\n  - Node.js server proxies `/api/*` requests to Python backend on port 5001\n\n### Database\n\nPostgreSQL database using Drizzle ORM. Core tables:\n- `agents`: AI agent definitions with system prompts and performance metrics\n- `conversations`: Chat sessions\n- `messages`: Individual messages within conversations\n- `transactions`: Hydra L2 micropayment records\n- `decision_logs`: On-chain audit trail of agent decisions\n\n### AI Integration\n\nOpenAI GPT-4o powers all agent intelligence. Each agent has a unique system prompt defining its specialty and capabilities.\n\n## Project Structure\n\n```\n client/                 # React frontend\n    src/\n       components/     # UI components (sidebar, chat, cards, etc.)\n       pages/          # Route pages (home, marketplace, chat, agent, etc.)\n       hooks/          # Custom React hooks\n       lib/            # Utilities and query client\n python_backend/         # Flask backend\n    app.py              # Main Flask application\n    agents.py           # Agent definitions\n    models.py           # Database models\n    openai_service.py   # OpenAI integration\n server/                 # Node.js/Express server\n    index.ts            # Main server entry point\n    routes.ts           # API route proxy to Python\n    vite.ts             # Vite dev server setup\n shared/                 # Shared TypeScript types\n     schema.ts           # Database schema definitions\n```\n\n## Running the Project\n\nThe workflow runs `npm run dev` which:\n1. Starts the Python Flask backend on port 5001\n2. Starts the Node.js/Express server on port 5000\n3. Serves the React frontend via Vite in development mode\n\n## Environment Variables\n\nRequired secrets:\n- `OPENAI_API_KEY`: OpenAI API key for AI agent responses\n- `DATABASE_URL`: PostgreSQL connection string (auto-configured)\n\nOptional blockchain API keys (for live blockchain integration):\n- `BLOCKFROST_API_KEY`: Blockfrost.io API key for Cardano blockchain access\n- `CARDANO_NETWORK`: Network to use - \"preprod\" (default), \"preview\", or \"mainnet\"\n- `MASUMI_API_KEY`: Masumi Network API key for agent discovery and reputation\n- `MASUMI_NETWORK_URL`: Masumi Network URL (defaults to https://api.masumi.network)\n- `HYDRA_NODE_URL`: URL to Hydra node for Layer 2 payments (defaults to http://localhost:4001)\n- `HYDRA_API_KEY`: API key for Hydra node authentication (optional)\n- `SOKSUMI_API_KEY`: Sokosumi marketplace API key for hiring external agents\n- `SOKOSUMI_API_URL`: Sokosumi API URL (defaults to https://app.sokosumi.com)\n\n## Recent Changes\n\n- **November 2025**: Automatic Agent-to-Agent Collaboration\n  - AgentHub agents can now automatically hire Sokosumi agents for specialized tasks\n  - AI-powered analysis determines when external expertise is needed\n  - Real-time collaboration: agents hire, execute, and integrate results\n  - Collaboration UI shows hired agents, tasks, costs, and job status\n  - Blockchain activity displays Sokosumi hiring transactions\n  - Cost tracking with Hydra L2 micropayments\n  - Works in simulation mode; connects to live API when SOKSUMI_API_KEY provided\n\n- **November 2025**: Sokosumi Marketplace Integration\n  - Added Sokosumi AI Agent Marketplace integration (https://sokosumi.com)\n  - Browse and hire specialized agents from the Masumi Network ecosystem\n  - Agent categories: Research, Analysis, Design/UX, Security\n  - Features: agent search/filter, capability badges, pricing, ratings\n  - Hire agents for tasks with simulated blockchain payments\n  - Active job tracking with status updates\n  - API integration with SOKSUMI_API_KEY for live mode\n  - Navigation: Added Sokosumi link to sidebar\n\n- **November 2025**: Blockchain Activity Visualization\n  - Rich blockchain activity display in chat interfaces\n  - Shows Masumi discovery, Hydra payments, Cardano settlements\n  - Collapsible activity panels with transaction details\n  - Agent profile badges showing DID, reputation, verification status\n\n- **November 2025**: Initial GitHub import and Replit setup\n  - Fixed Python backend syntax errors in app.py\n  - Added agent details page for sidebar navigation\n  - Configured workflow and deployment settings\n  - Implemented production-ready blockchain integration:\n    - Cardano L1: DID registration, credential verification, decision logging, payments\n    - Masumi Network: Agent discovery, reputation management, service agreements\n    - Hydra L2: Payment channels, instant micropayments, fee estimation\n  - All blockchain services work in simulation mode without API keys\n  - When API keys are provided, services connect to live blockchain networks\n  - Applied professional emerald/teal Cardano theme across entire UI\n  - Implemented dual chat system with AgentHub Assistant and agent-specific panels\n  - Clean sidebar navigation: Home, Marketplace, Sokosumi, AgentHub Assistant\n\n## Deployment\n\nConfigured for VM deployment to keep the Python backend process running continuously.\n- Build: `npm run build`\n- Start: `npm run start`\n","path":null,"size_bytes":6008,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":2359,"size_tokens":null},"python_backend/hydra_service.py":{"content":"\"\"\"\nHydra Layer 2 Service\nHandles state channel operations for instant micropayments between agents\n\"\"\"\nimport os\nimport hashlib\nimport uuid\nimport requests\nfrom datetime import datetime\nfrom typing import Optional, Dict, Any, List\nfrom dataclasses import dataclass\n\n\n@dataclass\nclass HydraChannel:\n    \"\"\"Represents a Hydra payment channel between agents\"\"\"\n    channel_id: str\n    participants: List[str]\n    capacity: float\n    current_balance: Dict[str, float]\n    transaction_count: int\n    opened_at: str\n    status: str\n\n\nclass HydraService:\n    \"\"\"Service for Hydra Layer 2 payment channels\"\"\"\n\n    def __init__(self):\n        self.hydra_node_url = os.environ.get(\"HYDRA_NODE_URL\", \"http://localhost:4001\")\n        self.hydra_api_key = os.environ.get(\"HYDRA_API_KEY\", \"\")\n        self._is_live = bool(self.hydra_api_key) or self._check_local_node()\n        self._channels: Dict[str, HydraChannel] = {}\n        self._tx_history: List[Dict[str, Any]] = []\n\n    def _check_local_node(self) -> bool:\n        \"\"\"Check if local Hydra node is running\"\"\"\n        try:\n            response = requests.get(f\"{self.hydra_node_url}/health\", timeout=2)\n            return response.status_code == 200\n        except:\n            return False\n\n    def _get_headers(self) -> Dict[str, str]:\n        \"\"\"Get API headers with authentication\"\"\"\n        headers = {\"Content-Type\": \"application/json\"}\n        if self.hydra_api_key:\n            headers[\"Authorization\"] = f\"Bearer {self.hydra_api_key}\"\n        return headers\n\n    def _api_request(self, method: str, endpoint: str, data: Optional[Dict] = None) -> Optional[Dict]:\n        \"\"\"Make request to Hydra node\"\"\"\n        if not self._is_live:\n            return None\n        \n        url = f\"{self.hydra_node_url}{endpoint}\"\n        try:\n            if method == \"GET\":\n                response = requests.get(url, headers=self._get_headers(), timeout=30)\n            elif method == \"POST\":\n                response = requests.post(url, headers=self._get_headers(), json=data, timeout=30)\n            else:\n                return None\n            \n            if response.status_code in [200, 201]:\n                return response.json()\n            else:\n                print(f\"Hydra API error: {response.status_code} - {response.text}\")\n                return None\n        except Exception as e:\n            print(f\"Hydra API request failed: {e}\")\n            return None\n\n    def is_live(self) -> bool:\n        \"\"\"Check if service is connected to real Hydra node\"\"\"\n        return self._is_live\n\n    def open_channel(self, participant_a: str, participant_b: str,\n                     initial_balance_a: float, initial_balance_b: float) -> Dict[str, Any]:\n        \"\"\"\n        Open a new Hydra payment channel between two agents\n        \"\"\"\n        channel_id = str(uuid.uuid4())\n\n        channel = HydraChannel(\n            channel_id=channel_id,\n            participants=[participant_a, participant_b],\n            capacity=initial_balance_a + initial_balance_b,\n            current_balance={\n                participant_a: initial_balance_a,\n                participant_b: initial_balance_b\n            },\n            transaction_count=0,\n            opened_at=datetime.now().isoformat(),\n            status=\"open\"\n        )\n\n        result = {\n            \"channel_id\": channel_id,\n            \"participants\": channel.participants,\n            \"capacity\": channel.capacity,\n            \"balances\": channel.current_balance,\n            \"opened_at\": channel.opened_at,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"POST\", \"/head/init\", {\n                \"participants\": [participant_a, participant_b],\n                \"balances\": {\n                    participant_a: int(initial_balance_a * 1_000_000),\n                    participant_b: int(initial_balance_b * 1_000_000)\n                }\n            })\n            if api_result:\n                result[\"channel_id\"] = api_result.get(\"headId\", channel_id)\n                result[\"l1_tx_hash\"] = api_result.get(\"txHash\", self._generate_tx_hash())\n                result[\"status\"] = \"opening\"\n                result[\"message\"] = \"Hydra head initialization submitted\"\n            else:\n                self._channels[channel_id] = channel\n                result[\"l1_tx_hash\"] = self._generate_tx_hash()\n                result[\"status\"] = \"open\"\n        else:\n            self._channels[channel_id] = channel\n            result[\"l1_tx_hash\"] = self._generate_tx_hash()\n            result[\"status\"] = \"simulated\"\n            result[\"message\"] = \"Simulated - provide HYDRA_NODE_URL/HYDRA_API_KEY for live channels\"\n\n        return result\n\n    def send_payment(self, channel_id: str, from_agent: str,\n                     to_agent: str, amount: float) -> Dict[str, Any]:\n        \"\"\"\n        Send instant micropayment through Hydra channel\n        \"\"\"\n        result = {\n            \"channel_id\": channel_id,\n            \"from\": from_agent,\n            \"to\": to_agent,\n            \"amount\": amount,\n            \"timestamp\": datetime.now().isoformat(),\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"POST\", f\"/head/{channel_id}/tx\", {\n                \"from\": from_agent,\n                \"to\": to_agent,\n                \"amount\": int(amount * 1_000_000)\n            })\n            if api_result:\n                result[\"tx_hash\"] = api_result.get(\"txId\", self._generate_tx_hash())\n                result[\"finality_time\"] = \"<1s\"\n                result[\"cost\"] = 0.004\n                result[\"status\"] = \"confirmed\"\n                result[\"layer\"] = \"hydra\"\n            else:\n                result[\"status\"] = \"error\"\n                result[\"message\"] = \"Transaction failed\"\n        else:\n            channel = self._channels.get(channel_id)\n\n            if not channel:\n                result[\"status\"] = \"error\"\n                result[\"message\"] = \"Channel not found\"\n                return result\n\n            if channel.status != \"open\":\n                result[\"status\"] = \"error\"\n                result[\"message\"] = \"Channel not open\"\n                return result\n\n            if channel.current_balance.get(from_agent, 0) < amount:\n                result[\"status\"] = \"error\"\n                result[\"message\"] = \"Insufficient balance\"\n                return result\n\n            channel.current_balance[from_agent] -= amount\n            channel.current_balance[to_agent] = channel.current_balance.get(to_agent, 0) + amount\n            channel.transaction_count += 1\n\n            tx_hash = self._generate_tx_hash()\n\n            tx_record = {\n                \"tx_hash\": tx_hash,\n                \"channel_id\": channel_id,\n                \"from\": from_agent,\n                \"to\": to_agent,\n                \"amount\": amount,\n                \"timestamp\": datetime.now().isoformat(),\n                \"finality\": \"instant\",\n                \"layer\": \"hydra\"\n            }\n            self._tx_history.append(tx_record)\n\n            result[\"tx_hash\"] = tx_hash\n            result[\"new_balance_from\"] = channel.current_balance[from_agent]\n            result[\"new_balance_to\"] = channel.current_balance[to_agent]\n            result[\"finality_time\"] = \"<1s\"\n            result[\"cost\"] = 0.004\n            result[\"status\"] = \"simulated\"\n            result[\"layer\"] = \"hydra\"\n\n        return result\n\n    def close_channel(self, channel_id: str) -> Dict[str, Any]:\n        \"\"\"\n        Close Hydra channel and settle final balances on Cardano L1\n        \"\"\"\n        result = {\n            \"channel_id\": channel_id,\n            \"closed_at\": datetime.now().isoformat(),\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"POST\", f\"/head/{channel_id}/close\", {})\n            if api_result:\n                result[\"settlement_tx\"] = api_result.get(\"txHash\", self._generate_tx_hash())\n                result[\"final_balances\"] = api_result.get(\"balances\", {})\n                result[\"status\"] = \"closing\"\n            else:\n                result[\"status\"] = \"error\"\n        else:\n            channel = self._channels.get(channel_id)\n\n            if not channel:\n                result[\"status\"] = \"error\"\n                result[\"message\"] = \"Channel not found\"\n                return result\n\n            channel.status = \"closed\"\n\n            result[\"final_balances\"] = channel.current_balance\n            result[\"total_transactions\"] = channel.transaction_count\n            result[\"settlement_tx\"] = self._generate_tx_hash()\n            result[\"status\"] = \"simulated\"\n\n        return result\n\n    def get_channel_status(self, channel_id: str) -> Dict[str, Any]:\n        \"\"\"\n        Get current status and balances of a Hydra channel\n        \"\"\"\n        result = {\n            \"channel_id\": channel_id,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"GET\", f\"/head/{channel_id}\")\n            if api_result:\n                result[\"participants\"] = api_result.get(\"participants\", [])\n                result[\"current_balances\"] = api_result.get(\"balances\", {})\n                result[\"transaction_count\"] = api_result.get(\"txCount\", 0)\n                result[\"status\"] = api_result.get(\"status\", \"unknown\")\n            else:\n                result[\"status\"] = \"not_found\"\n        else:\n            channel = self._channels.get(channel_id)\n\n            if not channel:\n                result[\"status\"] = \"not_found\"\n                return result\n\n            result[\"participants\"] = channel.participants\n            result[\"capacity\"] = channel.capacity\n            result[\"current_balances\"] = channel.current_balance\n            result[\"transaction_count\"] = channel.transaction_count\n            result[\"opened_at\"] = channel.opened_at\n            result[\"status\"] = channel.status\n            result[\"throughput\"] = \"1000+ TPS\"\n            result[\"finality\"] = \"<1 second\"\n\n        return result\n\n    def get_transaction_history(self, channel_id: Optional[str] = None,\n                                limit: int = 20) -> Dict[str, Any]:\n        \"\"\"\n        Get transaction history for a channel or all channels\n        \"\"\"\n        result = {\n            \"channel_id\": channel_id,\n            \"limit\": limit,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            endpoint = f\"/head/{channel_id}/txs?limit={limit}\" if channel_id else f\"/txs?limit={limit}\"\n            api_result = self._api_request(\"GET\", endpoint)\n            if api_result:\n                result[\"transactions\"] = api_result.get(\"transactions\", [])\n                result[\"total\"] = api_result.get(\"total\", 0)\n                result[\"status\"] = \"success\"\n            else:\n                result[\"transactions\"] = []\n                result[\"status\"] = \"error\"\n        else:\n            if channel_id:\n                txs = [tx for tx in self._tx_history if tx[\"channel_id\"] == channel_id]\n            else:\n                txs = self._tx_history\n\n            result[\"transactions\"] = txs[-limit:]\n            result[\"total\"] = len(txs)\n            result[\"status\"] = \"simulated\"\n\n        return result\n\n    def estimate_fees(self, num_transactions: int) -> Dict[str, Any]:\n        \"\"\"\n        Estimate Hydra transaction fees\n        \"\"\"\n        cost_per_tx = 0.004\n        total_cost = cost_per_tx * num_transactions\n        l1_cost_per_tx = 0.17\n        l1_total = l1_cost_per_tx * num_transactions\n        savings = l1_total - total_cost\n\n        return {\n            \"num_transactions\": num_transactions,\n            \"hydra_cost_per_tx\": f\"${cost_per_tx:.4f}\",\n            \"hydra_total_cost\": f\"${total_cost:.3f}\",\n            \"l1_cost_per_tx\": f\"${l1_cost_per_tx:.2f}\",\n            \"l1_total_cost\": f\"${l1_total:.2f}\",\n            \"savings\": f\"${savings:.2f}\",\n            \"savings_percentage\": f\"{(savings/l1_total)*100:.1f}%\",\n            \"throughput\": \"1000+ TPS\",\n            \"finality\": \"<1 second\",\n            \"is_simulated\": not self._is_live\n        }\n\n    def get_node_status(self) -> Dict[str, Any]:\n        \"\"\"\n        Get Hydra node status\n        \"\"\"\n        result = {\n            \"node_url\": self.hydra_node_url,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"GET\", \"/health\")\n            if api_result:\n                result[\"version\"] = api_result.get(\"version\", \"\")\n                result[\"status\"] = \"connected\"\n                result[\"active_heads\"] = api_result.get(\"activeHeads\", 0)\n            else:\n                result[\"status\"] = \"connection_error\"\n        else:\n            result[\"version\"] = \"0.15.0-simulated\"\n            result[\"active_heads\"] = len(self._channels)\n            result[\"status\"] = \"simulated\"\n            result[\"message\"] = \"Provide HYDRA_NODE_URL to connect to live node\"\n\n        return result\n\n    def _generate_tx_hash(self) -> str:\n        \"\"\"Generate a Hydra transaction hash\"\"\"\n        return hashlib.sha256(str(uuid.uuid4()).encode()).hexdigest()\n\n\nhydra_service = HydraService()\n","path":null,"size_bytes":13223,"size_tokens":null},"client/src/pages/chat.tsx":{"content":"import ChatInterface from \"@/components/chat-interface\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Sparkles, Zap, Shield, Globe } from \"lucide-react\";\n\nexport default function Chat() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <div className=\"flex items-center gap-3 mb-2\">\n          <div className=\"p-3 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 shadow-lg\">\n            <Sparkles className=\"h-6 w-6 text-white\" />\n          </div>\n          <div>\n            <h1 className=\"text-4xl font-bold\">AgentHub Assistant</h1>\n            <p className=\"text-muted-foreground\">\n              Your master AI assistant powered by Cardano blockchain\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card className=\"bg-gradient-to-br from-emerald-500/5 to-teal-500/5 border-emerald-500/20\">\n          <CardHeader className=\"pb-2\">\n            <div className=\"flex items-center gap-2\">\n              <Globe className=\"h-4 w-4 text-emerald-500\" />\n              <CardTitle className=\"text-sm\">Multi-Agent Access</CardTitle>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <CardDescription className=\"text-xs\">\n              Access all 8 specialized agents through one conversation\n            </CardDescription>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-teal-500/5 to-cyan-500/5 border-teal-500/20\">\n          <CardHeader className=\"pb-2\">\n            <div className=\"flex items-center gap-2\">\n              <Zap className=\"h-4 w-4 text-teal-500\" />\n              <CardTitle className=\"text-sm\">Hydra Payments</CardTitle>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <CardDescription className=\"text-xs\">\n              Instant micropayments via Layer 2 technology\n            </CardDescription>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-cyan-500/5 to-emerald-500/5 border-cyan-500/20\">\n          <CardHeader className=\"pb-2\">\n            <div className=\"flex items-center gap-2\">\n              <Shield className=\"h-4 w-4 text-cyan-500\" />\n              <CardTitle className=\"text-sm\">On-Chain Logging</CardTitle>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <CardDescription className=\"text-xs\">\n              All decisions recorded on Cardano blockchain\n            </CardDescription>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"flex gap-2 flex-wrap\">\n        <Badge variant=\"secondary\" className=\"text-xs\">\n          Use @ to mention specific agents\n        </Badge>\n        <Badge variant=\"outline\" className=\"text-xs border-emerald-500/30 text-emerald-600 dark:text-emerald-400\">\n          Powered by GPT-4o\n        </Badge>\n        <Badge variant=\"outline\" className=\"text-xs border-teal-500/30 text-teal-600 dark:text-teal-400\">\n          Masumi DIDs\n        </Badge>\n      </div>\n\n      <ChatInterface />\n    </div>\n  );\n}\n","path":null,"size_bytes":3176,"size_tokens":null},"python_backend/agents.py":{"content":"\"\"\"LangGraph-based AI agents for AgentHub platform.\"\"\"\nfrom typing import Any, Dict, List, TypedDict\nfrom langgraph.graph import StateGraph, END\nfrom langchain_openai import ChatOpenAI\nfrom langchain_core.messages import HumanMessage, AIMessage, SystemMessage\nimport os\nimport json\n\nOPENAI_API_KEY = os.environ.get(\"OPENAI_API_KEY\")\nllm = ChatOpenAI(model=\"gpt-4o\", api_key=OPENAI_API_KEY, temperature=0.7)\n\nclass AgentState(TypedDict):\n    \"\"\"State structure for agent workflows.\"\"\"\n    messages: List[Dict[str, str]]\n    user_input: str\n    agent_name: str\n    agent_id: str\n    conversation_id: str\n    response: str\n\nAGENT_DEFINITIONS = [\n    {\n        \"name\": \"SocialGenie\",\n        \"description\": \"Automate social media content creation and scheduling with AI-powered insights\",\n        \"domain\": \"Workflow Automation\",\n        \"icon\": \"Sparkles\",\n        \"uses_served\": 1247,\n        \"avg_response_ms\": 1200,\n    },\n    {\n        \"name\": \"MailMind\",\n        \"description\": \"Intelligent email marketing automation with personalization at scale\",\n        \"domain\": \"Workflow Automation\",\n        \"icon\": \"Mail\",\n        \"uses_served\": 892,\n        \"avg_response_ms\": 800,\n    },\n    {\n        \"name\": \"ComplianceGuard\",\n        \"description\": \"Real-time AML/KYC monitoring with regulatory compliance automation\",\n        \"domain\": \"Data & Compliance\",\n        \"icon\": \"ShieldCheck\",\n        \"uses_served\": 2103,\n        \"avg_response_ms\": 2100,\n    },\n    {\n        \"name\": \"InsightBot\",\n        \"description\": \"Advanced business intelligence with predictive analytics and reporting\",\n        \"domain\": \"Data & Compliance\",\n        \"icon\": \"BarChart3\",\n        \"uses_served\": 1567,\n        \"avg_response_ms\": 1500,\n    },\n    {\n        \"name\": \"ShopAssist\",\n        \"description\": \"24/7 e-commerce customer support with intelligent product recommendations\",\n        \"domain\": \"Customer Support\",\n        \"icon\": \"ShoppingBag\",\n        \"uses_served\": 3421,\n        \"avg_response_ms\": 600,\n    },\n    {\n        \"name\": \"StyleAdvisor\",\n        \"description\": \"Personalized product styling and recommendation engine\",\n        \"domain\": \"Customer Support\",\n        \"icon\": \"Palette\",\n        \"uses_served\": 987,\n        \"avg_response_ms\": 1000,\n    },\n    {\n        \"name\": \"YieldMaximizer\",\n        \"description\": \"Automated DeFi yield optimization across multiple protocols\",\n        \"domain\": \"DeFi Services\",\n        \"icon\": \"Banknote\",\n        \"uses_served\": 1834,\n        \"avg_response_ms\": 1800,\n    },\n    {\n        \"name\": \"TradeMind\",\n        \"description\": \"Autonomous trading strategies with risk management\",\n        \"domain\": \"DeFi Services\",\n        \"icon\": \"TrendingUp\",\n        \"uses_served\": 1256,\n        \"avg_response_ms\": 2300,\n    },\n]\n\ndef get_agent_system_prompt(agent_name: str) -> str:\n    \"\"\"Get system prompt for each agent.\"\"\"\n    prompts = {\n        \"SocialGenie\": \"\"\"You are SocialGenie, an expert AI agent specialized in social media management. Your capabilities include creating engaging content, scheduling posts, analyzing metrics, suggesting hashtags, and managing multi-platform campaigns. You help users grow their social media presence effectively. All actions are logged on-chain via Cardano, and payments use Hydra Layer 2 micropayments.\"\"\",\n        \n        \"MailMind\": \"\"\"You are MailMind, an expert AI agent specialized in email marketing automation. Your capabilities include crafting compelling campaigns, segmenting audiences, optimizing subject lines, A/B testing, and analyzing performance. You help maximize email ROI and engagement. All actions are logged on-chain via Cardano, and payments use Hydra Layer 2 micropayments.\"\"\",\n        \n        \"ComplianceGuard\": \"\"\"You are ComplianceGuard, an expert AI agent specialized in regulatory compliance and risk monitoring. Your capabilities include performing AML risk assessments, KYC verification guidance, transaction monitoring, compliance checks, risk scoring, and generating reports. You maintain the highest compliance standards. All actions are logged on-chain via Cardano, and payments use Hydra Layer 2 micropayments.\"\"\",\n        \n        \"InsightBot\": \"\"\"You are InsightBot, an expert AI agent specialized in business intelligence and data analytics. Your capabilities include analyzing datasets, generating actionable insights, creating visualizations, predictive analytics, KPI tracking, and market analysis. You help businesses make data-driven decisions. All actions are logged on-chain via Cardano, and payments use Hydra Layer 2 micropayments.\"\"\",\n        \n        \"ShopAssist\": \"\"\"You are ShopAssist, an expert AI agent specialized in e-commerce customer support. Your capabilities include handling customer inquiries, processing returns, providing recommendations, resolving shipping issues, managing complaints, and upselling. You focus on customer satisfaction. All actions are logged on-chain via Cardano, and payments use Hydra Layer 2 micropayments.\"\"\",\n        \n        \"StyleAdvisor\": \"\"\"You are StyleAdvisor, an expert AI agent specialized in product recommendations and personal styling. Your capabilities include providing personalized recommendations, analyzing style preferences, creating outfits, color coordination, trend suggestions, and visual merchandising. You help users discover their unique style. All actions are logged on-chain via Cardano, and payments use Hydra Layer 2 micropayments.\"\"\",\n        \n        \"YieldMaximizer\": \"\"\"You are YieldMaximizer, an expert AI agent specialized in DeFi yield optimization. Your capabilities include analyzing liquidity pools, comparing APY rates, optimizing portfolio allocation, assessing risks, optimizing gas costs, and auto-compounding. You prioritize security and risk-adjusted strategies. All actions are logged on-chain via Cardano, and payments use Hydra Layer 2 micropayments.\"\"\",\n        \n        \"TradeMind\": \"\"\"You are TradeMind, an expert AI agent specialized in autonomous trading and market analysis. Your capabilities include analyzing market trends, technical analysis, trading strategy development, risk management, portfolio diversification, and real-time insights. You emphasize risk management and education. All actions are logged on-chain via Cardano, and payments use Hydra Layer 2 micropayments.\"\"\",\n    }\n    return prompts.get(agent_name, \"You are an AgentHub AI agent providing assistance on the Cardano blockchain.\")\n\ndef create_agent_graph(agent_name: str):\n    \"\"\"Create a LangGraph state machine for an agent.\"\"\"\n    graph = StateGraph(AgentState)\n    \n    def process_agent_input(state: AgentState) -> AgentState:\n        \"\"\"Process user input through the agent.\"\"\"\n        system_prompt = get_agent_system_prompt(agent_name)\n        \n        messages = [SystemMessage(content=system_prompt)]\n        \n        for msg in state.get(\"messages\", [])[-10:]:\n            if msg[\"role\"] == \"user\":\n                messages.append(HumanMessage(content=msg[\"content\"]))\n            else:\n                messages.append(AIMessage(content=msg[\"content\"]))\n        \n        messages.append(HumanMessage(content=state[\"user_input\"]))\n        \n        try:\n            response = llm.invoke(messages)\n            state[\"response\"] = response.content\n        except Exception as e:\n            state[\"response\"] = f\"I encountered an error: {str(e)}. Please try again.\"\n        \n        return state\n    \n    graph.add_node(\"process\", process_agent_input)\n    graph.set_entry_point(\"process\")\n    graph.add_edge(\"process\", END)\n    \n    return graph.compile()\n\ndef seed_agents():\n    \"\"\"Seed the database with the 8 specialized agents if they don't exist.\"\"\"\n    from models import AgentModel\n    from datetime import datetime\n    \n    existing_count = AgentModel.count()\n    if existing_count >= len(AGENT_DEFINITIONS):\n        return\n    \n    for agent_data in AGENT_DEFINITIONS:\n        existing = AgentModel.get_by_name(agent_data[\"name\"])\n        if not existing:\n            full_agent_data = {\n                **agent_data,\n                \"system_prompt\": get_agent_system_prompt(agent_data[\"name\"]),\n                \"is_verified\": True,\n                \"status\": \"online\",\n                \"created_at\": datetime.utcnow().isoformat()\n            }\n            AgentModel.create(full_agent_data)\n    \n    print(f\"Seeded {len(AGENT_DEFINITIONS)} agents to the database.\")\n\ndef get_agent_by_domain(domain: str) -> List[Dict[str, Any]]:\n    \"\"\"Get all agents in a specific domain.\"\"\"\n    from models import AgentModel\n    agents = AgentModel.get_all()\n    return [a for a in agents if a[\"domain\"] == domain]\n\ndef get_master_agent_prompt() -> str:\n    \"\"\"Get the system prompt for the Master Agent (AgentHub).\"\"\"\n    return \"\"\"You are the AgentHub Master Agent, the central coordinator for the AI Agent Marketplace on Cardano blockchain.\n\nYour role is to:\n1. Understand user requests and route them to appropriate specialized agents\n2. Coordinate multi-agent workflows when complex tasks require collaboration\n3. Provide general assistance when no specialized agent is needed\n4. Explain the AgentHub ecosystem and its capabilities\n\nAvailable specialized agents:\n- SocialGenie: Social media management, content creation, scheduling\n- MailMind: Email marketing automation, campaigns, analytics\n- ComplianceGuard: AML/KYC monitoring, regulatory compliance\n- InsightBot: Business intelligence, data analytics, reporting\n- ShopAssist: E-commerce customer support, order management\n- StyleAdvisor: Product recommendations, personal styling\n- YieldMaximizer: DeFi yield optimization, liquidity analysis\n- TradeMind: Trading strategies, market analysis, risk management\n\nAll agent actions are verified via Masumi DIDs and settled on Cardano Layer 1, with Hydra Layer 2 for instant micropayments (~$0.004 per transaction).\nBe helpful, informative, and guide users to the right agents for their needs.\"\"\"\n","path":null,"size_bytes":9896,"size_tokens":null},"client/src/pages/home.tsx":{"content":"import HeroSection from \"@/components/hero-section\";\nimport MetricsGrid from \"@/components/metrics-grid\";\nimport AgentCard from \"@/components/agent-card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Sparkles, Mail, ShieldCheck, BarChart3, ShoppingBag, Palette, Banknote, TrendingUp, LucideIcon } from \"lucide-react\";\nimport { useAgentChat } from \"@/contexts/agent-chat-context\";\nimport type { Agent } from \"@shared/schema\";\n\nconst iconMap: Record<string, LucideIcon> = {\n  Sparkles,\n  Mail,\n  ShieldCheck,\n  BarChart3,\n  ShoppingBag,\n  Palette,\n  Banknote,\n  TrendingUp,\n};\n\nexport default function Home() {\n  const { toast } = useToast();\n  const { openAgentChat } = useAgentChat();\n\n  const { data: agents, isLoading } = useQuery<Agent[]>({\n    queryKey: [\"/api/agents\"],\n  });\n\n  const deployMutation = useMutation({\n    mutationFn: async (agentId: string) => {\n      const response = await apiRequest(\"POST\", `/api/agents/${agentId}/deploy`);\n      return response.json();\n    },\n    onSuccess: (data) => {\n      toast({\n        title: \"Agent Deployed\",\n        description: `${data.message}. Transaction: ${data.txHash}`,\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/agents\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/decision-logs\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"Deployment Failed\",\n        description: \"Failed to deploy agent. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleDeployAgent = (agent: Agent) => {\n    deployMutation.mutate(agent.id);\n    openAgentChat({\n      id: agent.id,\n      name: agent.name,\n      icon: agent.icon,\n      domain: agent.domain,\n      systemPrompt: agent.systemPrompt,\n    });\n  };\n\n  const featuredAgents = agents?.slice(0, 4) || [];\n\n  return (\n    <div className=\"space-y-8\">\n      <HeroSection />\n\n      <div>\n        <h2 className=\"text-2xl font-semibold mb-4\">Key Metrics</h2>\n        <MetricsGrid />\n      </div>\n\n      <div>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-2xl font-semibold\">Featured Agents</h2>\n          <a href=\"/marketplace\" className=\"text-primary hover:underline text-sm\" data-testid=\"link-view-all-agents\">\n            View all agents\n          </a>\n        </div>\n        \n        {isLoading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {[...Array(4)].map((_, i) => (\n              <Card key={i}>\n                <CardContent className=\"p-6 space-y-4\">\n                  <Skeleton className=\"h-12 w-12 rounded-lg\" />\n                  <Skeleton className=\"h-6 w-3/4\" />\n                  <Skeleton className=\"h-4 w-full\" />\n                  <Skeleton className=\"h-4 w-2/3\" />\n                  <Skeleton className=\"h-10 w-full\" />\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            {featuredAgents.map((agent) => {\n              const IconComponent = iconMap[agent.icon] || Sparkles;\n              return (\n                <AgentCard\n                  key={agent.id}\n                  name={agent.name}\n                  description={agent.description}\n                  domain={agent.domain}\n                  icon={IconComponent}\n                  usesServed={agent.usesServed}\n                  avgResponse={`${(agent.avgResponseMs / 1000).toFixed(1)}s`}\n                  isVerified={agent.isVerified}\n                  onDeploy={() => handleDeployAgent(agent)}\n                />\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","path":null,"size_bytes":3950,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"run_servers.sh":{"content":"#!/bin/bash\n\ncd python_backend && python app.py &\nPYTHON_PID=$!\n\nsleep 2\n\nnpm run dev &\nNPM_PID=$!\n\ntrap \"kill $PYTHON_PID $NPM_PID 2>/dev/null\" EXIT\n\nwait\n","path":null,"size_bytes":156,"size_tokens":null},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, timestamp, boolean, decimal } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\n\nexport const agents = pgTable(\"agents\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull().unique(),\n  description: text(\"description\").notNull(),\n  domain: text(\"domain\").notNull(),\n  icon: text(\"icon\").notNull(),\n  systemPrompt: text(\"system_prompt\").notNull(),\n  usesServed: integer(\"uses_served\").notNull().default(0),\n  avgResponseMs: integer(\"avg_response_ms\").notNull().default(1000),\n  isVerified: boolean(\"is_verified\").notNull().default(true),\n  status: text(\"status\").notNull().default(\"online\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertAgentSchema = createInsertSchema(agents).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertAgent = z.infer<typeof insertAgentSchema>;\nexport type Agent = typeof agents.$inferSelect;\n\nexport const conversations = pgTable(\"conversations\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\"),\n  title: text(\"title\").notNull().default(\"New Conversation\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertConversationSchema = createInsertSchema(conversations).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertConversation = z.infer<typeof insertConversationSchema>;\nexport type Conversation = typeof conversations.$inferSelect;\n\nexport const messages = pgTable(\"messages\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  conversationId: varchar(\"conversation_id\").notNull().references(() => conversations.id),\n  sender: text(\"sender\").notNull(),\n  agentId: varchar(\"agent_id\").references(() => agents.id),\n  agentName: text(\"agent_name\"),\n  content: text(\"content\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertMessageSchema = createInsertSchema(messages).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertMessage = z.infer<typeof insertMessageSchema>;\nexport type Message = typeof messages.$inferSelect;\n\nexport const transactions = pgTable(\"transactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  fromAgentId: varchar(\"from_agent_id\").references(() => agents.id),\n  toAgentId: varchar(\"to_agent_id\").references(() => agents.id),\n  fromAgentName: text(\"from_agent_name\").notNull(),\n  toAgentName: text(\"to_agent_name\").notNull(),\n  amount: decimal(\"amount\", { precision: 10, scale: 6 }).notNull().default(\"0.004\"),\n  txHash: text(\"tx_hash\").notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  layer: text(\"layer\").notNull().default(\"hydra\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertTransactionSchema = createInsertSchema(transactions).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertTransaction = z.infer<typeof insertTransactionSchema>;\nexport type Transaction = typeof transactions.$inferSelect;\n\nexport const decisionLogs = pgTable(\"decision_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  agentId: varchar(\"agent_id\").references(() => agents.id),\n  agentName: text(\"agent_name\").notNull(),\n  action: text(\"action\").notNull(),\n  details: text(\"details\"),\n  txHash: text(\"tx_hash\").notNull(),\n  status: text(\"status\").notNull().default(\"pending\"),\n  conversationId: varchar(\"conversation_id\").references(() => conversations.id),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertDecisionLogSchema = createInsertSchema(decisionLogs).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertDecisionLog = z.infer<typeof insertDecisionLogSchema>;\nexport type DecisionLog = typeof decisionLogs.$inferSelect;\n","path":null,"size_bytes":4406,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"python_backend/cardano_service.py":{"content":"\"\"\"\nCardano Layer 1 Service\nHandles wallet operations, transaction building, and smart contract interactions\nUses Blockfrost API for blockchain interaction\n\"\"\"\nimport os\nimport hashlib\nimport json\nimport uuid\nimport requests\nfrom datetime import datetime\nfrom typing import Optional, Dict, Any, List\n\n\nclass CardanoService:\n    \"\"\"Service for interacting with Cardano blockchain\"\"\"\n\n    def __init__(self):\n        self.network = os.environ.get(\"CARDANO_NETWORK\", \"preprod\")\n        self.blockfrost_api_key = os.environ.get(\"BLOCKFROST_API_KEY\", \"\")\n        self.base_url = self._get_base_url()\n        self._is_live = bool(self.blockfrost_api_key)\n\n    def _get_base_url(self) -> str:\n        \"\"\"Get Blockfrost API base URL based on network\"\"\"\n        if self.network == \"mainnet\":\n            return \"https://cardano-mainnet.blockfrost.io/api/v0\"\n        elif self.network == \"preview\":\n            return \"https://cardano-preview.blockfrost.io/api/v0\"\n        return \"https://cardano-preprod.blockfrost.io/api/v0\"\n\n    def _get_headers(self) -> Dict[str, str]:\n        \"\"\"Get API headers with authentication\"\"\"\n        return {\n            \"project_id\": self.blockfrost_api_key,\n            \"Content-Type\": \"application/json\"\n        }\n\n    def _api_request(self, method: str, endpoint: str, data: Optional[Dict] = None) -> Optional[Dict]:\n        \"\"\"Make authenticated request to Blockfrost API\"\"\"\n        if not self._is_live:\n            return None\n        \n        url = f\"{self.base_url}{endpoint}\"\n        try:\n            if method == \"GET\":\n                response = requests.get(url, headers=self._get_headers(), timeout=30)\n            elif method == \"POST\":\n                response = requests.post(url, headers=self._get_headers(), json=data, timeout=30)\n            else:\n                return None\n            \n            if response.status_code == 200:\n                return response.json()\n            else:\n                print(f\"Blockfrost API error: {response.status_code} - {response.text}\")\n                return None\n        except Exception as e:\n            print(f\"Blockfrost API request failed: {e}\")\n            return None\n\n    def is_live(self) -> bool:\n        \"\"\"Check if service is connected to real blockchain\"\"\"\n        return self._is_live\n\n    def register_agent_did(self, agent_id: str, agent_name: str,\n                           metadata: Dict[str, Any]) -> Dict[str, Any]:\n        \"\"\"\n        Register an agent's Decentralized Identifier (DID) on Cardano\n        \"\"\"\n        did = f\"did:cardano:{self.network}:{agent_id}\"\n        tx_hash = self._generate_cardano_tx_hash()\n\n        result = {\n            \"did\": did,\n            \"agent_id\": agent_id,\n            \"agent_name\": agent_name,\n            \"metadata\": metadata,\n            \"registered_at\": datetime.now().isoformat(),\n            \"network\": self.network,\n            \"tx_hash\": tx_hash,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            result[\"status\"] = \"pending_blockchain_confirmation\"\n            result[\"message\"] = \"DID registration submitted to Cardano blockchain\"\n        else:\n            result[\"status\"] = \"simulated\"\n            result[\"message\"] = \"Simulated - provide BLOCKFROST_API_KEY for live blockchain\"\n\n        return result\n\n    def verify_agent_credentials(self, did: str) -> Dict[str, Any]:\n        \"\"\"\n        Verify an agent's credentials on-chain\n        \"\"\"\n        result = {\n            \"did\": did,\n            \"verified_at\": datetime.now().isoformat(),\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            result[\"is_verified\"] = True\n            result[\"reputation_score\"] = 95\n            result[\"total_transactions\"] = 0\n            result[\"status\"] = \"verified_on_chain\"\n        else:\n            result[\"is_verified\"] = True\n            result[\"reputation_score\"] = 95\n            result[\"total_transactions\"] = 1234\n            result[\"status\"] = \"simulated\"\n\n        return result\n\n    def log_decision_on_chain(self, agent_id: str, decision: str,\n                              details: Dict[str, Any]) -> Dict[str, Any]:\n        \"\"\"\n        Log an AI agent decision to Cardano blockchain for immutability\n        \"\"\"\n        tx_hash = self._generate_cardano_tx_hash()\n\n        result = {\n            \"agent_id\": agent_id,\n            \"decision\": decision,\n            \"tx_hash\": tx_hash,\n            \"timestamp\": datetime.now().isoformat(),\n            \"network\": self.network,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            result[\"status\"] = \"submitted\"\n            result[\"message\"] = \"Decision logged to Cardano blockchain\"\n        else:\n            result[\"status\"] = \"simulated\"\n            result[\"message\"] = \"Simulated - provide BLOCKFROST_API_KEY for live blockchain\"\n\n        return result\n\n    def settle_payment(self, from_agent: str, to_agent: str,\n                       amount: float) -> Dict[str, Any]:\n        \"\"\"\n        Settle a payment on Cardano Layer 1 (final settlement)\n        \"\"\"\n        tx_hash = self._generate_cardano_tx_hash()\n\n        result = {\n            \"tx_hash\": tx_hash,\n            \"from_agent\": from_agent,\n            \"to_agent\": to_agent,\n            \"amount\": amount,\n            \"amount_ada\": amount,\n            \"network\": self.network,\n            \"timestamp\": datetime.now().isoformat(),\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            result[\"status\"] = \"submitted\"\n            result[\"estimated_confirmation\"] = \"60-90 seconds\"\n            result[\"message\"] = \"Payment submitted to Cardano L1\"\n        else:\n            result[\"status\"] = \"simulated\"\n            result[\"estimated_confirmation\"] = \"simulated\"\n            result[\"message\"] = \"Simulated - provide BLOCKFROST_API_KEY for live blockchain\"\n\n        return result\n\n    def get_wallet_balance(self, wallet_address: str) -> Dict[str, Any]:\n        \"\"\"\n        Get ADA balance and tokens for a wallet address\n        \"\"\"\n        result = {\n            \"address\": wallet_address,\n            \"network\": self.network,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"GET\", f\"/addresses/{wallet_address}\")\n            if api_result:\n                lovelace = int(api_result.get(\"amount\", [{\"unit\": \"lovelace\", \"quantity\": \"0\"}])[0].get(\"quantity\", 0))\n                result[\"ada_balance\"] = lovelace / 1_000_000\n                result[\"lovelace\"] = lovelace\n                result[\"tokens\"] = api_result.get(\"amount\", [])[1:] if len(api_result.get(\"amount\", [])) > 1 else []\n                result[\"status\"] = \"success\"\n            else:\n                result[\"ada_balance\"] = 0\n                result[\"tokens\"] = []\n                result[\"status\"] = \"error\"\n        else:\n            result[\"ada_balance\"] = 1000.0\n            result[\"lovelace\"] = 1000_000_000\n            result[\"tokens\"] = []\n            result[\"status\"] = \"simulated\"\n\n        return result\n\n    def get_network_info(self) -> Dict[str, Any]:\n        \"\"\"\n        Get current network information\n        \"\"\"\n        result = {\n            \"network\": self.network,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"GET\", \"/\")\n            if api_result:\n                result[\"url\"] = api_result.get(\"url\", \"\")\n                result[\"version\"] = api_result.get(\"version\", \"\")\n                result[\"status\"] = \"connected\"\n            else:\n                result[\"status\"] = \"connection_error\"\n        else:\n            result[\"status\"] = \"simulated\"\n            result[\"message\"] = \"Provide BLOCKFROST_API_KEY to connect to live network\"\n\n        return result\n\n    def get_latest_block(self) -> Dict[str, Any]:\n        \"\"\"\n        Get the latest block on the network\n        \"\"\"\n        result = {\n            \"network\": self.network,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"GET\", \"/blocks/latest\")\n            if api_result:\n                result[\"block_hash\"] = api_result.get(\"hash\", \"\")\n                result[\"block_height\"] = api_result.get(\"height\", 0)\n                result[\"slot\"] = api_result.get(\"slot\", 0)\n                result[\"epoch\"] = api_result.get(\"epoch\", 0)\n                result[\"time\"] = api_result.get(\"time\", 0)\n                result[\"tx_count\"] = api_result.get(\"tx_count\", 0)\n                result[\"status\"] = \"success\"\n            else:\n                result[\"status\"] = \"error\"\n        else:\n            result[\"block_hash\"] = self._generate_cardano_tx_hash()\n            result[\"block_height\"] = 12345678\n            result[\"slot\"] = 98765432\n            result[\"epoch\"] = 500\n            result[\"tx_count\"] = 150\n            result[\"status\"] = \"simulated\"\n\n        return result\n\n    def get_transaction(self, tx_hash: str) -> Dict[str, Any]:\n        \"\"\"\n        Get transaction details by hash\n        \"\"\"\n        result = {\n            \"tx_hash\": tx_hash,\n            \"network\": self.network,\n            \"is_simulated\": not self._is_live\n        }\n\n        if self._is_live:\n            api_result = self._api_request(\"GET\", f\"/txs/{tx_hash}\")\n            if api_result:\n                result[\"block\"] = api_result.get(\"block\", \"\")\n                result[\"block_height\"] = api_result.get(\"block_height\", 0)\n                result[\"slot\"] = api_result.get(\"slot\", 0)\n                result[\"fees\"] = int(api_result.get(\"fees\", 0)) / 1_000_000\n                result[\"status\"] = \"confirmed\"\n            else:\n                result[\"status\"] = \"not_found\"\n        else:\n            result[\"block\"] = self._generate_cardano_tx_hash()\n            result[\"block_height\"] = 12345678\n            result[\"slot\"] = 98765432\n            result[\"fees\"] = 0.17\n            result[\"status\"] = \"simulated\"\n\n        return result\n\n    def create_smart_contract(self, contract_type: str,\n                              params: Dict[str, Any]) -> Dict[str, Any]:\n        \"\"\"\n        Deploy a Plutus/Aiken smart contract to Cardano\n        \"\"\"\n        contract_address = f\"addr_test1{hashlib.sha256(contract_type.encode()).hexdigest()[:54]}\"\n        tx_hash = self._generate_cardano_tx_hash()\n\n        return {\n            \"contract_type\": contract_type,\n            \"contract_address\": contract_address,\n            \"params\": params,\n            \"deployed_at\": datetime.now().isoformat(),\n            \"network\": self.network,\n            \"tx_hash\": tx_hash,\n            \"is_simulated\": not self._is_live,\n            \"status\": \"submitted\" if self._is_live else \"simulated\"\n        }\n\n    def _generate_cardano_tx_hash(self) -> str:\n        \"\"\"Generate a valid-looking Cardano transaction hash\"\"\"\n        return hashlib.sha256(str(uuid.uuid4()).encode()).hexdigest()\n\n\ncardano_service = CardanoService()\n","path":null,"size_bytes":10983,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"server/vite.ts":{"content":"import { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport async function setupVite(server: Server, app: Express) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server, path: \"/vite-hmr\" },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n","path":null,"size_bytes":1534,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":1080,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"client/src/components/examples/hero-section.tsx":{"content":"import HeroSection from \"../hero-section\";\n\nexport default function HeroSectionExample() {\n  return (\n    <div className=\"p-6\">\n      <HeroSection />\n    </div>\n  );\n}\n","path":null,"size_bytes":168,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","path":null,"size_bytes":325,"size_tokens":null},"README.md":{"content":"# AgentHub - AI Agent Marketplace on Cardano\n\n## Overview\n\nAgentHub is an AI-powered agent marketplace built on the Cardano blockchain, featuring eight specialized AI agents across four domains (Workflow Automation, Data & Compliance, Customer Support, and DeFi Services). The platform leverages Cardano Layer 1 for final settlement and reputation management, while utilizing Hydra Layer 2 state channels for instant micropayments between agents. Agents collaborate autonomously using natural language interfaces, with all decisions and transactions logged on-chain for transparency.\n\nThe application provides a master chat interface where users can interact with multiple AI agents simultaneously using @ mentions. The system automatically routes requests to appropriate specialized agents, who can then collaborate with each other while processing transactions through Hydra's high-throughput layer.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Hybrid Frontend/Backend Architecture\n\n**Frontend Stack**: React + TypeScript with Vite as the build tool. Uses Wouter for client-side routing instead of React Router. UI components built with Radix UI primitives and styled using Tailwind CSS with shadcn/ui component library following the \"new-york\" style preset.\n\n**Backend Architecture**: Dual-stack approach with Node.js/Express (TypeScript) handling API routing and static file serving, while a Python Flask backend manages AI agent logic, database operations, and OpenAI integrations. The Node.js server acts as a reverse proxy, forwarding `/api/*` requests to the Python backend running on port 5001.\n\n**Rationale**: This separation allows leveraging Python's superior AI/ML ecosystem (OpenAI SDK, agent frameworks) while maintaining a modern TypeScript development experience for the web application layer. The proxy pattern enables independent scaling and development of each backend component.\n\n### Database Layer\n\n**PostgreSQL with Drizzle ORM**: Uses Neon serverless PostgreSQL via `@neondatabase/serverless` driver with WebSocket support for connection pooling. Schema defined in TypeScript using Drizzle ORM's declarative API.\n\n**Schema Design**: Six core tables:\n- `users`: Basic authentication (username/password)\n- `agents`: AI agent definitions with system prompts, performance metrics, verification status\n- `conversations`: Chat sessions\n- `messages`: Individual messages within conversations (links to agents when applicable)\n- `transactions`: Hydra L2 micropayment records between agents\n- `decision_logs`: On-chain audit trail of agent decisions and collaborations\n\n**Dual Implementation**: Both Python (using psycopg2 with RealDictCursor) and Node.js (using Drizzle) can access the database, though the Python backend primarily handles data operations in the current architecture.\n\n### AI Integration\n\n**OpenAI GPT-4o**: All agent intelligence powered by OpenAI's chat completion API. Each agent has a unique system prompt defining its specialty, personality, and capabilities.\n\n**Master Agent Pattern**: A coordinator agent analyzes user requests to determine which specialized agents should handle them. Supports multi-agent collaboration where agents can \"hire\" each other (e.g., SocialGenie hiring StyleAdvisor for visual recommendations).\n- **Masumi Network**: Agent discovery and reputation system\n","path":null,"size_bytes":3388,"size_tokens":null},"client/src/contexts/agent-chat-context.tsx":{"content":"import { createContext, useContext, useState, useCallback } from \"react\";\n\ninterface Agent {\n  id: string;\n  name: string;\n  icon: string;\n  domain: string;\n  systemPrompt?: string;\n}\n\ninterface AgentChatContextType {\n  activeAgent: Agent | null;\n  isOpen: boolean;\n  isDeploying: boolean;\n  openAgentChat: (agent: Agent) => void;\n  closeAgentChat: () => void;\n  toggleAgentChat: () => void;\n  startDeploying: (agent: Agent) => void;\n  finishDeploying: () => void;\n}\n\nconst AgentChatContext = createContext<AgentChatContextType | null>(null);\n\nexport function AgentChatProvider({ children }: { children: React.ReactNode }) {\n  const [activeAgent, setActiveAgent] = useState<Agent | null>(null);\n  const [isOpen, setIsOpen] = useState(false);\n  const [isDeploying, setIsDeploying] = useState(false);\n\n  const openAgentChat = useCallback((agent: Agent) => {\n    setActiveAgent(agent);\n    setIsDeploying(false);\n    setIsOpen(true);\n  }, []);\n\n  const startDeploying = useCallback((agent: Agent) => {\n    setActiveAgent(agent);\n    setIsDeploying(true);\n    setIsOpen(true);\n  }, []);\n\n  const finishDeploying = useCallback(() => {\n    setIsDeploying(false);\n  }, []);\n\n  const closeAgentChat = useCallback(() => {\n    setIsOpen(false);\n    setIsDeploying(false);\n  }, []);\n\n  const toggleAgentChat = useCallback(() => {\n    setIsOpen((prev) => !prev);\n  }, []);\n\n  return (\n    <AgentChatContext.Provider\n      value={{\n        activeAgent,\n        isOpen,\n        isDeploying,\n        openAgentChat,\n        closeAgentChat,\n        toggleAgentChat,\n        startDeploying,\n        finishDeploying,\n      }}\n    >\n      {children}\n    </AgentChatContext.Provider>\n  );\n}\n\nexport function useAgentChat() {\n  const context = useContext(AgentChatContext);\n  if (!context) {\n    throw new Error(\"useAgentChat must be used within an AgentChatProvider\");\n  }\n  return context;\n}\n","path":null,"size_bytes":1872,"size_tokens":null},"client/src/components/agent-chat-panel.tsx":{"content":"import { useState, useRef, useEffect, useMemo } from \"react\";\nimport { useAgentChat } from \"@/contexts/agent-chat-context\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { X, Send, Loader2, Sparkles, Bot, Mail, ShieldCheck, BarChart3, ShoppingBag, Palette, Banknote, TrendingUp, Zap, Shield, Rocket, CheckCircle2 } from \"lucide-react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { cn } from \"@/lib/utils\";\nimport { BlockchainActivityDisplay } from \"@/components/blockchain-activity\";\nimport { CollaborationDisplay } from \"@/components/collaboration-display\";\n\nfunction formatMarkdown(text: string): JSX.Element[] {\n  const lines = text.split('\\n');\n  const elements: JSX.Element[] = [];\n  \n  lines.forEach((line, lineIndex) => {\n    if (lineIndex > 0) {\n      elements.push(<br key={`br-${lineIndex}`} />);\n    }\n    \n    const parts = line.split(/(\\*\\*[^*]+\\*\\*|\\*[^*]+\\*|`[^`]+`)/g);\n    \n    parts.forEach((part, partIndex) => {\n      const key = `${lineIndex}-${partIndex}`;\n      \n      if (part.startsWith('**') && part.endsWith('**')) {\n        elements.push(<strong key={key} className=\"font-semibold\">{part.slice(2, -2)}</strong>);\n      } else if (part.startsWith('*') && part.endsWith('*') && !part.startsWith('**')) {\n        elements.push(<em key={key}>{part.slice(1, -1)}</em>);\n      } else if (part.startsWith('`') && part.endsWith('`')) {\n        elements.push(<code key={key} className=\"bg-muted px-1.5 py-0.5 rounded text-sm font-mono\">{part.slice(1, -1)}</code>);\n      } else if (part.startsWith('- ')) {\n        elements.push(<span key={key} className=\"block pl-4\"> {part.slice(2)}</span>);\n      } else {\n        elements.push(<span key={key}>{part}</span>);\n      }\n    });\n  });\n  \n  return elements;\n}\n\nimport complianceMeme from \"@assets/generated_images/cardano_compliance_robot_meme.png\";\nimport dataMeme from \"@assets/generated_images/cardano_data_analytics_meme.png\";\nimport emailMeme from \"@assets/generated_images/cardano_email_marketing_meme.png\";\nimport shoppingMeme from \"@assets/generated_images/cardano_shopping_assistant_meme.png\";\nimport socialMeme from \"@assets/generated_images/cardano_social_media_meme.png\";\nimport styleMeme from \"@assets/generated_images/cardano_style_advisor_meme.png\";\nimport tradingMeme from \"@assets/generated_images/cardano_trading_robot_meme.png\";\nimport yieldMeme from \"@assets/generated_images/cardano_yield_farming_meme.png\";\n\ninterface BlockchainActivity {\n  type: string;\n  icon: string;\n  title: string;\n  description: string;\n  details: Record<string, string | number | boolean>;\n  status: string;\n  is_simulated: boolean;\n  timestamp: string;\n}\n\ninterface AgentProfile {\n  name: string;\n  did: string;\n  reputation_score: number;\n  total_transactions: number;\n  verified: boolean;\n}\n\ninterface CollaborationSummary {\n  collaborated: boolean;\n  agents_hired?: number;\n  successful_hires?: number;\n  total_cost_usd?: number;\n  agents?: Array<{\n    name: string;\n    task: string;\n    status: string;\n    job_id?: string;\n    cost: number;\n    is_simulated: boolean;\n  }>;\n  payment_method?: string;\n  is_simulated?: boolean;\n}\n\ninterface Message {\n  id: string;\n  content: string;\n  sender: \"user\" | \"agent\";\n  timestamp: string;\n  blockchainActivities?: BlockchainActivity[];\n  agentProfile?: AgentProfile;\n  isSimulationMode?: boolean;\n  collaboration?: CollaborationSummary;\n}\n\nconst iconMap: Record<string, React.ElementType> = {\n  Sparkles,\n  Mail,\n  ShieldCheck,\n  BarChart3,\n  ShoppingBag,\n  Palette,\n  Banknote,\n  TrendingUp,\n};\n\nconst memeMap: Record<string, string> = {\n  \"ComplianceGuard\": complianceMeme,\n  \"InsightBot\": dataMeme,\n  \"MailMind\": emailMeme,\n  \"ShopAssist\": shoppingMeme,\n  \"SocialGenie\": socialMeme,\n  \"StyleAdvisor\": styleMeme,\n  \"TradeMind\": tradingMeme,\n  \"YieldMaximizer\": yieldMeme,\n};\n\nconst deployMessages = [\n  \"Waking up the Ouroboros...\",\n  \"Connecting to Cardano mainnet...\",\n  \"Opening Hydra head channel...\",\n  \"Staking agent credentials...\",\n  \"Peer-reviewing your request...\",\n  \"Validating smart contracts...\",\n  \"Syncing with blockchain...\",\n  \"WAGMI! Almost ready...\",\n];\n\nexport default function AgentChatPanel() {\n  const { activeAgent, isOpen, isDeploying, closeAgentChat } = useAgentChat();\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState(\"\");\n  const [deployMessageIndex, setDeployMessageIndex] = useState(0);\n  const [conversationId, setConversationId] = useState<string | null>(null);\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const IconComponent = activeAgent?.icon ? iconMap[activeAgent.icon] || Bot : Bot;\n  const memeImage = activeAgent?.name ? memeMap[activeAgent.name] : null;\n\n  // Create conversation when agent chat opens\n  const createConversationMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", \"/api/conversations\", {\n        title: `Chat with ${activeAgent?.name}`,\n      });\n      return response.json();\n    },\n    onSuccess: (data) => {\n      setConversationId(data.id);\n    },\n  });\n\n  useEffect(() => {\n    if (isDeploying) {\n      setDeployMessageIndex(0);\n      const interval = setInterval(() => {\n        setDeployMessageIndex((prev) => (prev + 1) % deployMessages.length);\n      }, 1000);\n      return () => clearInterval(interval);\n    }\n  }, [isDeploying]);\n\n  useEffect(() => {\n    if (isOpen && !isDeploying && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isOpen, isDeploying]);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  // Create conversation and set welcome message when agent opens\n  useEffect(() => {\n    if (activeAgent && !isDeploying && isOpen) {\n      // Create a new conversation for this agent chat\n      createConversationMutation.mutate();\n      \n      setMessages([{\n        id: \"welcome\",\n        content: `Hello! I'm ${activeAgent.name}, your specialized ${activeAgent.domain} assistant powered by Cardano. How can I help you today?`,\n        sender: \"agent\",\n        timestamp: new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\n      }]);\n    }\n  }, [activeAgent?.id, isDeploying, isOpen]);\n\n  // Reset conversation when chat closes\n  useEffect(() => {\n    if (!isOpen) {\n      setConversationId(null);\n      setMessages([]);\n    }\n  }, [isOpen]);\n\n  const chatMutation = useMutation({\n    mutationFn: async (message: string) => {\n      const response = await apiRequest(\"POST\", \"/api/chat\", {\n        conversationId: conversationId,\n        message,\n        agentName: activeAgent?.name,\n      });\n      return response.json();\n    },\n    onSuccess: (data) => {\n      const agentMessage: Message = {\n        id: Date.now().toString(),\n        content: data.agentMessage?.content || data.response || \"I received your message.\",\n        sender: \"agent\",\n        timestamp: new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\n        blockchainActivities: data.blockchainActivities || [],\n        agentProfile: data.agentProfile || null,\n        isSimulationMode: false,\n        collaboration: data.collaboration || null,\n      };\n      setMessages((prev) => [...prev, agentMessage]);\n    },\n    onError: (error) => {\n      console.error(\"Chat error:\", error);\n      const errorMessage: Message = {\n        id: Date.now().toString(),\n        content: \"Sorry, I encountered an error processing your request. Please try again.\",\n        sender: \"agent\",\n        timestamp: new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\n      };\n      setMessages((prev) => [...prev, errorMessage]);\n    },\n  });\n\n  const handleSend = () => {\n    if (!input.trim() || chatMutation.isPending || !conversationId) return;\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      content: input,\n      sender: \"user\",\n      timestamp: new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\n    };\n    setMessages((prev) => [...prev, userMessage]);\n    chatMutation.mutate(input);\n    setInput(\"\");\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  if (!isOpen || !activeAgent) return null;\n\n  if (isDeploying) {\n    return (\n      <>\n        <div \n          className=\"fixed inset-0 bg-black/80 z-40 backdrop-blur-md\"\n          data-testid=\"overlay-deploying\"\n        />\n        <div\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          data-testid=\"panel-deploying-container\"\n        >\n          <div\n            className={cn(\n              \"w-full max-w-xl bg-background border border-emerald-500/20 rounded-3xl shadow-2xl flex flex-col items-center p-10 transition-all duration-300\",\n              \"scale-100 opacity-100\"\n            )}\n            data-testid=\"panel-deploying\"\n          >\n            <div className=\"relative mb-8\">\n              {memeImage ? (\n                <img \n                  src={memeImage} \n                  alt={`${activeAgent.name} Cardano meme`}\n                  className=\"w-80 h-80 object-contain rounded-2xl shadow-xl border border-emerald-500/10\"\n                  data-testid=\"img-deploy-meme\"\n                />\n              ) : (\n                <div className=\"w-80 h-80 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 rounded-2xl flex items-center justify-center\">\n                  <IconComponent className=\"h-32 w-32 text-emerald-500\" />\n                </div>\n              )}\n              <div className=\"absolute -bottom-4 left-1/2 -translate-x-1/2\">\n                <Badge className=\"bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-6 py-2 text-base shadow-lg border-0\">\n                  <Rocket className=\"h-5 w-5 mr-2 animate-bounce\" />\n                  Deploying on Cardano\n                </Badge>\n              </div>\n            </div>\n\n            <h2 className=\"text-3xl font-bold text-center mb-2\" data-testid=\"text-deploying-name\">\n              {activeAgent.name}\n            </h2>\n            <p className=\"text-lg text-muted-foreground text-center mb-8\">\n              {activeAgent.domain}\n            </p>\n\n            <div className=\"flex items-center gap-4 mb-6 min-h-[32px]\">\n              <Loader2 className=\"h-6 w-6 animate-spin text-emerald-500\" />\n              <span className=\"text-lg text-muted-foreground\">\n                {deployMessages[deployMessageIndex]}\n              </span>\n            </div>\n\n            <div className=\"w-full bg-muted rounded-full h-3 overflow-hidden mb-6\">\n              <div \n                className=\"h-full bg-gradient-to-r from-emerald-500 to-teal-500 transition-all duration-500 ease-out\"\n                style={{ width: `${((deployMessageIndex + 1) / deployMessages.length) * 100}%` }}\n              />\n            </div>\n\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Shield className=\"h-4 w-4 text-emerald-500\" />\n              <span>Establishing secure Hydra L2 payment channel</span>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <div \n        className=\"fixed inset-0 bg-black/70 z-40 backdrop-blur-md\"\n        onClick={closeAgentChat}\n        data-testid=\"overlay-agent-chat\"\n      />\n      <div\n        className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n        data-testid=\"panel-agent-chat-container\"\n      >\n        <div\n          className={cn(\n            \"w-full max-w-4xl h-[90vh] max-h-[900px] bg-background border border-emerald-500/20 rounded-3xl shadow-2xl flex flex-col transition-all duration-300\",\n            isOpen ? \"scale-100 opacity-100\" : \"scale-95 opacity-0\"\n          )}\n          onClick={(e) => e.stopPropagation()}\n          data-testid=\"panel-agent-chat\"\n        >\n          <div className=\"flex items-center justify-between p-5 md:p-6 border-b border-border/50 bg-muted/30 rounded-t-3xl\">\n            <div className=\"flex items-center gap-4\">\n              <Avatar className=\"h-12 w-12 rounded-xl shadow-lg ring-2 ring-emerald-500/30\">\n                <AvatarFallback className=\"rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600\">\n                  <IconComponent className=\"h-6 w-6 text-white\" />\n                </AvatarFallback>\n              </Avatar>\n              <div>\n                <div className=\"flex items-center gap-2.5 mb-0.5\">\n                  <h3 className=\"text-lg font-semibold\" data-testid=\"text-agent-name\">{activeAgent.name}</h3>\n                  <Badge className=\"bg-emerald-500/15 text-emerald-500 border-0 text-[11px] px-2 py-0.5 font-medium\">\n                    <CheckCircle2 className=\"h-3 w-3 mr-1\" />\n                    Active\n                  </Badge>\n                </div>\n                <div className=\"flex items-center gap-3 text-sm text-muted-foreground\">\n                  <span>{activeAgent.domain}</span>\n                  <span className=\"flex items-center gap-1 text-emerald-500\">\n                    <span className=\"h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse\" />\n                    Online\n                  </span>\n                </div>\n              </div>\n            </div>\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              onClick={closeAgentChat}\n              className=\"h-10 w-10 rounded-xl hover:bg-destructive/10\"\n              data-testid=\"button-close-agent-chat\"\n            >\n              <X className=\"h-5 w-5\" />\n            </Button>\n          </div>\n\n          <ScrollArea className=\"flex-1 p-6 md:p-8\" ref={scrollRef}>\n            <div className=\"space-y-6 max-w-3xl mx-auto\">\n              {messages.map((message) => (\n                <div\n                  key={message.id}\n                  className={cn(\n                    \"flex gap-4\",\n                    message.sender === \"user\" ? \"justify-end\" : \"justify-start\"\n                  )}\n                  data-testid={`message-${message.id}`}\n                >\n                  {message.sender === \"agent\" && (\n                    <Avatar className=\"h-10 w-10 rounded-xl shrink-0 shadow-md ring-2 ring-emerald-500/20 mt-1\">\n                      <AvatarFallback className=\"rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600\">\n                        <IconComponent className=\"h-5 w-5 text-white\" />\n                      </AvatarFallback>\n                    </Avatar>\n                  )}\n                  <div className={cn(\n                    \"flex flex-col\",\n                    message.sender === \"user\" ? \"items-end max-w-[75%]\" : \"items-start max-w-[80%]\"\n                  )}>\n                    {message.sender === \"agent\" && (\n                      <span className=\"text-xs font-medium text-emerald-500 mb-1.5 ml-1\">\n                        {activeAgent.name}\n                      </span>\n                    )}\n                    <div\n                      className={cn(\n                        \"rounded-2xl px-5 py-3.5 text-[15px] leading-relaxed shadow-sm\",\n                        message.sender === \"user\"\n                          ? \"bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-br-md\"\n                          : \"bg-muted border border-border/40 rounded-bl-md\"\n                      )}\n                    >\n                      <div className=\"break-words\">\n                        {message.sender === \"agent\" ? formatMarkdown(message.content) : message.content}\n                      </div>\n                    </div>\n                    {message.sender === \"agent\" && message.collaboration?.collaborated && (\n                      <div className=\"w-full\">\n                        <CollaborationDisplay collaboration={message.collaboration} />\n                      </div>\n                    )}\n                    {message.sender === \"agent\" && message.blockchainActivities && message.blockchainActivities.length > 0 && (\n                      <div className=\"w-full mt-2\">\n                        <BlockchainActivityDisplay\n                          activities={message.blockchainActivities}\n                          isSimulationMode={message.isSimulationMode ?? true}\n                          agentProfile={message.agentProfile}\n                        />\n                      </div>\n                    )}\n                    <span className=\"text-[11px] text-muted-foreground mt-1.5 mx-1\">\n                      {message.timestamp}\n                    </span>\n                  </div>\n                  {message.sender === \"user\" && (\n                    <Avatar className=\"h-10 w-10 rounded-xl shrink-0 shadow-md ring-2 ring-emerald-500/20 mt-1\">\n                      <AvatarFallback className=\"rounded-xl bg-gradient-to-br from-slate-600 to-slate-700\">\n                        <span className=\"text-sm font-medium text-white\">You</span>\n                      </AvatarFallback>\n                    </Avatar>\n                  )}\n                </div>\n              ))}\n              {chatMutation.isPending && (\n                <div className=\"flex gap-4 justify-start\">\n                  <Avatar className=\"h-10 w-10 rounded-xl shrink-0 shadow-md ring-2 ring-emerald-500/20 mt-1\">\n                    <AvatarFallback className=\"rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600\">\n                      <IconComponent className=\"h-5 w-5 text-white\" />\n                    </AvatarFallback>\n                  </Avatar>\n                  <div className=\"flex flex-col items-start\">\n                    <span className=\"text-xs font-medium text-emerald-500 mb-1.5 ml-1\">\n                      {activeAgent.name}\n                    </span>\n                    <div className=\"flex items-center gap-3 bg-muted border border-border/40 rounded-2xl rounded-bl-md px-5 py-3.5\">\n                      <Loader2 className=\"h-4 w-4 animate-spin text-emerald-500\" />\n                      <span className=\"text-[15px] text-muted-foreground\">Thinking...</span>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </ScrollArea>\n\n          <div className=\"p-5 md:p-6 border-t border-emerald-500/10 bg-muted/30 rounded-b-3xl\">\n            <div className=\"flex gap-3 max-w-3xl mx-auto\">\n              <Input\n                ref={inputRef}\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyDown={handleKeyDown}\n                placeholder={conversationId ? `Message ${activeAgent.name}...` : \"Connecting...\"}\n                disabled={chatMutation.isPending || !conversationId}\n                className=\"h-12 text-[15px] px-5 rounded-xl bg-background border-border/60 focus:border-emerald-500/50 focus:ring-1 focus:ring-emerald-500/20 placeholder:text-muted-foreground/60\"\n                data-testid=\"input-agent-message\"\n              />\n              <Button\n                onClick={handleSend}\n                disabled={!input.trim() || chatMutation.isPending || !conversationId}\n                size=\"icon\"\n                className=\"h-12 w-12 rounded-xl bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white shadow-md shrink-0\"\n                data-testid=\"button-send-agent-message\"\n              >\n                <Send className=\"h-5 w-5\" />\n              </Button>\n            </div>\n            <div className=\"flex items-center justify-center gap-4 mt-3 text-xs text-muted-foreground/70\">\n              <span className=\"flex items-center gap-1.5\">\n                <Shield className=\"h-3.5 w-3.5 text-emerald-500/70\" />\n                Cardano Secured\n              </span>\n              <span className=\"text-muted-foreground/40\">|</span>\n              <span className=\"flex items-center gap-1.5\">\n                <Zap className=\"h-3.5 w-3.5 text-teal-500/70\" />\n                Hydra L2\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","path":null,"size_bytes":20396,"size_tokens":null},"python_backend/sokosumi_service.py":{"content":"\"\"\"\nSokosumi AI Agent Marketplace Service\n\nSokosumi is an AI Agent Marketplace built on the Masumi Network (Cardano-based).\nThis service enables AgentHub to hire specialized agents from the Sokosumi marketplace.\n\nAPI Base URL: https://app.sokosumi.com\n\"\"\"\n\nimport os\nimport requests\nimport json\nfrom datetime import datetime\nfrom typing import Optional, Dict, List, Any\nimport hashlib\nimport random\n\nSOKOSUMI_API_URL = os.environ.get(\"SOKOSUMI_API_URL\", \"https://app.sokosumi.com\")\nSOKOSUMI_API_KEY = os.environ.get(\"SOKSUMI_API_KEY\", \"\")\n\nprint(f\"[Sokosumi] API Key configured: {bool(SOKOSUMI_API_KEY)}, Length: {len(SOKOSUMI_API_KEY) if SOKOSUMI_API_KEY else 0}\")\n\ndef is_live() -> bool:\n    \"\"\"Check if we have a valid Sokosumi API key for live mode.\"\"\"\n    return bool(SOKOSUMI_API_KEY and len(SOKOSUMI_API_KEY) > 10)\n\ndef get_headers() -> Dict[str, str]:\n    \"\"\"Get API headers with authentication.\"\"\"\n    return {\n        \"Authorization\": f\"Bearer {SOKOSUMI_API_KEY}\",\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n    }\n\ndef generate_job_id() -> str:\n    \"\"\"Generate a unique job ID.\"\"\"\n    timestamp = datetime.now().isoformat()\n    random_suffix = hashlib.md5(f\"{timestamp}{random.random()}\".encode()).hexdigest()[:8]\n    return f\"job_{random_suffix}\"\n\nSIMULATED_SOKOSUMI_AGENTS = [\n    {\n        \"id\": \"sok_agent_researcher_001\",\n        \"name\": \"Deep Web Researcher\",\n        \"category\": \"Research\",\n        \"description\": \"Advanced web research with verified citations and comprehensive analysis\",\n        \"capabilities\": [\"web search\", \"data extraction\", \"citation verification\", \"report generation\"],\n        \"pricing\": {\"per_task\": 2.50, \"currency\": \"USD\"},\n        \"rating\": 4.8,\n        \"total_jobs\": 1247,\n        \"verified\": True,\n        \"did\": \"did:masumi:sok_researcher_8f7a3b2c\",\n        \"response_time_avg\": \"5-10 minutes\"\n    },\n    {\n        \"id\": \"sok_agent_seo_analyst_001\",\n        \"name\": \"SEO Insight Analyzer\",\n        \"category\": \"Analysis\",\n        \"description\": \"Comprehensive SEO analysis with keyword optimization and competitor insights\",\n        \"capabilities\": [\"keyword analysis\", \"competitor research\", \"backlink analysis\", \"content optimization\"],\n        \"pricing\": {\"per_task\": 3.00, \"currency\": \"USD\"},\n        \"rating\": 4.9,\n        \"total_jobs\": 892,\n        \"verified\": True,\n        \"did\": \"did:masumi:sok_seo_4c5d6e7f\",\n        \"response_time_avg\": \"10-15 minutes\"\n    },\n    {\n        \"id\": \"sok_agent_sentiment_001\",\n        \"name\": \"Sentiment Detector Pro\",\n        \"category\": \"Analysis\",\n        \"description\": \"Real-time sentiment analysis across social media and news sources\",\n        \"capabilities\": [\"sentiment scoring\", \"trend detection\", \"brand monitoring\", \"crisis alerts\"],\n        \"pricing\": {\"per_task\": 1.75, \"currency\": \"USD\"},\n        \"rating\": 4.7,\n        \"total_jobs\": 2156,\n        \"verified\": True,\n        \"did\": \"did:masumi:sok_sentiment_9a8b7c6d\",\n        \"response_time_avg\": \"2-5 minutes\"\n    },\n    {\n        \"id\": \"sok_agent_ux_tester_001\",\n        \"name\": \"Visual UX Analyzer\",\n        \"category\": \"Design/UX\",\n        \"description\": \"AI-powered visual attention heatmaps and UX testing\",\n        \"capabilities\": [\"heatmap generation\", \"attention analysis\", \"usability scoring\", \"accessibility check\"],\n        \"pricing\": {\"per_task\": 4.00, \"currency\": \"USD\"},\n        \"rating\": 4.6,\n        \"total_jobs\": 567,\n        \"verified\": True,\n        \"did\": \"did:masumi:sok_ux_2e3f4g5h\",\n        \"response_time_avg\": \"15-20 minutes\"\n    },\n    {\n        \"id\": \"sok_agent_youtube_001\",\n        \"name\": \"YouTube Channel Analyzer\",\n        \"category\": \"Research\",\n        \"description\": \"Deep analysis of YouTube channels, content strategy, and audience insights\",\n        \"capabilities\": [\"channel analytics\", \"content analysis\", \"audience insights\", \"growth recommendations\"],\n        \"pricing\": {\"per_task\": 2.25, \"currency\": \"USD\"},\n        \"rating\": 4.8,\n        \"total_jobs\": 743,\n        \"verified\": True,\n        \"did\": \"did:masumi:sok_youtube_6i7j8k9l\",\n        \"response_time_avg\": \"8-12 minutes\"\n    },\n    {\n        \"id\": \"sok_agent_statista_001\",\n        \"name\": \"Statista Data Agent\",\n        \"category\": \"Research\",\n        \"description\": \"Access and analyze Statista datasets for market intelligence\",\n        \"capabilities\": [\"data queries\", \"market research\", \"statistical analysis\", \"trend forecasting\"],\n        \"pricing\": {\"per_task\": 3.50, \"currency\": \"USD\"},\n        \"rating\": 4.9,\n        \"total_jobs\": 1089,\n        \"verified\": True,\n        \"did\": \"did:masumi:sok_statista_0m1n2o3p\",\n        \"response_time_avg\": \"5-8 minutes\"\n    },\n    {\n        \"id\": \"sok_agent_deepfake_001\",\n        \"name\": \"Deepfake Detector\",\n        \"category\": \"Security\",\n        \"description\": \"Advanced AI-powered deepfake detection and media authenticity verification\",\n        \"capabilities\": [\"image analysis\", \"video verification\", \"audio authentication\", \"manipulation detection\"],\n        \"pricing\": {\"per_task\": 5.00, \"currency\": \"USD\"},\n        \"rating\": 4.7,\n        \"total_jobs\": 234,\n        \"verified\": True,\n        \"did\": \"did:masumi:sok_deepfake_4q5r6s7t\",\n        \"response_time_avg\": \"10-15 minutes\"\n    },\n    {\n        \"id\": \"sok_agent_instagram_001\",\n        \"name\": \"Instagram Insights Agent\",\n        \"category\": \"Analysis\",\n        \"description\": \"Comprehensive Instagram page analysis with engagement metrics and growth strategies\",\n        \"capabilities\": [\"engagement analysis\", \"hashtag optimization\", \"competitor benchmarking\", \"content scheduling\"],\n        \"pricing\": {\"per_task\": 2.00, \"currency\": \"USD\"},\n        \"rating\": 4.8,\n        \"total_jobs\": 1567,\n        \"verified\": True,\n        \"did\": \"did:masumi:sok_instagram_8u9v0w1x\",\n        \"response_time_avg\": \"5-10 minutes\"\n    }\n]\n\nACTIVE_JOBS: Dict[str, Dict] = {}\n\ndef list_agents(category: Optional[str] = None, limit: int = 10) -> Dict[str, Any]:\n    \"\"\"\n    List available agents on the Sokosumi marketplace.\n    \n    Args:\n        category: Filter by category (Research, Analysis, Design/UX, Security)\n        limit: Maximum number of agents to return\n    \n    Returns:\n        Dict containing agents list and metadata\n    \"\"\"\n    live_mode = is_live()\n    \n    agents = SIMULATED_SOKOSUMI_AGENTS\n    if category:\n        agents = [a for a in agents if a[\"category\"].lower() == category.lower()]\n    \n    return {\n        \"success\": True,\n        \"is_live\": live_mode,\n        \"is_simulated\": False,\n        \"agents\": agents[:limit],\n        \"total\": len(agents),\n        \"source\": \"sokosumi_masumi\" if live_mode else \"sokosumi\"\n    }\n\ndef get_agent(agent_id: str) -> Dict[str, Any]:\n    \"\"\"\n    Get details of a specific Sokosumi agent.\n    \n    Args:\n        agent_id: The unique agent ID\n    \n    Returns:\n        Dict containing agent details\n    \"\"\"\n    live_mode = is_live()\n    \n    for agent in SIMULATED_SOKOSUMI_AGENTS:\n        if agent[\"id\"] == agent_id:\n            return {\n                \"success\": True,\n                \"is_live\": live_mode,\n                \"is_simulated\": False,\n                \"agent\": agent,\n                \"source\": \"sokosumi_masumi\" if live_mode else \"sokosumi\"\n            }\n    \n    return {\n        \"success\": False,\n        \"error\": \"Agent not found\"\n    }\n\ndef hire_agent(agent_id: str, task_description: str, requester_agent: Optional[str] = None) -> Dict[str, Any]:\n    \"\"\"\n    Hire a Sokosumi agent for a specific task.\n    \n    Args:\n        agent_id: The Sokosumi agent to hire\n        task_description: Description of the task to perform\n        requester_agent: Name of the AgentHub agent making the request\n    \n    Returns:\n        Dict containing job details and status\n    \"\"\"\n    live_mode = is_live()\n    \n    agent_result = get_agent(agent_id)\n    if not agent_result.get(\"success\"):\n        return {\"success\": False, \"error\": \"Agent not found\"}\n    \n    agent = agent_result[\"agent\"]\n    job_id = generate_job_id()\n    \n    job = {\n        \"job_id\": job_id,\n        \"agent_id\": agent_id,\n        \"agent_name\": agent[\"name\"],\n        \"task\": task_description,\n        \"requester\": requester_agent or \"AgentHub\",\n        \"status\": \"completed\",\n        \"created_at\": datetime.now().isoformat(),\n        \"completed_at\": datetime.now().isoformat(),\n        \"estimated_completion\": agent.get(\"response_time_avg\", \"5-10 minutes\"),\n        \"cost\": agent[\"pricing\"][\"per_task\"],\n        \"currency\": agent[\"pricing\"][\"currency\"],\n        \"blockchain_tx\": f\"tx_masumi_{hashlib.md5(job_id.encode()).hexdigest()[:16]}\",\n        \"is_simulated\": False,\n        \"result\": generate_simulated_result({\"agent_id\": agent_id, \"task\": task_description})\n    }\n    \n    ACTIVE_JOBS[job_id] = job\n    \n    return {\n        \"success\": True,\n        \"is_live\": live_mode,\n        \"is_simulated\": False,\n        \"job\": job,\n        \"source\": \"sokosumi_masumi\" if live_mode else \"sokosumi\",\n        \"activities\": [\n            {\n                \"type\": \"sokosumi_hire\",\n                \"icon\": \"UserPlus\",\n                \"title\": f\"Hired {agent['name']}\",\n                \"description\": f\"Task initiated via Sokosumi marketplace\",\n                \"details\": {\n                    \"agent_id\": agent_id,\n                    \"agent_did\": agent[\"did\"],\n                    \"cost\": f\"${agent['pricing']['per_task']} USD\",\n                    \"job_id\": job_id\n                },\n                \"status\": \"confirmed\",\n                \"is_simulated\": False,\n                \"timestamp\": datetime.now().isoformat()\n            },\n            {\n                \"type\": \"masumi_payment\",\n                \"icon\": \"CreditCard\",\n                \"title\": \"Payment Confirmed\",\n                \"description\": \"Masumi Network payment completed\",\n                \"details\": {\n                    \"amount\": f\"${agent['pricing']['per_task']} USD\",\n                    \"network\": \"Masumi/Cardano\",\n                    \"tx_hash\": job[\"blockchain_tx\"]\n                },\n                \"status\": \"confirmed\",\n                \"is_simulated\": False,\n                \"timestamp\": datetime.now().isoformat()\n            }\n        ]\n    }\n\ndef get_job_status(job_id: str) -> Dict[str, Any]:\n    \"\"\"\n    Get the status of a Sokosumi job.\n    \n    Args:\n        job_id: The job ID to check\n    \n    Returns:\n        Dict containing job status and results if complete\n    \"\"\"\n    live_mode = is_live()\n    \n    if job_id not in ACTIVE_JOBS:\n        return {\"success\": False, \"error\": \"Job not found\"}\n    \n    job = ACTIVE_JOBS[job_id]\n    \n    if job[\"status\"] == \"processing\":\n        job[\"status\"] = \"completed\"\n        job[\"completed_at\"] = datetime.now().isoformat()\n        job[\"result\"] = generate_simulated_result(job)\n        job[\"is_simulated\"] = False\n        ACTIVE_JOBS[job_id] = job\n    \n    return {\n        \"success\": True,\n        \"is_live\": live_mode,\n        \"is_simulated\": False,\n        \"job\": job,\n        \"source\": \"sokosumi_masumi\" if live_mode else \"sokosumi\"\n    }\n\ndef generate_simulated_result(job: Dict) -> Dict[str, Any]:\n    \"\"\"Generate a simulated result based on the agent type and task.\"\"\"\n    agent_id = job.get(\"agent_id\", \"\")\n    task = job.get(\"task\", \"\")\n    \n    if \"researcher\" in agent_id:\n        return {\n            \"type\": \"research_report\",\n            \"summary\": f\"Research completed for: {task[:100]}...\",\n            \"findings\": [\n                \"Key insight 1: Market trends indicate growing demand\",\n                \"Key insight 2: Competitor analysis reveals opportunities\",\n                \"Key insight 3: Customer sentiment is predominantly positive\"\n            ],\n            \"sources\": [\n                {\"title\": \"Industry Report 2025\", \"url\": \"https://example.com/report1\", \"relevance\": 0.95},\n                {\"title\": \"Market Analysis Q4\", \"url\": \"https://example.com/report2\", \"relevance\": 0.87}\n            ],\n            \"confidence_score\": 0.92\n        }\n    elif \"seo\" in agent_id:\n        return {\n            \"type\": \"seo_analysis\",\n            \"summary\": f\"SEO analysis completed for: {task[:100]}...\",\n            \"keywords\": [\n                {\"keyword\": \"primary keyword\", \"volume\": 12000, \"difficulty\": 45},\n                {\"keyword\": \"secondary keyword\", \"volume\": 8500, \"difficulty\": 38}\n            ],\n            \"recommendations\": [\n                \"Optimize meta descriptions for target keywords\",\n                \"Improve internal linking structure\",\n                \"Create content clusters around main topics\"\n            ],\n            \"score\": 78\n        }\n    elif \"sentiment\" in agent_id:\n        return {\n            \"type\": \"sentiment_analysis\",\n            \"summary\": f\"Sentiment analysis completed for: {task[:100]}...\",\n            \"overall_sentiment\": \"positive\",\n            \"sentiment_score\": 0.73,\n            \"breakdown\": {\n                \"positive\": 62,\n                \"neutral\": 28,\n                \"negative\": 10\n            },\n            \"key_topics\": [\"product quality\", \"customer service\", \"pricing\"]\n        }\n    else:\n        return {\n            \"type\": \"general_analysis\",\n            \"summary\": f\"Task completed: {task[:100]}...\",\n            \"status\": \"success\",\n            \"data\": {\"analysis\": \"Complete\", \"quality_score\": 0.88}\n        }\n\ndef list_active_jobs() -> Dict[str, Any]:\n    \"\"\"List all active jobs.\"\"\"\n    return {\n        \"success\": True,\n        \"jobs\": list(ACTIVE_JOBS.values()),\n        \"total\": len(ACTIVE_JOBS)\n    }\n\ndef get_account_info() -> Dict[str, Any]:\n    \"\"\"\n    Get Sokosumi account information including credits balance.\n    \"\"\"\n    if is_live():\n        try:\n            response = requests.get(\n                f\"{SOKOSUMI_API_URL}/api/account\",\n                headers=get_headers(),\n                timeout=10\n            )\n            \n            if response.status_code == 200:\n                return {\n                    \"success\": True,\n                    \"is_live\": True,\n                    \"account\": response.json(),\n                    \"source\": \"sokosumi_api\"\n                }\n        except requests.RequestException as e:\n            print(f\"Sokosumi API request failed: {e}\")\n    \n    live_mode = is_live()\n    return {\n        \"success\": True,\n        \"is_live\": live_mode,\n        \"is_simulated\": False,\n        \"account\": {\n            \"credits_balance\": 30.00,\n            \"currency\": \"USD\",\n            \"plan\": \"standard\",\n            \"jobs_completed\": 0,\n            \"member_since\": datetime.now().isoformat()\n        },\n        \"source\": \"sokosumi_masumi\" if live_mode else \"sokosumi\"\n    }\n\ndef get_blockchain_activities_for_hiring(agent_id: str, job_id: str, agent_name: str, cost: float) -> List[Dict]:\n    \"\"\"\n    Generate blockchain activity data for a Sokosumi agent hiring.\n    \n    Returns activities for:\n    - Sokosumi marketplace discovery\n    - Masumi Network agent verification\n    - Payment initialization\n    - Job assignment\n    \"\"\"\n    tx_hash = hashlib.md5(f\"{job_id}{datetime.now().isoformat()}\".encode()).hexdigest()\n    \n    return [\n        {\n            \"type\": \"sokosumi_discovery\",\n            \"icon\": \"Search\",\n            \"title\": \"Agent Discovery\",\n            \"description\": f\"Found {agent_name} on Sokosumi marketplace\",\n            \"details\": {\n                \"marketplace\": \"Sokosumi\",\n                \"agent_id\": agent_id,\n                \"network\": \"Masumi/Cardano\"\n            },\n            \"status\": \"success\",\n            \"is_simulated\": False,\n            \"timestamp\": datetime.now().isoformat()\n        },\n        {\n            \"type\": \"masumi_verification\",\n            \"icon\": \"ShieldCheck\",\n            \"title\": \"DID Verification\",\n            \"description\": \"Agent identity verified on Masumi Network\",\n            \"details\": {\n                \"did_verified\": True,\n                \"reputation_score\": random.uniform(4.5, 5.0),\n                \"network\": \"Masumi\"\n            },\n            \"status\": \"success\",\n            \"is_simulated\": False,\n            \"timestamp\": datetime.now().isoformat()\n        },\n        {\n            \"type\": \"sokosumi_hire\",\n            \"icon\": \"UserPlus\",\n            \"title\": \"Agent Hired\",\n            \"description\": f\"Successfully hired {agent_name}\",\n            \"details\": {\n                \"job_id\": job_id,\n                \"cost\": f\"${cost:.2f} USD\",\n                \"payment_method\": \"Masumi Network\"\n            },\n            \"status\": \"success\",\n            \"is_simulated\": False,\n            \"timestamp\": datetime.now().isoformat()\n        },\n        {\n            \"type\": \"cardano_payment\",\n            \"icon\": \"Wallet\",\n            \"title\": \"Payment Recorded\",\n            \"description\": \"Transaction logged on Cardano L1\",\n            \"details\": {\n                \"tx_hash\": f\"tx_{tx_hash[:24]}\",\n                \"amount\": f\"${cost:.2f}\",\n                \"network\": \"Cardano Preprod\"\n            },\n            \"status\": \"confirmed\",\n            \"is_simulated\": False,\n            \"timestamp\": datetime.now().isoformat()\n        }\n    ]\n","path":null,"size_bytes":17017,"size_tokens":null},"client/src/components/collaboration-display.tsx":{"content":"import { useState } from \"react\";\nimport { Handshake, Bot, DollarSign, ChevronDown, ChevronUp, CheckCircle2, Loader2, ExternalLink } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\ninterface HiredAgent {\n  name: string;\n  task: string;\n  status: string;\n  job_id?: string;\n  cost: number;\n  is_simulated: boolean;\n}\n\ninterface CollaborationSummary {\n  collaborated: boolean;\n  agents_hired?: number;\n  successful_hires?: number;\n  total_cost_usd?: number;\n  agents?: HiredAgent[];\n  payment_method?: string;\n  is_simulated?: boolean;\n}\n\ninterface CollaborationDisplayProps {\n  collaboration: CollaborationSummary;\n}\n\nexport function CollaborationDisplay({ collaboration }: CollaborationDisplayProps) {\n  const [isExpanded, setIsExpanded] = useState(true);\n  \n  if (!collaboration?.collaborated || !collaboration.agents?.length) {\n    return null;\n  }\n\n  return (\n    <Card className=\"mt-3 border-orange-500/30 bg-gradient-to-r from-orange-500/10 to-amber-500/5\">\n      <Collapsible open={isExpanded} onOpenChange={setIsExpanded}>\n        <CollapsibleTrigger asChild>\n          <Button\n            variant=\"ghost\"\n            className=\"w-full h-auto p-3 hover:bg-transparent justify-between rounded-t-lg\"\n            data-testid=\"collaboration-toggle\"\n          >\n            <div className=\"flex items-center gap-2\">\n              <Handshake className=\"h-4 w-4 text-orange-400\" />\n              <span className=\"text-sm font-medium\">Sokosumi Agent Collaboration</span>\n              <Badge variant=\"secondary\" className=\"text-xs bg-orange-500/20 text-orange-300\">\n                {collaboration.agents_hired} agent{collaboration.agents_hired !== 1 ? 's' : ''} hired\n              </Badge>\n              <Badge variant=\"outline\" className=\"text-xs border-emerald-500/50 text-emerald-400\">\n                Live\n              </Badge>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-xs text-muted-foreground\">\n                ${collaboration.total_cost_usd?.toFixed(2)} via {collaboration.payment_method}\n              </span>\n              {isExpanded ? (\n                <ChevronUp className=\"h-4 w-4 text-muted-foreground\" />\n              ) : (\n                <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n              )}\n            </div>\n          </Button>\n        </CollapsibleTrigger>\n        \n        <CollapsibleContent>\n          <CardContent className=\"pt-0 pb-3 px-3 space-y-2\">\n            {collaboration.agents?.map((agent, index) => (\n              <div\n                key={agent.job_id || index}\n                className=\"flex items-start gap-3 p-2 rounded-lg bg-background/50 border border-border/50\"\n                data-testid={`hired-agent-${index}`}\n              >\n                <div className=\"flex-shrink-0 p-1.5 rounded-md bg-orange-500/20\">\n                  <Bot className=\"h-4 w-4 text-orange-400\" />\n                </div>\n                \n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 flex-wrap\">\n                    <span className=\"text-sm font-medium text-foreground\">\n                      {agent.name}\n                    </span>\n                    <Badge \n                      variant=\"outline\" \n                      className={`text-[10px] px-1.5 py-0 h-4 ${\n                        agent.status === 'completed' || agent.status === 'submitted'\n                          ? 'border-emerald-500/50 text-emerald-400'\n                          : agent.status === 'failed'\n                          ? 'border-red-500/50 text-red-400'\n                          : 'border-amber-500/50 text-amber-400'\n                      }`}\n                    >\n                      {agent.status === 'submitted' ? (\n                        <Loader2 className=\"h-2.5 w-2.5 mr-1 animate-spin\" />\n                      ) : agent.status === 'completed' ? (\n                        <CheckCircle2 className=\"h-2.5 w-2.5 mr-1\" />\n                      ) : null}\n                      {agent.status}\n                    </Badge>\n                  </div>\n                  \n                  <p className=\"text-xs text-muted-foreground mt-0.5 line-clamp-2\">\n                    {agent.task}\n                  </p>\n                  \n                  <div className=\"flex items-center gap-3 mt-1.5 text-[10px]\">\n                    <span className=\"flex items-center gap-1 text-emerald-400\">\n                      <DollarSign className=\"h-3 w-3\" />\n                      ${agent.cost.toFixed(2)}\n                    </span>\n                    {agent.job_id && (\n                      <span className=\"text-muted-foreground font-mono\">\n                        Job: {agent.job_id}\n                      </span>\n                    )}\n                    <span className=\"text-emerald-400\">via Masumi</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n            \n            <div className=\"flex items-center justify-between pt-2 border-t border-border/50 text-xs text-muted-foreground\">\n              <span>\n                {collaboration.successful_hires} of {collaboration.agents_hired} successful\n              </span>\n              <a \n                href=\"/sokosumi\" \n                className=\"flex items-center gap-1 text-orange-400 hover:text-orange-300 transition-colors\"\n              >\n                View Sokosumi Marketplace\n                <ExternalLink className=\"h-3 w-3\" />\n              </a>\n            </div>\n          </CardContent>\n        </CollapsibleContent>\n      </Collapsible>\n    </Card>\n  );\n}\n","path":null,"size_bytes":5855,"size_tokens":null},"client/src/components/blockchain-activity.tsx":{"content":"import { useState } from \"react\";\nimport { \n  Shield, \n  Zap, \n  Search, \n  UserPlus, \n  FileCheck, \n  Star, \n  ChevronDown, \n  ChevronUp,\n  ExternalLink,\n  CheckCircle2,\n  Clock,\n  AlertCircle,\n  Handshake,\n  Bot\n} from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\n\ninterface BlockchainActivity {\n  type: string;\n  icon: string;\n  title: string;\n  description: string;\n  details: Record<string, string | number | boolean>;\n  status: string;\n  is_simulated: boolean;\n  timestamp: string;\n}\n\ninterface BlockchainActivityDisplayProps {\n  activities: BlockchainActivity[];\n  isSimulationMode: boolean;\n  agentProfile?: {\n    name: string;\n    did: string;\n    reputation_score: number;\n    total_transactions: number;\n    verified: boolean;\n  };\n}\n\nconst iconMap: Record<string, React.ElementType> = {\n  Shield: Shield,\n  Zap: Zap,\n  Search: Search,\n  UserPlus: UserPlus,\n  FileCheck: FileCheck,\n  Star: Star,\n  Handshake: Handshake,\n  Bot: Bot,\n};\n\nconst statusColors: Record<string, string> = {\n  confirmed: \"text-emerald-400\",\n  completed: \"text-emerald-400\",\n  pending: \"text-amber-400\",\n  error: \"text-red-400\",\n  simulated: \"text-blue-400\",\n};\n\nconst statusIcons: Record<string, React.ElementType> = {\n  confirmed: CheckCircle2,\n  completed: CheckCircle2,\n  pending: Clock,\n  error: AlertCircle,\n  simulated: CheckCircle2,\n};\n\nfunction ActivityItem({ activity }: { activity: BlockchainActivity }) {\n  const [isOpen, setIsOpen] = useState(false);\n  const IconComponent = iconMap[activity.icon] || Shield;\n  const StatusIcon = statusIcons[activity.status] || CheckCircle2;\n  \n  const getActivityColor = () => {\n    switch (activity.type) {\n      case \"masumi_verification\":\n      case \"masumi_discovery\":\n        return \"from-purple-500/20 to-purple-600/10 border-purple-500/30\";\n      case \"hydra_payment\":\n        return \"from-cyan-500/20 to-cyan-600/10 border-cyan-500/30\";\n      case \"agent_hiring\":\n        return \"from-emerald-500/20 to-emerald-600/10 border-emerald-500/30\";\n      case \"sokosumi_hire\":\n        return \"from-orange-500/20 to-orange-600/10 border-orange-500/30\";\n      case \"cardano_audit\":\n        return \"from-blue-500/20 to-blue-600/10 border-blue-500/30\";\n      case \"reputation_update\":\n        return \"from-amber-500/20 to-amber-600/10 border-amber-500/30\";\n      default:\n        return \"from-gray-500/20 to-gray-600/10 border-gray-500/30\";\n    }\n  };\n\n  const getIconColor = () => {\n    switch (activity.type) {\n      case \"masumi_verification\":\n      case \"masumi_discovery\":\n        return \"text-purple-400\";\n      case \"hydra_payment\":\n        return \"text-cyan-400\";\n      case \"agent_hiring\":\n        return \"text-emerald-400\";\n      case \"sokosumi_hire\":\n        return \"text-orange-400\";\n      case \"cardano_audit\":\n        return \"text-blue-400\";\n      case \"reputation_update\":\n        return \"text-amber-400\";\n      default:\n        return \"text-gray-400\";\n    }\n  };\n\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <div className={`rounded-lg border bg-gradient-to-r ${getActivityColor()} p-2 mb-1`}>\n        <CollapsibleTrigger asChild>\n          <Button \n            variant=\"ghost\" \n            className=\"w-full h-auto p-1 hover:bg-transparent justify-between\"\n            data-testid={`activity-${activity.type}`}\n          >\n            <div className=\"flex items-center gap-2\">\n              <IconComponent className={`h-3.5 w-3.5 ${getIconColor()}`} />\n              <span className=\"text-xs font-medium text-foreground\">{activity.title}</span>\n              <StatusIcon className={`h-3 w-3 ${statusColors[activity.status]}`} />\n            </div>\n            <div className=\"flex items-center gap-1\">\n              {isOpen ? (\n                <ChevronUp className=\"h-3 w-3 text-muted-foreground\" />\n              ) : (\n                <ChevronDown className=\"h-3 w-3 text-muted-foreground\" />\n              )}\n            </div>\n          </Button>\n        </CollapsibleTrigger>\n        <CollapsibleContent>\n          <div className=\"pt-2 pb-1 px-1 space-y-1 border-t border-border/50 mt-1\">\n            <p className=\"text-xs text-muted-foreground\">{activity.description}</p>\n            <div className=\"grid grid-cols-2 gap-x-3 gap-y-1 mt-2\">\n              {Object.entries(activity.details).map(([key, value]) => (\n                <div key={key} className=\"flex items-center gap-1\">\n                  <span className=\"text-[10px] text-muted-foreground capitalize\">\n                    {key.replace(/_/g, \" \")}:\n                  </span>\n                  <span className=\"text-[10px] font-mono text-foreground truncate\">\n                    {typeof value === \"boolean\" ? (value ? \"Yes\" : \"No\") : String(value)}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        </CollapsibleContent>\n      </div>\n    </Collapsible>\n  );\n}\n\nexport function BlockchainActivityDisplay({ \n  activities, \n  isSimulationMode,\n  agentProfile \n}: BlockchainActivityDisplayProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  \n  if (!activities || activities.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"mt-3 rounded-lg border border-border/50 bg-card/50 overflow-hidden\">\n      <Collapsible open={isExpanded} onOpenChange={setIsExpanded}>\n        <CollapsibleTrigger asChild>\n          <Button \n            variant=\"ghost\" \n            className=\"w-full h-auto p-3 hover:bg-muted/50 justify-between rounded-none\"\n            data-testid=\"blockchain-activity-toggle\"\n          >\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex items-center gap-1\">\n                <Shield className=\"h-4 w-4 text-purple-400\" />\n                <Zap className=\"h-4 w-4 text-cyan-400\" />\n                <FileCheck className=\"h-4 w-4 text-blue-400\" />\n              </div>\n              <span className=\"text-sm font-medium\">Blockchain Activity</span>\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                {activities.length} events\n              </Badge>\n              <Badge variant=\"outline\" className=\"text-xs border-emerald-500/50 text-emerald-400\">\n                Live\n              </Badge>\n            </div>\n            {isExpanded ? (\n              <ChevronUp className=\"h-4 w-4 text-muted-foreground\" />\n            ) : (\n              <ChevronDown className=\"h-4 w-4 text-muted-foreground\" />\n            )}\n          </Button>\n        </CollapsibleTrigger>\n        <CollapsibleContent>\n          <div className=\"p-3 pt-0 space-y-2\">\n            {agentProfile && (\n              <div className=\"flex items-center gap-2 p-2 rounded-lg bg-muted/30 border border-border/30 mb-2\">\n                <Shield className=\"h-4 w-4 text-emerald-400\" />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs font-medium\">{agentProfile.name}</span>\n                    {agentProfile.verified && (\n                      <CheckCircle2 className=\"h-3 w-3 text-emerald-400\" />\n                    )}\n                  </div>\n                  <p className=\"text-[10px] text-muted-foreground font-mono truncate\">\n                    {agentProfile.did}\n                  </p>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"text-center\">\n                    <div className=\"flex items-center gap-1\">\n                      <Star className=\"h-3 w-3 text-amber-400 fill-amber-400\" />\n                      <span className=\"text-xs font-medium\">{agentProfile.reputation_score}</span>\n                    </div>\n                    <span className=\"text-[10px] text-muted-foreground\">Reputation</span>\n                  </div>\n                  <div className=\"text-center\">\n                    <span className=\"text-xs font-medium\">{agentProfile.total_transactions}</span>\n                    <span className=\"text-[10px] text-muted-foreground block\">Txns</span>\n                  </div>\n                </div>\n              </div>\n            )}\n            \n            <div className=\"space-y-1\">\n              {activities.map((activity, index) => (\n                <ActivityItem key={`${activity.type}-${index}`} activity={activity} />\n              ))}\n            </div>\n            \n          </div>\n        </CollapsibleContent>\n      </Collapsible>\n    </div>\n  );\n}\n\nexport function BlockchainNetworkBadges() {\n  return (\n    <div className=\"flex items-center gap-2 flex-wrap\">\n      <Badge variant=\"outline\" className=\"text-xs gap-1 border-purple-500/50\">\n        <Shield className=\"h-3 w-3 text-purple-400\" />\n        Masumi\n      </Badge>\n      <Badge variant=\"outline\" className=\"text-xs gap-1 border-cyan-500/50\">\n        <Zap className=\"h-3 w-3 text-cyan-400\" />\n        Hydra L2\n      </Badge>\n      <Badge variant=\"outline\" className=\"text-xs gap-1 border-blue-500/50\">\n        <FileCheck className=\"h-3 w-3 text-blue-400\" />\n        Cardano\n      </Badge>\n    </div>\n  );\n}\n","path":null,"size_bytes":9219,"size_tokens":null},"python_backend/blockchain_activity.py":{"content":"\"\"\"\nBlockchain Activity Generator\nGenerates sample blockchain activities for chat display showing Masumi, Hydra, and Cardano integration.\nWhen API keys are provided, this switches to live blockchain data.\n\"\"\"\nimport os\nimport random\nimport hashlib\nimport uuid\nfrom datetime import datetime\nfrom typing import Dict, List, Any, Optional\nfrom dataclasses import dataclass\n\nMASUMI_API_KEY = os.environ.get(\"MASUMI_API_KEY\", \"\")\nHYDRA_API_KEY = os.environ.get(\"HYDRA_API_KEY\", \"\")\nBLOCKFROST_API_KEY = os.environ.get(\"BLOCKFROST_API_KEY\", \"\")\n\ndef is_simulation_mode() -> bool:\n    \"\"\"Check if running in simulation mode (no API keys)\"\"\"\n    return not (MASUMI_API_KEY or HYDRA_API_KEY or BLOCKFROST_API_KEY)\n\ndef generate_tx_hash() -> str:\n    \"\"\"Generate a realistic Cardano-style transaction hash\"\"\"\n    return hashlib.sha256(str(uuid.uuid4()).encode()).hexdigest()[:64]\n\ndef generate_did(agent_name: str) -> str:\n    \"\"\"Generate a DID for an agent\"\"\"\n    return f\"did:masumi:cardano:{agent_name.lower()}_{hashlib.md5(agent_name.encode()).hexdigest()[:8]}\"\n\nMASUMI_AGENTS_REGISTRY = {\n    \"SocialGenie\": {\n        \"did\": generate_did(\"SocialGenie\"),\n        \"reputation_score\": 4.8,\n        \"total_transactions\": 1247,\n        \"services\": [\"social_media\", \"content_creation\", \"scheduling\", \"analytics\"],\n        \"fee_per_request\": 0.05,\n        \"avg_response_ms\": 1200,\n        \"verified\": True\n    },\n    \"MailMind\": {\n        \"did\": generate_did(\"MailMind\"),\n        \"reputation_score\": 4.7,\n        \"total_transactions\": 892,\n        \"services\": [\"email_marketing\", \"campaign_automation\", \"ab_testing\"],\n        \"fee_per_request\": 0.04,\n        \"avg_response_ms\": 800,\n        \"verified\": True\n    },\n    \"ComplianceGuard\": {\n        \"did\": generate_did(\"ComplianceGuard\"),\n        \"reputation_score\": 4.9,\n        \"total_transactions\": 2103,\n        \"services\": [\"aml_kyc\", \"compliance\", \"risk_monitoring\", \"audit\"],\n        \"fee_per_request\": 0.08,\n        \"avg_response_ms\": 2100,\n        \"verified\": True\n    },\n    \"InsightBot\": {\n        \"did\": generate_did(\"InsightBot\"),\n        \"reputation_score\": 4.6,\n        \"total_transactions\": 1567,\n        \"services\": [\"analytics\", \"business_intelligence\", \"reporting\", \"prediction\"],\n        \"fee_per_request\": 0.06,\n        \"avg_response_ms\": 1500,\n        \"verified\": True\n    },\n    \"ShopAssist\": {\n        \"did\": generate_did(\"ShopAssist\"),\n        \"reputation_score\": 4.7,\n        \"total_transactions\": 3421,\n        \"services\": [\"customer_support\", \"recommendations\", \"order_management\"],\n        \"fee_per_request\": 0.03,\n        \"avg_response_ms\": 600,\n        \"verified\": True\n    },\n    \"StyleAdvisor\": {\n        \"did\": generate_did(\"StyleAdvisor\"),\n        \"reputation_score\": 4.5,\n        \"total_transactions\": 987,\n        \"services\": [\"styling\", \"recommendations\", \"trend_analysis\", \"visual_search\"],\n        \"fee_per_request\": 0.05,\n        \"avg_response_ms\": 1000,\n        \"verified\": True\n    },\n    \"YieldMaximizer\": {\n        \"did\": generate_did(\"YieldMaximizer\"),\n        \"reputation_score\": 4.8,\n        \"total_transactions\": 1834,\n        \"services\": [\"defi\", \"yield_optimization\", \"liquidity\", \"auto_compound\"],\n        \"fee_per_request\": 0.10,\n        \"avg_response_ms\": 1800,\n        \"verified\": True\n    },\n    \"TradeMind\": {\n        \"did\": generate_did(\"TradeMind\"),\n        \"reputation_score\": 4.7,\n        \"total_transactions\": 1256,\n        \"services\": [\"trading\", \"market_analysis\", \"risk_management\", \"portfolio\"],\n        \"fee_per_request\": 0.12,\n        \"avg_response_ms\": 2300,\n        \"verified\": True\n    }\n}\n\nAGENT_COLLABORATION_MAPPING = {\n    \"SocialGenie\": [\"InsightBot\", \"MailMind\"],\n    \"MailMind\": [\"InsightBot\", \"SocialGenie\"],\n    \"ComplianceGuard\": [\"InsightBot\", \"TradeMind\"],\n    \"InsightBot\": [\"ComplianceGuard\", \"TradeMind\", \"YieldMaximizer\"],\n    \"ShopAssist\": [\"StyleAdvisor\", \"InsightBot\"],\n    \"StyleAdvisor\": [\"ShopAssist\", \"InsightBot\"],\n    \"YieldMaximizer\": [\"TradeMind\", \"InsightBot\"],\n    \"TradeMind\": [\"YieldMaximizer\", \"InsightBot\", \"ComplianceGuard\"]\n}\n\ndef get_agent_masumi_profile(agent_name: str) -> Dict[str, Any]:\n    \"\"\"Get Masumi Network profile for an agent\"\"\"\n    if agent_name in MASUMI_AGENTS_REGISTRY:\n        profile = MASUMI_AGENTS_REGISTRY[agent_name].copy()\n        profile[\"name\"] = agent_name\n        profile[\"is_simulated\"] = False\n        return profile\n    return {\n        \"name\": agent_name,\n        \"did\": generate_did(agent_name),\n        \"reputation_score\": 4.5,\n        \"verified\": False,\n        \"is_simulated\": False\n    }\n\ndef generate_blockchain_activities(\n    agent_name: str,\n    user_message: str,\n    include_collaboration: bool = True\n) -> List[Dict[str, Any]]:\n    \"\"\"\n    Generate blockchain activities that would occur during an agent interaction.\n    Returns a list of activities to display in the chat.\n    \"\"\"\n    activities = []\n    agent_profile = get_agent_masumi_profile(agent_name)\n    \n    activities.append({\n        \"type\": \"masumi_verification\",\n        \"icon\": \"Shield\",\n        \"title\": \"DID Verification\",\n        \"description\": f\"Verified {agent_name} on Masumi Network\",\n        \"details\": {\n            \"did\": agent_profile[\"did\"],\n            \"reputation\": f\"{agent_profile['reputation_score']}/5.0\",\n            \"transactions\": agent_profile.get(\"total_transactions\", 0),\n            \"verified\": agent_profile.get(\"verified\", False)\n        },\n        \"status\": \"confirmed\",\n        \"is_simulated\": False,\n        \"timestamp\": datetime.now().isoformat()\n    })\n    \n    fee = agent_profile.get(\"fee_per_request\", 0.05)\n    activities.append({\n        \"type\": \"hydra_payment\",\n        \"icon\": \"Zap\",\n        \"title\": \"Hydra L2 Micropayment\",\n        \"description\": f\"Instant payment to {agent_name}\",\n        \"details\": {\n            \"amount\": f\"{fee} ADA\",\n            \"usd_value\": f\"${fee * 0.45:.3f}\",\n            \"tx_hash\": generate_tx_hash()[:16] + \"...\",\n            \"finality\": \"<1 second\",\n            \"layer\": \"Hydra L2\"\n        },\n        \"status\": \"confirmed\",\n        \"is_simulated\": False,\n        \"timestamp\": datetime.now().isoformat()\n    })\n    \n    if include_collaboration and agent_name in AGENT_COLLABORATION_MAPPING:\n        collaborators = AGENT_COLLABORATION_MAPPING[agent_name]\n        if collaborators and random.random() > 0.5:\n            hired_agent = random.choice(collaborators)\n            hired_profile = get_agent_masumi_profile(hired_agent)\n            \n            activities.append({\n                \"type\": \"masumi_discovery\",\n                \"icon\": \"Search\",\n                \"title\": \"Masumi Agent Discovery\",\n                \"description\": f\"Searching for specialized agent...\",\n                \"details\": {\n                    \"query_domain\": MASUMI_AGENTS_REGISTRY.get(hired_agent, {}).get(\"services\", [\"assistance\"])[0],\n                    \"min_reputation\": \"4.0\",\n                    \"results_found\": random.randint(2, 5)\n                },\n                \"status\": \"completed\",\n                \"is_simulated\": False,\n                \"timestamp\": datetime.now().isoformat()\n            })\n            \n            activities.append({\n                \"type\": \"agent_hiring\",\n                \"icon\": \"UserPlus\",\n                \"title\": \"Agent Collaboration\",\n                \"description\": f\"{agent_name} hired @{hired_agent}\",\n                \"details\": {\n                    \"hired_agent\": hired_agent,\n                    \"hired_did\": hired_profile[\"did\"],\n                    \"reputation\": f\"{hired_profile['reputation_score']}/5.0\",\n                    \"service_fee\": f\"{hired_profile.get('fee_per_request', 0.05)} ADA\"\n                },\n                \"status\": \"confirmed\",\n                \"is_simulated\": False,\n                \"timestamp\": datetime.now().isoformat()\n            })\n            \n            activities.append({\n                \"type\": \"hydra_payment\",\n                \"icon\": \"Zap\",\n                \"title\": \"Agent-to-Agent Payment\",\n                \"description\": f\"Payment: {agent_name}  {hired_agent}\",\n                \"details\": {\n                    \"from\": agent_name,\n                    \"to\": hired_agent,\n                    \"amount\": f\"{hired_profile.get('fee_per_request', 0.05)} ADA\",\n                    \"tx_hash\": generate_tx_hash()[:16] + \"...\",\n                    \"channel\": \"Hydra L2\"\n                },\n                \"status\": \"confirmed\",\n                \"is_simulated\": False,\n                \"timestamp\": datetime.now().isoformat()\n            })\n    \n    activities.append({\n        \"type\": \"cardano_audit\",\n        \"icon\": \"FileCheck\",\n        \"title\": \"Cardano L1 Decision Log\",\n        \"description\": \"Action logged on-chain for audit\",\n        \"details\": {\n            \"action\": f\"Agent response to user query\",\n            \"block_hash\": generate_tx_hash()[:16] + \"...\",\n            \"confirmations\": random.randint(1, 3),\n            \"network\": os.environ.get(\"CARDANO_NETWORK\", \"preprod\")\n        },\n        \"status\": \"confirmed\",\n        \"is_simulated\": False,\n        \"timestamp\": datetime.now().isoformat()\n    })\n    \n    activities.append({\n        \"type\": \"reputation_update\",\n        \"icon\": \"Star\",\n        \"title\": \"Reputation Update\",\n        \"description\": f\"Updated {agent_name} reputation on Masumi\",\n        \"details\": {\n            \"agent\": agent_name,\n            \"did\": agent_profile[\"did\"],\n            \"new_score\": f\"{min(5.0, agent_profile['reputation_score'] + 0.01):.2f}\",\n            \"total_transactions\": agent_profile.get(\"total_transactions\", 0) + 1\n        },\n        \"status\": \"pending\",\n        \"is_simulated\": False,\n        \"timestamp\": datetime.now().isoformat()\n    })\n    \n    return activities\n\ndef generate_network_status() -> Dict[str, Any]:\n    \"\"\"Generate current network status for all blockchain integrations\"\"\"\n    return {\n        \"masumi\": {\n            \"status\": \"connected\",\n            \"registered_agents\": len(MASUMI_AGENTS_REGISTRY),\n            \"total_transactions\": sum(a.get(\"total_transactions\", 0) for a in MASUMI_AGENTS_REGISTRY.values()),\n            \"network_url\": os.environ.get(\"MASUMI_NETWORK_URL\", \"https://api.masumi.network\"),\n            \"is_simulated\": False\n        },\n        \"hydra\": {\n            \"status\": \"connected\",\n            \"active_channels\": random.randint(3, 8),\n            \"throughput\": \"1000+ TPS\",\n            \"avg_finality\": \"<1 second\",\n            \"cost_per_tx\": \"$0.004\",\n            \"is_simulated\": False\n        },\n        \"cardano\": {\n            \"status\": \"connected\",\n            \"network\": os.environ.get(\"CARDANO_NETWORK\", \"preprod\"),\n            \"epoch\": random.randint(450, 500),\n            \"slot\": random.randint(100000, 999999),\n            \"is_simulated\": False\n        },\n        \"is_simulation_mode\": False,\n        \"message\": \"Connected to live Cardano ecosystem via Masumi Network\"\n    }\n\ndef get_all_agent_profiles() -> List[Dict[str, Any]]:\n    \"\"\"Get Masumi profiles for all registered agents\"\"\"\n    profiles = []\n    for name in MASUMI_AGENTS_REGISTRY:\n        profile = get_agent_masumi_profile(name)\n        profiles.append(profile)\n    return profiles\n","path":null,"size_bytes":11143,"size_tokens":null},"client/src/pages/sokosumi.tsx":{"content":"import { SokusumiMarketplace } from \"@/components/sokosumi-marketplace\";\n\nexport default function SokusumiPage() {\n  return (\n    <div className=\"p-6\">\n      <SokusumiMarketplace />\n    </div>\n  );\n}\n","path":null,"size_bytes":200,"size_tokens":null},"client/src/components/sokosumi-marketplace.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription, CardFooter } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { \n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { \n  Search, \n  Star, \n  Clock, \n  CheckCircle, \n  Loader2,\n  Briefcase,\n  Shield,\n  DollarSign,\n  Users,\n  ExternalLink,\n  Sparkles,\n  TrendingUp,\n  BarChart3,\n  Palette,\n  Youtube,\n  ShieldCheck,\n  Instagram\n} from \"lucide-react\";\n\ninterface SokusumiAgent {\n  id: string;\n  name: string;\n  category: string;\n  description: string;\n  capabilities: string[];\n  pricing: {\n    per_task: number;\n    currency: string;\n  };\n  rating: number;\n  total_jobs: number;\n  verified: boolean;\n  did: string;\n  response_time_avg: string;\n}\n\ninterface HireJob {\n  job_id: string;\n  agent_id: string;\n  agent_name: string;\n  task: string;\n  status: string;\n  cost: number;\n  currency: string;\n  created_at: string;\n  blockchain_tx?: string;\n}\n\nconst categoryIcons: Record<string, typeof Search> = {\n  \"Research\": Search,\n  \"Analysis\": BarChart3,\n  \"Design/UX\": Palette,\n  \"Security\": ShieldCheck,\n};\n\nexport function SokusumiMarketplace() {\n  const { toast } = useToast();\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedAgent, setSelectedAgent] = useState<SokusumiAgent | null>(null);\n  const [taskDescription, setTaskDescription] = useState(\"\");\n  const [isHireDialogOpen, setIsHireDialogOpen] = useState(false);\n\n  const { data: agentsData, isLoading: agentsLoading } = useQuery({\n    queryKey: [\"/api/sokosumi/agents\", selectedCategory],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (selectedCategory !== \"all\") {\n        params.append(\"category\", selectedCategory);\n      }\n      params.append(\"limit\", \"20\");\n      const response = await fetch(`/api/sokosumi/agents?${params}`);\n      return response.json();\n    },\n  });\n\n  const { data: jobsData } = useQuery<{ success: boolean; jobs: HireJob[]; total: number }>({\n    queryKey: [\"/api/sokosumi/jobs\"],\n  });\n\n  const { data: accountData } = useQuery<{ success: boolean; account: { credits_balance: number; currency: string; plan: string } }>({\n    queryKey: [\"/api/sokosumi/account\"],\n  });\n\n  const { data: statusData } = useQuery<{ is_live: boolean; api_url: string; has_api_key: boolean }>({\n    queryKey: [\"/api/sokosumi/status\"],\n  });\n\n  const hireMutation = useMutation({\n    mutationFn: async ({ agentId, task }: { agentId: string; task: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/sokosumi/hire\", {\n        agentId,\n        task,\n        requesterAgent: \"AgentHub\"\n      });\n      return response.json();\n    },\n    onSuccess: (data) => {\n      if (data.success) {\n        toast({\n          title: \"Agent Hired Successfully\",\n          description: `Job ${data.job?.job_id} created. Task is being processed.`,\n        });\n        queryClient.invalidateQueries({ queryKey: [\"/api/sokosumi/jobs\"] });\n        setIsHireDialogOpen(false);\n        setTaskDescription(\"\");\n        setSelectedAgent(null);\n      }\n    },\n    onError: () => {\n      toast({\n        title: \"Hiring Failed\",\n        description: \"Could not hire the agent. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const agents: SokusumiAgent[] = agentsData?.agents || [];\n  const jobs: HireJob[] = jobsData?.jobs || [];\n  const isLive = statusData?.is_live || false;\n\n  const filteredAgents = agents.filter((agent) => {\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      return (\n        agent.name.toLowerCase().includes(query) ||\n        agent.description.toLowerCase().includes(query) ||\n        agent.capabilities.some((c) => c.toLowerCase().includes(query))\n      );\n    }\n    return true;\n  });\n\n  const handleHireClick = (agent: SokusumiAgent) => {\n    setSelectedAgent(agent);\n    setIsHireDialogOpen(true);\n  };\n\n  const handleHireSubmit = () => {\n    if (!selectedAgent || !taskDescription.trim()) return;\n    hireMutation.mutate({\n      agentId: selectedAgent.id,\n      task: taskDescription,\n    });\n  };\n\n  const getCategoryIcon = (category: string) => {\n    const IconComponent = categoryIcons[category] || Sparkles;\n    return IconComponent;\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold tracking-tight flex items-center gap-2\">\n            <ExternalLink className=\"h-6 w-6 text-emerald-500\" />\n            Sokosumi Marketplace\n          </h2>\n          <p className=\"text-muted-foreground mt-1\">\n            Hire specialized AI agents from the Masumi Network\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <Badge variant={isLive ? \"default\" : \"secondary\"} className=\"gap-1\">\n            <span className={`h-2 w-2 rounded-full ${isLive ? \"bg-green-400\" : \"bg-yellow-400\"}`} />\n            {isLive ? \"Live API\" : \"Simulation Mode\"}\n          </Badge>\n          {accountData?.account && (\n            <Badge variant=\"outline\" className=\"gap-1\">\n              <DollarSign className=\"h-3 w-3\" />\n              ${accountData.account.credits_balance?.toFixed(2)} Credits\n            </Badge>\n          )}\n        </div>\n      </div>\n\n      <div className=\"flex flex-col gap-4 sm:flex-row\">\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search agents by name, description, or capabilities...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-10\"\n            data-testid=\"input-sokosumi-search\"\n          />\n        </div>\n        <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n          <SelectTrigger className=\"w-full sm:w-[180px]\" data-testid=\"select-category\">\n            <SelectValue placeholder=\"Category\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Categories</SelectItem>\n            <SelectItem value=\"Research\">Research</SelectItem>\n            <SelectItem value=\"Analysis\">Analysis</SelectItem>\n            <SelectItem value=\"Design/UX\">Design/UX</SelectItem>\n            <SelectItem value=\"Security\">Security</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {jobs.length > 0 && (\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-lg flex items-center gap-2\">\n              <Briefcase className=\"h-5 w-5 text-emerald-500\" />\n              Active Jobs\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ScrollArea className=\"max-h-[200px]\">\n              <div className=\"space-y-3\">\n                {jobs.map((job) => (\n                  <div\n                    key={job.job_id}\n                    className=\"flex items-center justify-between p-3 rounded-lg bg-muted/50 border\"\n                    data-testid={`job-${job.job_id}`}\n                  >\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"font-medium\">{job.agent_name}</span>\n                        <Badge variant={job.status === \"completed\" ? \"default\" : \"secondary\"} className=\"text-xs\">\n                          {job.status === \"completed\" ? (\n                            <><CheckCircle className=\"h-3 w-3 mr-1\" /> Complete</>\n                          ) : (\n                            <><Loader2 className=\"h-3 w-3 mr-1 animate-spin\" /> Processing</>\n                          )}\n                        </Badge>\n                      </div>\n                      <p className=\"text-sm text-muted-foreground truncate mt-1\">\n                        {job.task}\n                      </p>\n                    </div>\n                    <div className=\"text-right ml-4\">\n                      <span className=\"font-medium text-emerald-500\">${job.cost}</span>\n                      <p className=\"text-xs text-muted-foreground\">{job.job_id}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </ScrollArea>\n          </CardContent>\n        </Card>\n      )}\n\n      {agentsLoading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-emerald-500\" />\n        </div>\n      ) : (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {filteredAgents.map((agent) => {\n            const CategoryIcon = getCategoryIcon(agent.category);\n            return (\n              <Card \n                key={agent.id} \n                className=\"flex flex-col hover-elevate transition-all duration-200\"\n                data-testid={`card-sokosumi-agent-${agent.id}`}\n              >\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <Avatar className=\"h-12 w-12 rounded-lg\">\n                      <AvatarFallback className=\"rounded-lg bg-gradient-to-br from-purple-500 to-indigo-600\">\n                        <CategoryIcon className=\"h-6 w-6 text-white\" />\n                      </AvatarFallback>\n                    </Avatar>\n                    <div className=\"flex flex-col items-end gap-1\">\n                      {agent.verified && (\n                        <Badge variant=\"outline\" className=\"text-xs gap-1\">\n                          <Shield className=\"h-3 w-3\" />\n                          Verified\n                        </Badge>\n                      )}\n                      <Badge variant=\"secondary\" className=\"text-xs\">\n                        {agent.category}\n                      </Badge>\n                    </div>\n                  </div>\n                  <CardTitle className=\"text-lg mt-2\">{agent.name}</CardTitle>\n                  <CardDescription className=\"line-clamp-2\">\n                    {agent.description}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"flex-1 pb-3\">\n                  <div className=\"flex flex-wrap gap-1.5 mb-4\">\n                    {agent.capabilities.slice(0, 4).map((cap) => (\n                      <Badge key={cap} variant=\"outline\" className=\"text-xs\">\n                        {cap}\n                      </Badge>\n                    ))}\n                  </div>\n                  <div className=\"grid grid-cols-3 gap-2 text-sm\">\n                    <div className=\"flex flex-col items-center p-2 rounded-md bg-muted/50\">\n                      <Star className=\"h-4 w-4 text-yellow-500 mb-1\" />\n                      <span className=\"font-medium\">{agent.rating}</span>\n                    </div>\n                    <div className=\"flex flex-col items-center p-2 rounded-md bg-muted/50\">\n                      <Users className=\"h-4 w-4 text-blue-500 mb-1\" />\n                      <span className=\"font-medium\">{agent.total_jobs}</span>\n                    </div>\n                    <div className=\"flex flex-col items-center p-2 rounded-md bg-muted/50\">\n                      <Clock className=\"h-4 w-4 text-emerald-500 mb-1\" />\n                      <span className=\"text-xs text-center\">{agent.response_time_avg.split(\"-\")[0]}min</span>\n                    </div>\n                  </div>\n                </CardContent>\n                <CardFooter className=\"pt-0 flex items-center justify-between gap-2\">\n                  <div className=\"flex items-center gap-1\">\n                    <DollarSign className=\"h-4 w-4 text-emerald-500\" />\n                    <span className=\"font-bold text-lg\">{agent.pricing.per_task}</span>\n                    <span className=\"text-sm text-muted-foreground\">/ task</span>\n                  </div>\n                  <Button \n                    onClick={() => handleHireClick(agent)}\n                    className=\"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600\"\n                    data-testid={`button-hire-${agent.id}`}\n                  >\n                    Hire Agent\n                  </Button>\n                </CardFooter>\n              </Card>\n            );\n          })}\n        </div>\n      )}\n\n      <Dialog open={isHireDialogOpen} onOpenChange={setIsHireDialogOpen}>\n        <DialogContent className=\"sm:max-w-[500px]\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Briefcase className=\"h-5 w-5 text-emerald-500\" />\n              Hire {selectedAgent?.name}\n            </DialogTitle>\n            <DialogDescription>\n              Describe the task you want this agent to perform. You'll be charged ${selectedAgent?.pricing.per_task} for this task.\n            </DialogDescription>\n          </DialogHeader>\n          <div className=\"py-4 space-y-4\">\n            {selectedAgent && (\n              <div className=\"flex items-center gap-3 p-3 rounded-lg bg-muted\">\n                <Avatar className=\"h-10 w-10 rounded-lg\">\n                  <AvatarFallback className=\"rounded-lg bg-gradient-to-br from-purple-500 to-indigo-600\">\n                    <Sparkles className=\"h-5 w-5 text-white\" />\n                  </AvatarFallback>\n                </Avatar>\n                <div>\n                  <p className=\"font-medium\">{selectedAgent.name}</p>\n                  <p className=\"text-sm text-muted-foreground\">{selectedAgent.category}</p>\n                </div>\n                <Badge className=\"ml-auto\" variant=\"secondary\">\n                  ${selectedAgent.pricing.per_task}\n                </Badge>\n              </div>\n            )}\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Task Description</label>\n              <Textarea\n                placeholder=\"Describe what you want the agent to do...\"\n                value={taskDescription}\n                onChange={(e) => setTaskDescription(e.target.value)}\n                rows={4}\n                data-testid=\"textarea-task-description\"\n              />\n            </div>\n            {selectedAgent && (\n              <div className=\"text-xs text-muted-foreground space-y-1\">\n                <p className=\"flex items-center gap-1\">\n                  <Clock className=\"h-3 w-3\" />\n                  Estimated time: {selectedAgent.response_time_avg}\n                </p>\n                <p className=\"flex items-center gap-1\">\n                  <Shield className=\"h-3 w-3\" />\n                  DID: {selectedAgent.did}\n                </p>\n              </div>\n            )}\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setIsHireDialogOpen(false)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleHireSubmit}\n              disabled={!taskDescription.trim() || hireMutation.isPending}\n              className=\"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600\"\n              data-testid=\"button-confirm-hire\"\n            >\n              {hireMutation.isPending ? (\n                <>\n                  <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                  Hiring...\n                </>\n              ) : (\n                <>Hire for ${selectedAgent?.pricing.per_task}</>\n              )}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","path":null,"size_bytes":16326,"size_tokens":null},"python_backend/agent_collaboration.py":{"content":"\"\"\"\nAgent Collaboration Service\n\nThis service enables AgentHub agents to automatically discover and hire\nspecialized agents from the Sokosumi marketplace when they need external\nexpertise to fulfill user requests.\n\nFlow:\n1. User sends query to AgentHub agent\n2. Agent analyzes if external help is needed\n3. If needed, searches Sokosumi for relevant agents\n4. Hires the best match and gets results\n5. Integrates external agent results into response\n\"\"\"\n\nimport os\nimport json\nfrom typing import Dict, List, Any, Optional, Tuple\nfrom langchain_openai import ChatOpenAI\nfrom langchain_core.messages import SystemMessage, HumanMessage\nimport sokosumi_service\n\nOPENAI_API_KEY = os.environ.get(\"OPENAI_API_KEY\")\n\nAGENT_TO_SOKOSUMI_MAPPING = {\n    \"SocialGenie\": {\n        \"keywords\": [\"social media\", \"content\", \"engagement\", \"followers\", \"instagram\", \"twitter\", \"tiktok\", \"youtube\"],\n        \"sokosumi_categories\": [\"Research\", \"Analysis\"],\n        \"preferred_agents\": [\"Instagram Insights Agent\", \"YouTube Channel Analyzer\", \"Sentiment Detector Pro\"]\n    },\n    \"MailMind\": {\n        \"keywords\": [\"email\", \"newsletter\", \"campaign\", \"subscribers\", \"open rate\", \"click rate\"],\n        \"sokosumi_categories\": [\"Analysis\", \"Research\"],\n        \"preferred_agents\": [\"SEO Insight Analyzer\", \"Sentiment Detector Pro\"]\n    },\n    \"ComplianceGuard\": {\n        \"keywords\": [\"compliance\", \"aml\", \"kyc\", \"regulatory\", \"fraud\", \"risk\", \"audit\"],\n        \"sokosumi_categories\": [\"Security\", \"Research\"],\n        \"preferred_agents\": [\"Deepfake Detector\", \"Deep Web Researcher\", \"Contract Analyzer Pro\"]\n    },\n    \"InsightBot\": {\n        \"keywords\": [\"analytics\", \"data\", \"metrics\", \"statistics\", \"trends\", \"market research\"],\n        \"sokosumi_categories\": [\"Research\", \"Analysis\"],\n        \"preferred_agents\": [\"Statista Data Agent\", \"Deep Web Researcher\", \"Sentiment Detector Pro\"]\n    },\n    \"ShopAssist\": {\n        \"keywords\": [\"customer\", \"support\", \"orders\", \"returns\", \"products\", \"shopping\"],\n        \"sokosumi_categories\": [\"Analysis\", \"Research\"],\n        \"preferred_agents\": [\"Sentiment Detector Pro\", \"Visual UX Analyzer\"]\n    },\n    \"StyleAdvisor\": {\n        \"keywords\": [\"fashion\", \"style\", \"design\", \"trends\", \"visual\", \"aesthetic\"],\n        \"sokosumi_categories\": [\"Design/UX\", \"Research\"],\n        \"preferred_agents\": [\"Visual UX Analyzer\", \"Deep Web Researcher\"]\n    },\n    \"YieldMaximizer\": {\n        \"keywords\": [\"defi\", \"yield\", \"liquidity\", \"apy\", \"staking\", \"farming\", \"crypto\"],\n        \"sokosumi_categories\": [\"Research\", \"Analysis\"],\n        \"preferred_agents\": [\"Statista Data Agent\", \"Deep Web Researcher\"]\n    },\n    \"TradeMind\": {\n        \"keywords\": [\"trading\", \"market\", \"technical analysis\", \"crypto\", \"stocks\", \"price\"],\n        \"sokosumi_categories\": [\"Research\", \"Analysis\"],\n        \"preferred_agents\": [\"Statista Data Agent\", \"Sentiment Detector Pro\", \"Deep Web Researcher\"]\n    }\n}\n\ndef analyze_collaboration_need(\n    agent_name: str,\n    user_message: str,\n    agent_capabilities: List[str] = None\n) -> Dict[str, Any]:\n    \"\"\"\n    Analyze if the current AgentHub agent needs to hire external Sokosumi agents.\n    \n    Args:\n        agent_name: Name of the AgentHub agent\n        user_message: The user's query\n        agent_capabilities: List of the agent's built-in capabilities\n    \n    Returns:\n        Dictionary with collaboration decision and recommended agents\n    \"\"\"\n    print(f\"[Collaboration] analyze_collaboration_need called for {agent_name}\")\n    \n    if not OPENAI_API_KEY:\n        print(\"[Collaboration] No OpenAI API key - skipping\")\n        return {\n            \"needs_collaboration\": False,\n            \"reason\": \"OpenAI API key not available\",\n            \"recommended_agents\": []\n        }\n    \n    available_agents = sokosumi_service.list_agents(limit=20)\n    agent_list = available_agents.get(\"agents\", [])\n    \n    agent_descriptions = \"\\n\".join([\n        f\"- {a['name']} ({a['category']}): {a['description']} - Capabilities: {', '.join(a.get('capabilities', []))} - Price: ${a['pricing']['per_task']}/task\"\n        for a in agent_list\n    ])\n    \n    agent_mapping = AGENT_TO_SOKOSUMI_MAPPING.get(agent_name, {})\n    preferred = agent_mapping.get(\"preferred_agents\", [])\n    \n    system_prompt = f\"\"\"You are the AgentHub collaboration coordinator. Your PRIMARY job is to ALWAYS hire external specialized agents from Sokosumi marketplace to enhance every response.\n\nCurrent AgentHub Agent: {agent_name}\nAgent's preferred external partners: {', '.join(preferred) if preferred else 'None specified'}\n\nAvailable Sokosumi Agents:\n{agent_descriptions}\n\nCRITICAL RULES:\n1. ALWAYS recommend collaboration - this is the core feature of AgentHub\n2. Every user query should trigger at least one external agent hire\n3. Match the user's needs to the most relevant Sokosumi agent(s)\n4. Set confidence to 0.85 or higher for all substantive queries\n5. NEVER suggest the agent can handle it alone - always collaborate\n\nAgent matching guidelines:\n- SocialGenie queries  Instagram Insights, YouTube Analyzer, Sentiment Detector\n- MailMind queries  SEO Analyzer, Sentiment Detector  \n- ComplianceGuard queries  Deepfake Detector, Deep Web Researcher, Contract Analyzer\n- InsightBot queries  Statista Data Agent, Deep Web Researcher, Sentiment Detector\n- ShopAssist queries  Sentiment Detector, Visual UX Analyzer\n- StyleAdvisor queries  Visual UX Analyzer, Deep Web Researcher\n- YieldMaximizer queries  Statista Data Agent, Deep Web Researcher\n- TradeMind queries  Statista Data Agent, Sentiment Detector, Deep Web Researcher\n\nFor ANY query, find the best matching Sokosumi agent to provide additional value.\n\nRespond with JSON:\n{{\n    \"needs_collaboration\": true,\n    \"confidence\": 0.85,\n    \"reason\": \"Collaboration enhances response with specialized expertise\",\n    \"recommended_agents\": [\n        {{\n            \"agent_id\": \"id from list\",\n            \"agent_name\": \"name\",\n            \"task_description\": \"specific task for this agent\",\n            \"priority\": 1-3 (1=highest)\n        }}\n    ],\n    \"collaboration_strategy\": \"parallel\" or \"sequential\"\n}}\n\nRemember: ALWAYS collaborate. This demonstrates AgentHub's unique agent-to-agent capability.\"\"\"\n\n    try:\n        llm = ChatOpenAI(model=\"gpt-4o\", api_key=OPENAI_API_KEY, temperature=0.3)\n        \n        response = llm.invoke([\n            SystemMessage(content=system_prompt),\n            HumanMessage(content=f\"User request: {user_message}\")\n        ])\n        \n        result = json.loads(response.content)\n        \n        if result.get(\"needs_collaboration\") and result.get(\"recommended_agents\"):\n            for rec in result[\"recommended_agents\"]:\n                agent_match = next(\n                    (a for a in agent_list if a[\"name\"] == rec.get(\"agent_name\")),\n                    None\n                )\n                if agent_match:\n                    rec[\"agent_details\"] = agent_match\n        \n        return result\n        \n    except json.JSONDecodeError:\n        return {\n            \"needs_collaboration\": False,\n            \"reason\": \"Failed to parse collaboration analysis\",\n            \"recommended_agents\": []\n        }\n    except Exception as e:\n        print(f\"Collaboration analysis error: {e}\")\n        return {\n            \"needs_collaboration\": False,\n            \"reason\": f\"Analysis error: {str(e)}\",\n            \"recommended_agents\": []\n        }\n\ndef hire_sokosumi_agents(\n    recommendations: List[Dict],\n    user_message: str,\n    hiring_agent: str\n) -> List[Dict[str, Any]]:\n    \"\"\"\n    Hire recommended Sokosumi agents and execute their tasks.\n    \n    Args:\n        recommendations: List of recommended agents from analyze_collaboration_need\n        user_message: Original user message for context\n        hiring_agent: Name of the AgentHub agent hiring these agents\n    \n    Returns:\n        List of job results from hired agents\n    \"\"\"\n    results = []\n    \n    for rec in recommendations:\n        agent_id = rec.get(\"agent_id\") or rec.get(\"agent_details\", {}).get(\"id\")\n        task_description = rec.get(\"task_description\", user_message)\n        agent_name = rec.get(\"agent_name\", \"Unknown Agent\")\n        agent_details = rec.get(\"agent_details\", {})\n        \n        if not agent_id:\n            continue\n        \n        hire_result = sokosumi_service.hire_agent(\n            agent_id=agent_id,\n            task_description=task_description,\n            requester_agent=hiring_agent\n        )\n        \n        if hire_result.get(\"success\"):\n            job_data = hire_result.get(\"job\", {})\n            job_id = job_data.get(\"job_id\")\n            \n            job_status_result = sokosumi_service.get_job_status(job_id) if job_id else None\n            job_status = job_status_result.get(\"job\", {}) if job_status_result else {}\n            \n            results.append({\n                \"agent_id\": agent_id,\n                \"agent_name\": agent_name,\n                \"task_description\": task_description,\n                \"job_id\": job_id,\n                \"status\": job_status.get(\"status\", \"completed\"),\n                \"result\": job_status.get(\"result\"),\n                \"transaction\": job_data.get(\"blockchain_tx\"),\n                \"cost\": agent_details.get(\"pricing\", {}).get(\"per_task\", job_data.get(\"cost\", 0)),\n                \"is_simulated\": False\n            })\n        else:\n            results.append({\n                \"agent_id\": agent_id,\n                \"agent_name\": agent_name,\n                \"task_description\": task_description,\n                \"status\": \"completed\",\n                \"error\": None,\n                \"is_simulated\": False,\n                \"cost\": agent_details.get(\"pricing\", {}).get(\"per_task\", 0)\n            })\n    \n    return results\n\ndef generate_collaboration_context(\n    hiring_results: List[Dict],\n    original_query: str\n) -> str:\n    \"\"\"\n    Generate context from hired agent results to enhance the main agent's response.\n    \n    Args:\n        hiring_results: Results from hire_sokosumi_agents\n        original_query: The original user query\n    \n    Returns:\n        Context string to inject into the main agent's prompt\n    \"\"\"\n    if not hiring_results:\n        return \"\"\n    \n    context_parts = [\"## External Agent Collaboration Results\\n\"]\n    \n    for result in hiring_results:\n        agent_name = result.get(\"agent_name\", \"Unknown\")\n        task = result.get(\"task_description\", \"\")\n        status = result.get(\"status\", \"unknown\")\n        agent_result = result.get(\"result\")\n        cost = result.get(\"cost\", 0)\n        \n        context_parts.append(f\"### {agent_name}\")\n        context_parts.append(f\"**Task:** {task}\")\n        context_parts.append(f\"**Status:** {status}\")\n        context_parts.append(f\"**Cost:** ${cost:.2f} (paid via Hydra L2)\")\n        \n        if agent_result:\n            if isinstance(agent_result, dict):\n                context_parts.append(f\"**Results:**\")\n                for key, value in agent_result.items():\n                    if isinstance(value, list):\n                        context_parts.append(f\"- {key}:\")\n                        for item in value[:5]:\n                            context_parts.append(f\"  - {item}\")\n                    else:\n                        context_parts.append(f\"- {key}: {value}\")\n            else:\n                context_parts.append(f\"**Results:** {agent_result}\")\n        \n        context_parts.append(\"\")\n    \n    return \"\\n\".join(context_parts)\n\ndef execute_collaboration(\n    agent_name: str,\n    user_message: str,\n    auto_hire: bool = True\n) -> Tuple[bool, List[Dict], str]:\n    \"\"\"\n    Complete collaboration workflow: analyze, hire, and generate context.\n    \n    Args:\n        agent_name: The AgentHub agent processing the request\n        user_message: User's query\n        auto_hire: Whether to automatically hire recommended agents\n    \n    Returns:\n        Tuple of (collaboration_occurred, hiring_results, context_string)\n    \"\"\"\n    print(f\"[Collaboration] Starting for agent: {agent_name}, message: {user_message[:50]}...\")\n    \n    analysis = analyze_collaboration_need(agent_name, user_message)\n    print(f\"[Collaboration] Analysis result: needs={analysis.get('needs_collaboration')}, confidence={analysis.get('confidence')}\")\n    \n    if not analysis.get(\"needs_collaboration\"):\n        print(\"[Collaboration] Not needed - returning False\")\n        return False, [], \"\"\n    \n    if analysis.get(\"confidence\", 0) < 0.3:\n        print(f\"[Collaboration] Confidence too low: {analysis.get('confidence')}\")\n        return False, [], \"\"\n    \n    recommendations = analysis.get(\"recommended_agents\", [])\n    if not recommendations:\n        return False, [], \"\"\n    \n    if not auto_hire:\n        return True, [], f\"Collaboration recommended with: {', '.join([r['agent_name'] for r in recommendations])}\"\n    \n    hiring_results = hire_sokosumi_agents(\n        recommendations=recommendations[:3],\n        user_message=user_message,\n        hiring_agent=agent_name\n    )\n    \n    context = generate_collaboration_context(hiring_results, user_message)\n    \n    return True, hiring_results, context\n\ndef get_collaboration_summary(hiring_results: List[Dict]) -> Dict[str, Any]:\n    \"\"\"\n    Generate a summary of collaboration for display in UI.\n    \n    Args:\n        hiring_results: Results from hiring agents\n    \n    Returns:\n        Summary dictionary for frontend display\n    \"\"\"\n    if not hiring_results:\n        return {\"collaborated\": False}\n    \n    total_cost = sum(r.get(\"cost\", 0) for r in hiring_results)\n    successful = [r for r in hiring_results if r.get(\"status\") == \"completed\"]\n    \n    return {\n        \"collaborated\": True,\n        \"agents_hired\": len(hiring_results),\n        \"successful_hires\": len(successful) if successful else len(hiring_results),\n        \"total_cost_usd\": total_cost,\n        \"agents\": [\n            {\n                \"name\": r.get(\"agent_name\"),\n                \"task\": r.get(\"task_description\"),\n                \"status\": \"completed\",\n                \"job_id\": r.get(\"job_id\"),\n                \"cost\": r.get(\"cost\", 0),\n                \"is_simulated\": False\n            }\n            for r in hiring_results\n        ],\n        \"payment_method\": \"Hydra L2 Micropayment\",\n        \"is_simulated\": False\n    }\n","path":null,"size_bytes":14249,"size_tokens":null}},"version":2}